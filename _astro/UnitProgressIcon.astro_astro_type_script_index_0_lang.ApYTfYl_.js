import{P as s}from"./ProgressStore.BS796i-G.js";class i extends HTMLElement{loaded;paths;doneCount;segments;constructor(){super(),this.paths=JSON.parse(this.dataset.paths||"[]"),this.doneCount=this.querySelector(".sr-done-count"),this.segments=this.querySelectorAll(".segment"),this.paths.forEach(e=>s.subscribePageDone(e,()=>this.updateDone())),this.loaded=!0}updateDone(){const e=this.getDoneCount();this.doneCount.textContent=String(e),this.segments.forEach((t,n)=>{const o=n<e,a=this.loaded&&!t.classList.contains("done");o?(t.classList.add("done"),a&&this.animateDone(t)):t.classList.remove("done")})}animateDone(e){matchMedia("(prefers-reduced-motion: no-preference").matches&&e.animate([{transform:"scale(1.1)"}],{duration:200,easing:"ease-in-out"})}getDoneCount(){return this.paths.map(s.getPageDone).filter(e=>e).length}}customElements.define("unit-progress-icon",i);
