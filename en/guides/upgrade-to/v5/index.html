<!DOCTYPE html>
<html lang="en" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-4g3gq6ui">
	<head>
		<meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Upgrade to Astro v5 | Astro 中文文档</title><link rel="canonical" href="https://astro.zhcndoc.com/en/guides/upgrade-to/v5/"/><link rel="alternate" hreflang="en" href="https://astro.zhcndoc.com/en/guides/upgrade-to/v5/"/><link rel="alternate" hreflang="zh-CN" href="https://astro.zhcndoc.com/zh-cn/guides/upgrade-to/v5/"/><link rel="sitemap" href="/sitemap-index.xml"/><link rel="icon" href="/favicon.ico" sizes="32x32"/><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.13.5"/><meta name="generator" content="Starlight v0.35.2"/><meta property="og:title" content="Upgrade to Astro v5"/><meta property="og:type" content="article"/><meta property="og:url" content="https://astro.zhcndoc.com/en/guides/upgrade-to/v5/"/><meta property="og:locale" content="en"/><meta property="og:description" content="How to upgrade your project to Astro v5.0."/><meta property="og:site_name" content="Astro 中文文档"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="How to upgrade your project to Astro v5.0."/><meta property="og:image" content="https://astro.zhcndoc.com/open-graph/en/guides/upgrade-to/v5.webp"/><meta name="twitter:image" content="https://astro.zhcndoc.com/open-graph/en/guides/upgrade-to/v5.webp"/><meta name="twitter:site" content="astrodotbuild"/><meta name="docsearch:language" content="en"/><script src="https://www.zhcndoc.com/js/common.js" async></script>
		
		
<script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script>

<template id="theme-icons">
	
	<svg aria-hidden="true" class="light astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg>



	
	<svg aria-hidden="true" class="dark astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg>



	
	<svg aria-hidden="true" class="auto astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>



</template>
		<link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print">
	<link rel="stylesheet" href="/_astro/index.AnTgcHMU.css">
<style>.action:where(.astro-vnzlvqnm){gap:.5em;align-items:center;border-radius:999rem;padding:.5rem 1.125rem;color:var(--sl-color-white);line-height:1.1875;text-decoration:none;font-size:var(--sl-text-sm)}.action:where(.astro-vnzlvqnm).primary,.action:where(.astro-vnzlvqnm).primary:hover{background:var(--sl-color-text-accent);color:var(--sl-color-black)}.action:where(.astro-vnzlvqnm).secondary{background:var(--sl-color-black);border:2px solid}.action:where(.astro-vnzlvqnm).minimal{padding-inline:0}@media (min-width: 50rem){.action:where(.astro-vnzlvqnm){font-size:var(--sl-text-base);padding:1rem 1.25rem}}
@layer starlight.components{:root{--sl-badge-default-border: var(--sl-color-accent);--sl-badge-default-bg: var(--sl-color-accent-low);--sl-badge-default-text: #fff;--sl-badge-note-border: var(--sl-color-blue);--sl-badge-note-bg: var(--sl-color-blue-low);--sl-badge-note-text: #fff;--sl-badge-danger-border: var(--sl-color-red);--sl-badge-danger-bg: var(--sl-color-red-low);--sl-badge-danger-text: #fff;--sl-badge-success-border: var(--sl-color-green);--sl-badge-success-bg: var(--sl-color-green-low);--sl-badge-success-text: #fff;--sl-badge-caution-border: var(--sl-color-orange);--sl-badge-caution-bg: var(--sl-color-orange-low);--sl-badge-caution-text: #fff;--sl-badge-tip-border: var(--sl-color-purple);--sl-badge-tip-bg: var(--sl-color-purple-low);--sl-badge-tip-text: #fff}[data-theme=light]:root{--sl-badge-default-bg: var(--sl-color-accent-high);--sl-badge-note-bg: var(--sl-color-blue-high);--sl-badge-danger-bg: var(--sl-color-red-high);--sl-badge-success-bg: var(--sl-color-green-high);--sl-badge-caution-bg: var(--sl-color-orange-high);--sl-badge-tip-bg: var(--sl-color-purple-high)}.sl-badge:where(.astro-v2mfg3yc){display:inline-block;border:1px solid var(--sl-color-border-badge);border-radius:.25rem;font-family:var(--sl-font-system-mono);line-height:normal;color:var(--sl-color-text-badge);background-color:var(--sl-color-bg-badge);overflow-wrap:anywhere}.sidebar-content .sl-badge:where(.astro-v2mfg3yc){line-height:1;font-size:var(--sl-text-xs);padding:.125rem .375rem}.sidebar-content a[aria-current=page]>.sl-badge:where(.astro-v2mfg3yc){--sl-color-bg-badge: transparent;--sl-color-border-badge: currentColor;color:inherit}.default:where(.astro-v2mfg3yc){--sl-color-bg-badge: var(--sl-badge-default-bg);--sl-color-border-badge: var(--sl-badge-default-border);--sl-color-text-badge: var(--sl-badge-default-text)}.note:where(.astro-v2mfg3yc){--sl-color-bg-badge: var(--sl-badge-note-bg);--sl-color-border-badge: var(--sl-badge-note-border);--sl-color-text-badge: var(--sl-badge-note-text)}.danger:where(.astro-v2mfg3yc){--sl-color-bg-badge: var(--sl-badge-danger-bg);--sl-color-border-badge: var(--sl-badge-danger-border);--sl-color-text-badge: var(--sl-badge-danger-text)}.success:where(.astro-v2mfg3yc){--sl-color-bg-badge: var(--sl-badge-success-bg);--sl-color-border-badge: var(--sl-badge-success-border);--sl-color-text-badge: var(--sl-badge-success-text)}.tip:where(.astro-v2mfg3yc){--sl-color-bg-badge: var(--sl-badge-tip-bg);--sl-color-border-badge: var(--sl-badge-tip-border);--sl-color-text-badge: var(--sl-badge-tip-text)}.caution:where(.astro-v2mfg3yc){--sl-color-bg-badge: var(--sl-badge-caution-bg);--sl-color-border-badge: var(--sl-badge-caution-border);--sl-color-text-badge: var(--sl-badge-caution-text)}.small:where(.astro-v2mfg3yc){font-size:var(--sl-text-xs);padding:.125rem .25rem}.medium:where(.astro-v2mfg3yc){font-size:var(--sl-text-sm);padding:.175rem .35rem}.large:where(.astro-v2mfg3yc){font-size:var(--sl-text-base);padding:.225rem .45rem}.sl-markdown-content :is(h1,h2,h3,h4,h5,h6) .sl-badge:where(.astro-v2mfg3yc){vertical-align:middle}}
@layer starlight.components{.card-grid:where(.astro-c7iqepqq){display:grid;grid-template-columns:100%;gap:1rem}.card-grid:where(.astro-c7iqepqq)>*{margin-top:0!important}@media (min-width: 50rem){.card-grid:where(.astro-c7iqepqq){grid-template-columns:1fr 1fr;gap:1.5rem}.stagger:where(.astro-c7iqepqq){--stagger-height: 5rem;padding-bottom:var(--stagger-height)}.stagger:where(.astro-c7iqepqq)>*:nth-child(2n){transform:translateY(var(--stagger-height))}}}
@layer starlight.components{.card:where(.astro-cqn6wwpb){--sl-card-border: var(--sl-color-purple);--sl-card-bg: var(--sl-color-purple-low);border:1px solid var(--sl-color-gray-5);background-color:var(--sl-color-black);padding:clamp(1rem,calc(.125rem + 3vw),2.5rem);flex-direction:column;gap:clamp(.5rem,calc(.125rem + 1vw),1rem)}.card:where(.astro-cqn6wwpb):nth-child(4n+1){--sl-card-border: var(--sl-color-orange);--sl-card-bg: var(--sl-color-orange-low)}.card:where(.astro-cqn6wwpb):nth-child(4n+3){--sl-card-border: var(--sl-color-green);--sl-card-bg: var(--sl-color-green-low)}.card:where(.astro-cqn6wwpb):nth-child(4n+4){--sl-card-border: var(--sl-color-red);--sl-card-bg: var(--sl-color-red-low)}.card:where(.astro-cqn6wwpb):nth-child(4n+5){--sl-card-border: var(--sl-color-blue);--sl-card-bg: var(--sl-color-blue-low)}.title:where(.astro-cqn6wwpb){font-weight:600;font-size:var(--sl-text-h4);color:var(--sl-color-white);line-height:var(--sl-line-height-headings);gap:1rem;align-items:center}.card:where(.astro-cqn6wwpb) .icon:where(.astro-cqn6wwpb){border:1px solid var(--sl-card-border);background-color:var(--sl-card-bg);padding:.2em;border-radius:.25rem;flex-shrink:0}.card:where(.astro-cqn6wwpb) .body:where(.astro-cqn6wwpb){margin:0;font-size:clamp(var(--sl-text-sm),calc(.5rem + 1vw),var(--sl-text-body))}}
@layer starlight.components{svg:where(.astro-eytsx3ik){color:var(--sl-icon-color);font-size:var(--sl-icon-size, 1em);width:1em;height:1em}}
.card:where(.astro-har75nup){position:relative;margin:-.75rem;padding:.75rem;display:grid;grid-template-columns:auto 1fr;gap:.5rem;align-items:center;border-radius:.5rem}.card--minimal:where(.astro-har75nup){grid-template-columns:1fr;justify-items:center;text-align:center}.card:where(.astro-har75nup):hover,.card:where(.astro-har75nup):focus-within{background-color:var(--sl-color-gray-6);outline:1px solid var(--sl-color-text-accent)}@media (forced-colors: active){.card:where(.astro-har75nup):hover,.card:where(.astro-har75nup):focus-within{outline:1px solid LinkText}}.stack:where(.astro-har75nup){flex-direction:column;gap:.5rem}h3:where(.astro-har75nup){line-height:var(--sl-line-height-headings);font-size:var(--sl-text-lg);font-weight:600}.card--minimal:where(.astro-har75nup) h3:where(.astro-har75nup){font-size:var(--sl-text-body)}a:where(.astro-har75nup){text-decoration:none;color:var(--sl-color-white)}a:where(.astro-har75nup):focus{outline:none}a:where(.astro-har75nup):before{content:"";position:absolute;inset:0}
.fluid-grid:where(.astro-oxk5cgh7){--column-min-width: 13rem;text-align:start;margin-block:.5rem;padding-inline-start:0;display:grid;grid-template-columns:repeat(auto-fill,minmax(var(--column-min-width),1fr));grid-template-columns:repeat(auto-fill,minmax(min(var(--column-min-width),100%),1fr));gap:1.5rem 2rem;list-style:none;align-items:start}@media (min-width: 37.75em){.fluid-grid:where(.astro-oxk5cgh7){gap:2rem}}.fluid-grid--minimal:where(.astro-oxk5cgh7){--column-min-width: 8rem;gap:1.5rem .75rem}
@layer starlight.components{starlight-tabs:where(.astro-xtbw65nk){display:block}.tablist-wrapper:where(.astro-xtbw65nk){overflow-x:auto}:where(.astro-xtbw65nk)[role=tablist]{display:flex;list-style:none;border-bottom:2px solid var(--sl-color-gray-5);padding:0}.tab:where(.astro-xtbw65nk){margin-bottom:-2px}.tab:where(.astro-xtbw65nk)>:where(.astro-xtbw65nk)[role=tab]{display:flex;align-items:center;gap:.5rem;padding:0 1.25rem;text-decoration:none;border-bottom:2px solid var(--sl-color-gray-5);color:var(--sl-color-gray-3);outline-offset:var(--sl-outline-offset-inside);overflow-wrap:initial}.tab:where(.astro-xtbw65nk) :where(.astro-xtbw65nk)[role=tab][aria-selected=true]{color:var(--sl-color-white);border-color:var(--sl-color-text-accent);font-weight:600}.tablist-wrapper:where(.astro-xtbw65nk)~[role=tabpanel]{margin-top:1rem}}
.logo:where(.astro-anndpidy){display:flex;place-content:center;font-size:var(--logo-size);width:1em;height:1em;background-color:#17181c;border:1px solid hsl(224,10%,23%);outline:1px solid transparent;overflow:hidden}.circle:where(.astro-anndpidy){border-radius:50%}.rounded:where(.astro-anndpidy){border-radius:.125em}.logo:where(.astro-anndpidy) img:where(.astro-anndpidy){padding:var(--logo-padding);width:100%;height:100%}
@layer starlight.components{.sl-link-card:where(.astro-veoyb5wn){display:grid;grid-template-columns:1fr auto;gap:.5rem;border:1px solid var(--sl-color-gray-5);border-radius:.5rem;padding:1rem;box-shadow:var(--sl-shadow-sm);position:relative}a:where(.astro-veoyb5wn){text-decoration:none;line-height:var(--sl-line-height-headings)}a:where(.astro-veoyb5wn):before{content:"";position:absolute;inset:0}.stack:where(.astro-veoyb5wn){flex-direction:column;gap:.5rem}.title:where(.astro-veoyb5wn){color:var(--sl-color-white);font-weight:600;font-size:var(--sl-text-lg)}.description:where(.astro-veoyb5wn){color:var(--sl-color-gray-3);line-height:1.5}.icon:where(.astro-veoyb5wn){color:var(--sl-color-gray-3)}.sl-link-card:where(.astro-veoyb5wn):hover{background:var(--sl-color-gray-7, var(--sl-color-gray-6));border-color:var(--sl-color-gray-2)}.sl-link-card:where(.astro-veoyb5wn):hover .icon:where(.astro-veoyb5wn){color:var(--sl-color-white)}}
.description:where(.astro-kq5jy4fu){color:var(--sl-color-gray-2);font-size:var(--sl-text-body-sm)}.tags:where(.astro-kq5jy4fu){gap:.5rem}
.neutral-badge{border-color:var(--sl-color-gray-5);background-color:var(--sl-color-gray-6);color:var(--sl-color-text)}
@layer starlight.components{.sl-steps{--bullet-size: calc(var(--sl-line-height) * 1rem);--bullet-margin: .375rem;list-style:none;counter-reset:steps-counter var(--sl-steps-start, 0);padding-inline-start:0}.sl-steps>li{counter-increment:steps-counter;position:relative;padding-inline-start:calc(var(--bullet-size) + 1rem);padding-bottom:1px;min-height:calc(var(--bullet-size) + var(--bullet-margin))}.sl-steps>li+li{margin-top:0}.sl-steps>li:before{content:counter(steps-counter);position:absolute;top:0;inset-inline-start:0;width:var(--bullet-size);height:var(--bullet-size);line-height:var(--bullet-size);font-size:var(--sl-text-xs);font-weight:600;text-align:center;color:var(--sl-color-white);background-color:var(--sl-color-gray-6);border-radius:99rem;box-shadow:inset 0 0 0 1px var(--sl-color-gray-5)}.sl-steps>li:after{--guide-width: 1px;content:"";position:absolute;top:calc(var(--bullet-size) + var(--bullet-margin));bottom:var(--bullet-margin);inset-inline-start:calc((var(--bullet-size) - var(--guide-width)) / 2);width:var(--guide-width);background-color:var(--sl-color-hairline-light)}}@layer starlight.content{.sl-steps>li>:first-child{--lh: calc(1em * var(--sl-line-height));--shift-y: calc(.5 * (var(--bullet-size) - var(--lh)));transform:translateY(var(--shift-y));margin-bottom:var(--shift-y)}.sl-steps>li>:first-child:where(h1,h2,h3,h4,h5,h6){--lh: calc(1em * var(--sl-line-height-headings))}@supports (--prop: 1lh){.sl-steps>li>:first-child{--lh: 1lh}}}
.integrations-nav:where(.astro-hu7fe7u2) .scope{font-weight:400;color:var(--sl-color-text)}
@layer starlight.components{starlight-file-tree:where(.astro-3zkx6rqc){--x-space: 1.5rem;--y-space: .125rem;--y-pad: 0;display:block;border:1px solid var(--sl-color-gray-5);padding:1rem;background-color:var(--sl-color-gray-6);font-size:var(--sl-text-xs);font-family:var(--__sl-font-mono);overflow-x:auto}starlight-file-tree:where(.astro-3zkx6rqc) .directory>details{border:0;padding:0;padding-inline-start:var(--x-space);background:transparent}starlight-file-tree:where(.astro-3zkx6rqc) .directory>details>summary{margin-inline-start:calc(-1 * var(--x-space));border:0;padding:var(--y-pad) .625rem;font-weight:400;color:var(--sl-color-white);max-width:100%}starlight-file-tree:where(.astro-3zkx6rqc) .directory>details>summary::marker,starlight-file-tree:where(.astro-3zkx6rqc) .directory>details>summary::-webkit-details-marker{color:var(--sl-color-gray-3)}starlight-file-tree:where(.astro-3zkx6rqc) .directory>details>summary:hover,starlight-file-tree:where(.astro-3zkx6rqc) .directory>details>summary:hover .tree-icon{cursor:pointer;color:var(--sl-color-text-accent);fill:currentColor}starlight-file-tree:where(.astro-3zkx6rqc) .directory>details>summary:hover~ul{border-color:var(--sl-color-gray-4)}starlight-file-tree:where(.astro-3zkx6rqc) .directory>details>summary:hover .highlight .tree-icon{color:var(--sl-color-text-invert);fill:currentColor}starlight-file-tree:where(.astro-3zkx6rqc) ul{margin-inline-start:.5rem;border-inline-start:1px solid var(--sl-color-gray-5);padding:0;padding-inline-start:.125rem;list-style:none}starlight-file-tree:where(.astro-3zkx6rqc)>ul{margin:0;border:0;padding:0}starlight-file-tree:where(.astro-3zkx6rqc) li{margin:var(--y-space) 0;padding:var(--y-pad) 0}starlight-file-tree:where(.astro-3zkx6rqc) .file{margin-inline-start:calc(var(--x-space) - .125rem);color:var(--sl-color-white)}starlight-file-tree:where(.astro-3zkx6rqc) .tree-entry{display:inline-flex;align-items:flex-start;flex-wrap:wrap;max-width:calc(100% - 1rem)}@media (min-width: 30em){starlight-file-tree:where(.astro-3zkx6rqc) .tree-entry{flex-wrap:nowrap}}starlight-file-tree:where(.astro-3zkx6rqc) .tree-entry>:first-child{flex-shrink:0}starlight-file-tree:where(.astro-3zkx6rqc) .empty{color:var(--sl-color-gray-3);padding-inline-start:.375rem}starlight-file-tree:where(.astro-3zkx6rqc) .comment{color:var(--sl-color-gray-3);padding-inline-start:1.625rem;max-width:24rem;min-width:12rem}starlight-file-tree:where(.astro-3zkx6rqc) .highlight{display:inline-block;border-radius:.25rem;padding-inline-end:.5rem;color:var(--sl-color-text-invert);background-color:var(--sl-color-text-accent)}starlight-file-tree:where(.astro-3zkx6rqc) svg{display:inline;fill:var(--sl-color-gray-3);vertical-align:middle;margin-inline:.25rem .375rem;width:.875rem;height:.875rem}starlight-file-tree:where(.astro-3zkx6rqc) .highlight svg.tree-icon{fill:currentColor}}
@layer starlight.components{.sl-link-button:where(.astro-n3qr5j5k){align-items:center;border:1px solid transparent;border-radius:999rem;display:inline-flex;font-size:var(--sl-text-sm);gap:.5em;line-height:1.1875;outline-offset:.25rem;padding:.4375rem 1.125rem;text-decoration:none}.sl-link-button:where(.astro-n3qr5j5k).primary{background:var(--sl-color-text-accent);border-color:var(--sl-color-text-accent);color:var(--sl-color-black)}.sl-link-button:where(.astro-n3qr5j5k).primary:hover{color:var(--sl-color-black)}.sl-link-button:where(.astro-n3qr5j5k).secondary{border-color:inherit;color:var(--sl-color-white)}.sl-link-button:where(.astro-n3qr5j5k).minimal{color:var(--sl-color-white);padding-inline:0}.sl-link-button:where(.astro-n3qr5j5k) svg{flex-shrink:0}@media (min-width: 50rem){.sl-link-button:where(.astro-n3qr5j5k){font-size:var(--sl-text-base);padding:.9375rem 1.25rem}}.sl-markdown-content .sl-link-button:where(.astro-n3qr5j5k){margin-inline-end:1rem}.sl-markdown-content .sl-link-button:where(.astro-n3qr5j5k):not(:where(p *)){margin-block:1rem}}
</style><script type="module" src="/_astro/page.7qqag-5g.js"></script><style>.read-more:where(.astro-szj46hnz){display:flex;gap:.5rem;align-items:flex-start}.icon:where(.astro-szj46hnz){--icon-size: 1.5rem;font-size:var(--icon-size);flex-shrink:0;margin-block:calc((var(--sl-line-height) * 1rem - var(--icon-size)) / 2);color:var(--sl-color-text-accent)}
</style><style>.source:where(.astro-ro74hpkt){display:flex;gap:.5rem;align-items:flex-start}.icon:where(.astro-ro74hpkt){--icon-size: 1.5rem;font-size:var(--icon-size);flex-shrink:0;margin-block:calc((var(--sl-line-height) * 1rem - var(--icon-size)) / 2);color:var(--sl-color-text-accent)}
</style></head>
	<body class="astro-4g3gq6ui">
		<a href="#_top" class="astro-37u7dava">Skip to content</a>
		<div class="page sl-flex astro-34ku3w3v">
	<header class="header astro-34ku3w3v"><div class="header astro-4kjkofih">
	<div class="title-wrapper sl-flex astro-4kjkofih">
		<span class="site-title sl-flex astro-oijwx5iz">
	<a class="astro-logo astro-oijwx5iz" href="/" aria-label="Astro"><svg xmlns="http://www.w3.org/2000/svg" width="106" height="32" viewBox="0 -6 381 100">
  <path class="flame" fill="currentColor" d="M25.8 85.2c-4.5-4.2-5.9-12.8-4-19.1 3.3 4 7.8 5.2 12.5 6 7.2 1 14.3.6 21-2.7l2.4-1.4c.6 1.8.8 3.7.5 5.6-.5 4.5-2.8 8-6.4 10.7-1.4 1.1-3 2-4.5 3-4.6 3.2-5.8 6.8-4 12.1v.6a12 12 0 0 1-5.3-4.6 13 13 0 0 1-2-7c0-1.2 0-2.5-.2-3.7-.4-3-1.8-4.3-4.5-4.4a5.2 5.2 0 0 0-5.4 4.2l-.1.7Z"/>
  <path fill="currentColor" d="M0 65s13.4-6.5 26.8-6.5l10.1-31.3c.4-1.5 1.5-2.5 2.7-2.5 1.3 0 2.4 1 2.8 2.5l10 31.3c16 0 26.9 6.5 26.9 6.5L56.5 3c-.6-1.8-1.7-3-3.2-3H26c-1.5 0-2.5 1.2-3.2 3L0 65Zm141-19.9c0 5.5-6.8 8.8-16.2 8.8-6.2 0-8.3-1.5-8.3-4.7 0-3.4 2.6-5 8.8-5 5.5 0 10.3 0 15.7.8v.1Zm.1-6.8a71 71 0 0 0-14.5-1.2c-17.7 0-26 4.2-26 14 0 10.1 5.7 14 18.8 14 11.2 0 18.8-2.8 21.6-9.8h.4l-.1 4.7c0 3.6.6 3.9 3.5 3.9h13.8c-.8-2.2-1.2-8.2-1.2-13.4l.2-15.4c0-11.5-6.9-18.8-28.5-18.8-9.3 0-19.6 1.6-27.5 4 .8 3.1 1.8 9.4 2.3 13.5a61.4 61.4 0 0 1 24-4.5c10.4 0 13.2 2.3 13.2 7.1v2Zm37.9 10c-1.9.3-4.5.3-7 .3a60 60 0 0 1-7.1-.4l-.1 2c0 9.5 6.2 15 28.1 15 20.6 0 27.3-5.5 27.3-15.1 0-9.2-4.4-13.7-24-14.7-15.2-.6-16.6-2.3-16.6-4.2 0-2.2 2-3.4 12.2-3.4 10.6 0 13.4 1.5 13.4 4.5v.7a153 153 0 0 1 14.1 0v-1.7c0-11.2-9.2-14.9-27.2-14.9-20.3 0-27 5-27 14.6 0 8.7 5.4 14.1 24.8 15 14.3.4 16 2 16 4.2 0 2.4-2.4 3.5-12.5 3.5-11.5 0-14.4-1.6-14.4-5v-.4Zm66-40.1a58.2 58.2 0 0 1-20.8 11.6v10.8h5V47c0 10 5.3 17.7 21.8 17.7 7 0 11.6-.8 17.4-2-.6-3.7-1.3-9.4-1.5-13.8a41 41 0 0 1-12.6 1.8c-6.6 0-9.3-1.8-9.3-7.1V30.8c8.6 0 17.1.2 22.1.4 0-4 .1-9.7.3-13.5l-22.1.2.2-9.7h-.5Zm44.7 20.1.3-10.6h-15.1c.2 6.5.2 13.3.2 23 0 10 0 16.7-.2 23.2H292c-.3-4.6-.3-12.3-.3-18.9 0-10.3 4.2-13.3 13.7-13.3 4.4 0 7.6.5 10.3 1.5.1-3.8.9-11.4 1.3-14.7a34 34 0 0 0-9.8-1.4c-8.2 0-14.2 3.3-17 11.3l-.6-.1Zm75.1 12.2c0 8.3-6 12.2-15.4 12.2S334 49 334 40.5c0-8.6 6-11.8 15.4-11.8 9.3 0 15.4 3.5 15.4 11.8Zm15.7-.4c0-16.5-13-24-31.1-24-18.3 0-30.8 7.5-30.8 24s11.6 25.3 30.7 25.3c19.2 0 31.2-8.8 31.2-25.3Z"/>
  <defs>
    <linearGradient id="gradient" x1="21" x2="64.6" y1="100" y2="79.4" gradientUnits="userSpaceOnUse">
      <stop stop-color="#D83333"/>
      <stop offset="1" stop-color="#F041FF"/>
    </linearGradient>
  </defs>
  <style>
    [data-theme="dark"] .flame {
      fill: url(#gradient);
    }
  </style>
</svg>
</a>
	<a class="docs-logo astro-oijwx5iz" href="/en/getting-started/" aria-label="Docs"><svg xmlns="http://www.w3.org/2000/svg" width="69" height="28" viewBox="0 -6 246 100">
	<path fill="currentColor" d="M29 63.8c16.6 0 28.1-9.5 28.1-23.8 0-14.4-10.8-22.3-27.8-22.3H0v46.1h29ZM13.2 26.6h14.2c9.5 0 16 4.6 16 13.6 0 9.3-6 14.7-15.9 14.7H13.1V26.6Zm80.1 38.8c18.8 0 31-9.7 31-24.6 0-15-12.2-24.6-31-24.6-18.7 0-31 9.6-31 24.6 0 14.8 12.3 24.6 31 24.6Zm0-9.8c-10.3 0-17-6-17-14.8 0-9 6.7-14.9 17-14.9s17.1 6 17.1 14.9-6.8 14.8-17.1 14.8Zm66.3 9.8c15 0 25.5-6 29.3-16.4l-13.5-3c-1.9 6.1-7.2 9.4-15.4 9.4-10.4 0-17-5.8-17-14.7 0-9 6.4-14.7 16.8-14.7 8.4 0 13.7 3.4 15.5 9.7l13.6-2.4c-3-10.7-13.9-17.2-28.9-17.2-18.1 0-30.7 10.2-30.7 24.8 0 14.8 11.7 24.4 30.2 24.4Zm60.3 0c16.6 0 26.1-5.7 26.1-15.9 0-8.5-5.2-12.3-18-13.6l-12.7-1.2c-5.9-.7-7.8-1.8-7.8-4.6 0-3.2 3.9-4.8 11-4.8 8.8 0 15.4 2.8 18.9 7.3l8.2-7c-5.7-6.4-14.8-9.4-26.5-9.4-15.7 0-24.6 5.4-24.6 14.5 0 8.5 5.4 12.7 16.7 14l14.1 1.5c5.5.6 7.5 1.7 7.5 4.6 0 3.6-4 5.3-12.3 5.3-9.4 0-16.5-3.6-20.4-9l-9.3 6.5c4.7 7.3 15.4 11.8 29 11.8Z"/>
</svg>
</a>
</span>
	</div>
	<div class="sl-flex print:hidden astro-4kjkofih">
		<sl-doc-search data-translations="{&#34;button&#34;:&#34;Search&#34;,&#34;shortcutLabel&#34;:&#34;Press / to search&#34;,&#34;placeholder&#34;:&#34;Search docs&#34;}">
	<button type="button" class="DocSearch DocSearch-Button" aria-label="Search">
		<span class="DocSearch-Button-Container">
			<svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20">
				<path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path>
			</svg>
			<span class="DocSearch-Button-Placeholder">Search</span>
		</span>
		<span class="DocSearch-Button-Keys"></span>
	</button>
</sl-doc-search>

<script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.Dkxq3uJO.js"></script>
	</div>
	<div class="sl-hidden md:sl-flex print:hidden right-group astro-4kjkofih">
		<div class="sl-flex social-icons astro-4kjkofih">
			<a href="https://github.com/withastro/astro" rel="me" class="sl-flex astro-tpebbyzj">
					<span class="sr-only astro-tpebbyzj">GitHub</span>
					
	<svg aria-hidden="true" class="astro-tpebbyzj astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



				</a><a href="https://astro.build/chat" rel="me" class="sl-flex astro-tpebbyzj">
					<span class="sr-only astro-tpebbyzj">Discord</span>
					
	<svg aria-hidden="true" class="astro-tpebbyzj astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z"/></svg>



				</a>


		</div>
		<starlight-theme-select>
	
	<label style="--sl-select-width: 6.25em" class="astro-5trz26bn">
	<span class="sr-only astro-5trz26bn">Select theme</span>
	
	<svg aria-hidden="true" class="icon label-icon astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>



	<select value="auto" autocomplete="off" class="astro-5trz26bn">
		<option value="dark" class="astro-5trz26bn">Dark</option><option value="light" class="astro-5trz26bn">Light</option><option value="auto" selected class="astro-5trz26bn">Auto</option>
	</select>
	
	<svg aria-hidden="true" class="icon caret astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>



</label>
</starlight-theme-select>


<script>
	StarlightThemeProvider.updatePickers();
</script>

<script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script>
		<starlight-lang-select>
			<label style="--sl-select-width: 7em" class="astro-5trz26bn">
	<span class="sr-only astro-5trz26bn">Select language</span>
	
	<svg aria-hidden="true" class="icon label-icon astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path fill-rule="evenodd" d="M8.516 3a.94.94 0 0 0-.941.94v1.15H2.94a.94.94 0 1 0 0 1.882h7.362a7.422 7.422 0 0 1-1.787 3.958 7.42 7.42 0 0 1-1.422-2.425.94.94 0 1 0-1.774.627 9.303 9.303 0 0 0 1.785 3.043 7.422 7.422 0 0 1-4.164 1.278.94.94 0 1 0 0 1.881 9.303 9.303 0 0 0 5.575-1.855 9.303 9.303 0 0 0 4.11 1.74l-.763 1.525a.968.968 0 0 0-.016.034l-1.385 2.77a.94.94 0 1 0 1.683.841l1.133-2.267h5.806l1.134 2.267a.94.94 0 0 0 1.683-.841l-1.385-2.769a.95.95 0 0 0-.018-.036l-3.476-6.951a.94.94 0 0 0-1.682 0l-1.82 3.639a7.423 7.423 0 0 1-3.593-1.256 9.303 9.303 0 0 0 2.27-5.203h1.894a.94.94 0 0 0 0-1.881H9.456V3.94A.94.94 0 0 0 8.516 3Zm6.426 11.794a1.068 1.068 0 0 1-.02.039l-.703 1.407h3.924l-1.962-3.924-1.24 2.478Z" clip-rule="evenodd"/></svg>



	<select value="/en/guides/upgrade-to/v5/" autocomplete="off" class="astro-5trz26bn">
		<option value="/en/guides/upgrade-to/v5/" selected class="astro-5trz26bn">English</option><option value="/zh-cn/guides/upgrade-to/v5/" class="astro-5trz26bn">简体中文</option>
	</select>
	
	<svg aria-hidden="true" class="icon caret astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>



</label>
		</starlight-lang-select>

<script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script>
	</div>
</div></header>
	<nav class="sidebar print:hidden astro-34ku3w3v" aria-label="Main">
				<starlight-menu-button class="print:hidden astro-23okaqvr">
	<button aria-expanded="false" aria-label="Menu" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-23okaqvr">
		
	<svg aria-hidden="true" class="open-menu astro-23okaqvr astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg>



		
	<svg aria-hidden="true" class="close-menu astro-23okaqvr astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg>



	</button>
</starlight-menu-button>

<script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>
				<div id="starlight__sidebar" class="sidebar-pane astro-34ku3w3v">
					<div class="sidebar-content sl-flex astro-34ku3w3v">
						<sl-sidebar-state-persist data-hash="02piy3l" class="astro-eb2yzuwr">
	<script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>

	
	<tabbed-content class="astro-6yyweqw4">
	<ul class="tab-list tabbed-sidebar astro-3x5efdbn astro-6yyweqw4">
		<li class="tab-item astro-3x5efdbn">
	<a href="#__tab-start" class="tab-link">
		
						
	<svg aria-hidden="true" class="icon astro-3x5efdbn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path fill-rule="evenodd" d="M1.44 8.855v-.001l3.527-3.516c.34-.344.802-.541 1.285-.548h6.649l.947-.947c3.07-3.07 6.207-3.072 7.62-2.868a1.821 1.821 0 0 1 1.557 1.557c.204 1.413.203 4.55-2.868 7.62l-.946.946v6.649a1.845 1.845 0 0 1-.549 1.286l-3.516 3.528a1.844 1.844 0 0 1-3.11-.944l-.858-4.275-4.52-4.52-2.31-.463-1.964-.394A1.847 1.847 0 0 1 .98 10.693a1.843 1.843 0 0 1 .46-1.838Zm5.379 2.017-3.873-.776L6.32 6.733h4.638l-4.14 4.14Zm8.403-5.655c2.459-2.46 4.856-2.463 5.89-2.33.134 1.035.13 3.432-2.329 5.891l-6.71 6.71-3.561-3.56 6.71-6.711Zm-1.318 15.837-.776-3.873 4.14-4.14v4.639l-3.364 3.374Z" clip-rule="evenodd"/><path d="M9.318 18.345a.972.972 0 0 0-1.86-.561c-.482 1.435-1.687 2.204-2.934 2.619a8.22 8.22 0 0 1-1.23.302c.062-.365.157-.79.303-1.229.415-1.247 1.184-2.452 2.62-2.935a.971.971 0 1 0-.62-1.842c-.12.04-.236.084-.35.13-2.02.828-3.012 2.588-3.493 4.033a10.383 10.383 0 0 0-.51 2.845l-.001.016v.063c0 .536.434.972.97.972H2.24a7.21 7.21 0 0 0 .878-.065c.527-.063 1.248-.19 2.02-.447 1.445-.48 3.205-1.472 4.033-3.494a5.828 5.828 0 0 0 .147-.407Z"/></svg>


 Start
	</a>
</li><li class="tab-item astro-3x5efdbn">
	<a href="#__tab-guides-and-recipes" class="tab-link" data-initial="true" aria-selected="true">
		
						
	<svg aria-hidden="true" class="icon astro-3x5efdbn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>


 Guides and recipes
	</a>
</li><li class="tab-item astro-3x5efdbn">
	<a href="#__tab-reference" class="tab-link">
		
						
	<svg aria-hidden="true" class="icon astro-3x5efdbn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 11a1 1 0 0 0-1 1v4a1 1 0 0 0 2 0v-4a1 1 0 0 0-1-1Zm.38-3.92a1 1 0 0 0-.76 0 1 1 0 0 0-.33.21 1.15 1.15 0 0 0-.21.33 1 1 0 0 0 .21 1.09c.097.088.209.16.33.21A1 1 0 0 0 13 8a1.05 1.05 0 0 0-.29-.71 1 1 0 0 0-.33-.21ZM12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20Zm0 18a8 8 0 1 1 0-16.001A8 8 0 0 1 12 20Z"/></svg>


 Reference
	</a>
</li><li class="tab-item astro-3x5efdbn">
	<a href="#__tab-integrations" class="tab-link">
		
						
	<svg aria-hidden="true" class="icon astro-3x5efdbn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 22H5a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h1a4 4 0 0 1 7.3-2.18c.448.64.692 1.4.7 2.18h3a1 1 0 0 1 1 1v3a4 4 0 0 1 2.18 7.3A3.86 3.86 0 0 1 18 18v3a1 1 0 0 1-1 1ZM5 8a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h11v-3.18a1 1 0 0 1 1.33-.95 1.77 1.77 0 0 0 1.74-.23 2 2 0 0 0 .93-1.37 2 2 0 0 0-.48-1.59 1.89 1.89 0 0 0-2.17-.55 1 1 0 0 1-1.33-.95V8h-3.2a1 1 0 0 1-1-1.33 1.77 1.77 0 0 0-.23-1.74 1.939 1.939 0 0 0-3-.43A2 2 0 0 0 8 6c.002.23.046.456.13.67A1 1 0 0 1 7.18 8H5Z"/></svg>


 Integrations
	</a>
</li><li class="tab-item astro-3x5efdbn">
	<a href="#__tab-third-party-services" class="tab-link">
		
						
	<svg aria-hidden="true" class="icon astro-3x5efdbn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m21.32 9.55-1.89-.63.89-1.78A1 1 0 0 0 20.13 6L18 3.87a1 1 0 0 0-1.15-.19l-1.78.89-.63-1.89A1 1 0 0 0 13.5 2h-3a1 1 0 0 0-.95.68l-.63 1.89-1.78-.89A1 1 0 0 0 6 3.87L3.87 6a1 1 0 0 0-.19 1.15l.89 1.78-1.89.63a1 1 0 0 0-.68.94v3a1 1 0 0 0 .68.95l1.89.63-.89 1.78A1 1 0 0 0 3.87 18L6 20.13a1 1 0 0 0 1.15.19l1.78-.89.63 1.89a1 1 0 0 0 .95.68h3a1 1 0 0 0 .95-.68l.63-1.89 1.78.89a1 1 0 0 0 1.13-.19L20.13 18a1 1 0 0 0 .19-1.15l-.89-1.78 1.89-.63a1 1 0 0 0 .68-.94v-3a1 1 0 0 0-.68-.95ZM20 12.78l-1.2.4A2 2 0 0 0 17.64 16l.57 1.14-1.1 1.1-1.11-.6a2 2 0 0 0-2.79 1.16l-.4 1.2h-1.59l-.4-1.2A2 2 0 0 0 8 17.64l-1.14.57-1.1-1.1.6-1.11a2 2 0 0 0-1.16-2.82l-1.2-.4v-1.56l1.2-.4A2 2 0 0 0 6.36 8l-.57-1.11 1.1-1.1L8 6.36a2 2 0 0 0 2.82-1.16l.4-1.2h1.56l.4 1.2A2 2 0 0 0 16 6.36l1.14-.57 1.1 1.1-.6 1.11a2 2 0 0 0 1.16 2.79l1.2.4v1.59ZM12 8a4 4 0 1 0 0 8 4 4 0 0 0 0-8Zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4Z"/></svg>


 Third-party services
	</a>
</li>
	</ul>

	<div class="panels tabbed-sidebar astro-3x5efdbn astro-6yyweqw4">
		
		
		<div id="__tab-start" class="astro-s7ttdo4b">
	
					<ul class="top-level astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/getting-started/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Getting started</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="0"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Welcome, world!</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/concepts/why-astro/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Why Astro?</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/concepts/islands/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Islands architecture</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/tutorial/0-introduction/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Tutorial: Build a blog</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/astro-courses/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Courses</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="1"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Start a new project</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/install-and-setup/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Installation</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/basics/project-structure/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Project structure</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/develop-and-build/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Develop and build</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="2"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Configuration</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/configuring-astro/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Configuration overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/editor-setup/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Editor setup</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/typescript/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">TypeScript</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/environment-variables/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Environment variables</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/build-with-ai/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Build with AI</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/dev-toolbar/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Dev toolbar</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="3"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Migrate to Astro</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Site migration overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-create-react-app/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Create React App</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-docusaurus/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Docusaurus</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-eleventy/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Eleventy</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-gatsby/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Gatsby</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-gitbook/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">GitBook</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-gridsome/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Gridsome</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-hugo/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Hugo</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-jekyll/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Jekyll</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-nextjs/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Next.js</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-nuxtjs/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">NuxtJS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-pelican/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Pelican</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-sveltekit/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">SvelteKit</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-vuepress/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">VuePress</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/migrate-to-astro/from-wordpress/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">WordPress</span>
						
					</a>
			</li>
</ul>
					</details>
			</li>
</ul>
				
</div><div id="__tab-guides-and-recipes" data-initial="true" class="astro-s7ttdo4b">
	
					<ul class="top-level astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="4"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Routing and navigation</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/basics/astro-pages/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Pages</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/routing/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Routing</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/endpoints/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Endpoints</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/middleware/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Middleware</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/internationalization/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Internationalization (i18n)</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/prefetch/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Prefetch</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/view-transitions/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">View transitions</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="5"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Build your UI</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/basics/astro-components/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Components</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/basics/layouts/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Layouts</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/styling/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Styles and CSS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/fonts/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Fonts</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/syntax-highlighting/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Syntax Highlighting</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/client-side-scripts/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Scripts and event handling</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/framework-components/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Front-end frameworks</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="6"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Add content to your site</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/markdown-content/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Markdown</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/content-collections/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Content collections</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/images/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Images</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/data-fetching/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Data fetching</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/astro-db/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Astro DB</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="7"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Server rendering</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/on-demand-rendering/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">On-demand rendering</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/server-islands/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Server islands</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/actions/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Actions</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/sessions/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Sessions</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="8"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Upgrade</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/upgrade-astro/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Upgrade Astro</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="9"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Major upgrade guides</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/upgrade-to/v5/" aria-current="page" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">v5.0</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/upgrade-to/v4/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">v4.0</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/upgrade-to/v3/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">v3.0</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/upgrade-to/v2/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">v2.0</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/upgrade-to/v1/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">v1.0</span>
						
					</a>
			</li>
</ul>
					</details>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/troubleshooting/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Troubleshooting</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<details class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="10"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">How-to recipes</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/recipes/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Recipes overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/add-yaml-support/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Installing a Vite or Rollup plugin</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/analyze-bundle-size/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Analyze bundle size</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/build-custom-img-component/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Build a custom image component</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/build-forms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Build HTML forms in Astro pages</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/build-forms-api/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Build forms with API routes</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/bun/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Use Bun with Astro</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/call-endpoints/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Call endpoints from the server</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/captcha/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Verify a Captcha</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/customizing-output-filenames/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Customize file names in the build output</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/docker/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Build your Astro site with Docker</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/dynamically-importing-images/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Dynamically import images</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/external-links/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Add icons to external links</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/i18n/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Add i18n features</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/making-toolbar-apps/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Create a dev toolbar app</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/modified-time/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Add last modified time</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/reading-time/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Add reading time</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/rss/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Add an RSS feed</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/sharing-state/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Share state between Astro components</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/sharing-state-islands/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Share state between islands</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/streaming-improve-page-performance/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Using streaming to improve page performance</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/recipes/tailwind-rendered-markdown/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Style rendered Markdown with Tailwind Typography</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<a href="/en/contribute/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Contribute to Astro</span>
						
					</a>
			</li>
</ul>
				
</div><div id="__tab-reference" class="astro-s7ttdo4b">
	
					<ul class="top-level astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="11"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Astro Template Syntax</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/reference/astro-syntax/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Template expressions reference</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/directives-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Template directives reference</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/configuration-reference/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Configuration Reference</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/cli-reference/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">CLI Commands</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/imports/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Imports reference</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/routing-reference/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Routing Reference</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="12"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Runtime API</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/reference/api-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Render context</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-actions/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:actions</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-assets/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:assets</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-config/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:config</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-content/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:content</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-env/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:env</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-i18n/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:i18n</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-middleware/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:middleware</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/modules/astro-transitions/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">astro:transitions</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="13"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Other development APIs</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/reference/integrations-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Integration API</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/adapter-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Adapter API</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/content-loader-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Content Loader API</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/image-service-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Image Service API</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/dev-toolbar-app-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Dev Toolbar App API</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/container-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Container API (experimental)</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/programmatic-reference/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Programmatic Astro API (experimental)</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="14"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Experimental features</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Configuring experimental flags</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/csp/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Content Security Policy</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/fonts/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Fonts</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/live-content-collections/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Live content collections</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/client-prerender/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Client prerendering</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/content-intellisense/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Intellisense for collections</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/preserve-scripts-order/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Preserve scripts order</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/heading-id-compat/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Markdown heading ID compatibility</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/static-import-meta-env/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Private meta environment variables inlining</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/experimental-flags/chrome-devtools-workspace/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Chrome DevTools workspace</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/legacy-flags/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Legacy flags</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/error-reference/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Error reference</span>
						
					</a>
			</li>
</ul>
				
</div><div id="__tab-integrations" class="astro-s7ttdo4b">
	
					<ul class="top-level astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Integrations overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="15"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">UI frameworks</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/alpinejs/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Alpine.js</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/preact/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Preact</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/react/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">React</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/solid-js/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">SolidJS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/svelte/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Svelte</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/vue/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Vue</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="16"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Adapters</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/cloudflare/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Cloudflare</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/netlify/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Netlify</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/node/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Node</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/vercel/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Vercel</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details open class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="17"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Other official integrations</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/db/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">DB</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/markdoc/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Markdoc</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/mdx/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">MDX</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/partytown/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Partytown</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/integrations-guide/sitemap/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Sitemap</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<a href="/en/reference/publish-to-npm/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Publish to NPM</span>
						
					</a>
			</li>
</ul>
				
</div><div id="__tab-third-party-services" class="astro-s7ttdo4b">
	
					<ul class="top-level astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<details class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="18"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Deployment guides</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Deployment overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/aws/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">AWS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/azion/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Azion</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/buddy/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Buddy</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/cleavr/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Cleavr</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/clever-cloud/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Clever Cloud</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/cloudflare/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Cloudflare</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/cloudray/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">CloudRay</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/deno/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Deno</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/fleek/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Fleek</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/flightcontrol/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Flightcontrol</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/flyio/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Fly.io</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/github/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">GitHub Pages</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/gitlab/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">GitLab Pages</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/google-cloud/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Google Cloud</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/google-firebase/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Google Firebase</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/heroku/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Heroku</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/kinsta/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Kinsta</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/microsoft-azure/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Microsoft Azure</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/netlify/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Netlify</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/railway/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Railway</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/render/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Render</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/sst/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">SST</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/stormkit/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Stormkit</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/surge/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Surge</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/vercel/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Vercel</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/zeabur/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Zeabur</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/deploy/zerops/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Zerops</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="19"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Content management systems</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/cms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">CMS overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/apostrophecms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">ApostropheCMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/builderio/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Builder.io</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/buttercms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">ButterCMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/caisy/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Caisy</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/cloudcannon/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">CloudCannon</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/contentful/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Contentful</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/cosmic/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Cosmic</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/craft-cms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Craft CMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/crystallize/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Crystallize</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/datocms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">DatoCMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/decap-cms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Decap CMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/directus/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Directus</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/drupal/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Drupal</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/flotiq/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Flotiq</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/frontmatter-cms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Front Matter CMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/ghost/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Ghost</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/gitcms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">GitCMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/hashnode/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Hashnode</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/hygraph/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Hygraph</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/keystatic/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Keystatic</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/keystonejs/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">KeystoneJS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/kontent-ai/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Kontent.ai</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/microcms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">microCMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/optimizely/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Optimizely CMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/payload/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Payload CMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/preprcms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Prepr CMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/prismic/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Prismic</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/sanity/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Sanity</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/sitecore/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Sitecore XM</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/sitepins/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Sitepins</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/spinal/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Spinal</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/statamic/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Statamic</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/storyblok/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Storyblok</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/strapi/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Strapi</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/studiocms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">StudioCMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/tina-cms/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Tina CMS</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/umbraco/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Umbraco</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/cms/wordpress/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Wordpress</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="20"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Backend services</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/backend/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Backend services overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/appwriteio/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Appwrite</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/google-firebase/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Firebase</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/neon/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Neon</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/prisma-postgres/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Prisma Postgres</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/sentry/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Sentry</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/supabase/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Supabase</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/turso/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Turso</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/backend/xata/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Xata</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<details class="astro-ug4msnsl">
						<sl-sidebar-restore data-index="21"></sl-sidebar-restore>
						<summary class="astro-ug4msnsl">
							<div class="group-label astro-ug4msnsl">
								<span class="large astro-ug4msnsl">Image and video hosting</span>
								
							</div>
							
	<svg aria-hidden="true" class="caret astro-ug4msnsl astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</summary>
						<ul class="astro-ug4msnsl">
	<li class="astro-ug4msnsl">
				<a href="/en/guides/media/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Media hosting overview</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/media/cloudinary/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Cloudinary</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/media/mux/" aria-current="false" class="astro-ug4msnsl">
						<span class="astro-ug4msnsl">Mux</span>
						
					</a>
			</li>
</ul>
					</details>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/ecommerce/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">E-commerce</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/authentication/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Authentication</span>
						
					</a>
			</li><li class="astro-ug4msnsl">
				<a href="/en/guides/testing/" aria-current="false" class="large astro-ug4msnsl">
						<span class="astro-ug4msnsl">Testing</span>
						
					</a>
			</li>
</ul>
				
</div>
	</div>
</tabbed-content>



<script type="module">class d extends HTMLElement{id=Math.floor(Math.random()*1e11).toString(32);count=0;TabStore=[];PanelStore=[];constructor(){super();const n=this.querySelectorAll(".panels > [id]"),s=this.querySelector(".tab-list"),t=s.querySelectorAll("a");s.setAttribute("role","tablist");let i=0;Array.prototype.forEach.call(t,(e,a)=>{e.setAttribute("role","tab"),e.setAttribute("id",this.id+"tab"+this.count++),e.setAttribute("tabindex","-1"),e.parentElement?.setAttribute("role","presentation"),this.TabStore[a]||this.TabStore.push(new Set),this.TabStore[a].add(e),"initial"in e.dataset&&e.dataset.initial!=="false"&&(i=a);const c=r=>{r.preventDefault();const o=s.querySelector("[aria-selected]");r.currentTarget!==o&&this.switchTab(r.currentTarget,a)};e.addEventListener("click",c),e.addEventListener("auxclick",c),e.addEventListener("keydown",r=>{const o=Array.prototype.indexOf.call(t,r.currentTarget),l=r.key==="ArrowLeft"?o-1:r.key==="ArrowRight"?o+1:r.key==="Home"?0:r.key==="End"?t.length-1:null;l!==null&&(r.preventDefault(),t[l]&&this.switchTab(t[l],l))})}),Array.prototype.forEach.call(n,(e,a)=>{e.setAttribute("role","tabpanel"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-labelledby",t[a].id),e.hidden=!0,this.PanelStore[a]||this.PanelStore.push(new Set),this.PanelStore[a].add(e)}),t[i].removeAttribute("tabindex"),t[i].setAttribute("aria-selected","true"),n[i].hidden=!1}switchTab(n,s){this.TabStore.forEach(t=>t.forEach(i=>{i.removeAttribute("aria-selected"),i.setAttribute("tabindex","-1")})),this.TabStore[s].forEach(t=>{t.removeAttribute("tabindex"),t.setAttribute("aria-selected","true")}),this.PanelStore.forEach(t=>t.forEach(i=>{i.hidden=!0})),this.PanelStore[s].forEach(t=>{t.hidden=!1}),n.focus()}}customElements.define("tabbed-content",d);</script>


	<script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script>
</sl-sidebar-state-persist>

<div class="md:sl-hidden astro-3x5efdbn">
	<div class="sl-flex astro-mkinwl4g">
	<div dir="ltr" lang="en" class="sponsors astro-kwmzlgva">
	<h2 class="sponsors-title astro-kwmzlgva">Sponsored by</h2>
	<a href="https://www.netlify.com/?utm_campaign=Astro-2024&utm_source=astro-referral" aria-label="Netlify" class="astro-kwmzlgva">
		<svg viewBox="0 0 256 105" width="96" aria-hidden="true" fill="currentColor" class="astro-kwmzlgva">
	<path fill="#32E6E2" d="M58.5 103.8V77.4l.5-.5h6.6l.6.5v26.4l-.6.5H59l-.5-.5Zm0-76.9V.5L59 0h6.6l.6.5V27l-.6.5H59l-.5-.5ZM35.8 85.2h-1l-4.4-4.5v-.9l8.5-8.5h4.7l.7.6v4.8l-8.5 8.5Zm-5.4-60.5v-.9l4.5-4.5h.9l8.5 8.5v4.8l-.7.6H39l-8.5-8.5ZM.5 48.3H38l.5.6v6.6l-.5.5H.5l-.5-.5v-6.6l.5-.6Zm255 0 .5.6v6.6l-.6.5h-37.8l-.6-.5 2.8-6.6.5-.6h35.1Z"></path>
	<path d="M74.7 65.9H68l-.6-.6V50c0-2.7-1-4.9-4.4-5-1.7 0-3.6 0-5.7.2l-.3.3v20l-.6.5H50l-.6-.6V39l.6-.6h14.8c5.7 0 10.4 4.7 10.4 10.5v16.4l-.5.6Zm31.9-11.6-.6.6H89l-.6.5c0 1.1 1.1 4.4 5.5 4.4 1.7 0 3.3-.5 3.9-1.6l.5-.6h6.6l.6.6c-.6 3.3-3.3 8.2-11.6 8.2-9.3 0-13.7-6.6-13.7-14.3S84.6 38 93.4 38s13.2 6.6 13.2 14.2v2.2ZM98.3 49c0-.6-.5-4.4-5-4.4s-4.9 3.8-4.9 4.4l.6.5h8.8l.5-.5Zm23.7 8.7c0 1.1.5 1.7 1.6 1.7h5l.5.5v5.5l-.6.6h-4.9c-5 0-9.3-2.2-9.3-8.3v-12l-.6-.6H110l-.6-.5V39l.6-.6h3.8l.6-.5v-5l.5-.5h6.6l.5.5v5l.6.5h6l.6.6v5.5l-.6.5h-6l-.6.6v12Zm20.3 8.3h-6.6l-.6-.6V28l.6-.6h6.6l.5.6v37.3l-.5.6ZM157 34h-6.6l-.5-.5V28l.5-.6h6.6l.6.6v5.5l-.6.5Zm0 31.9h-6.6l-.5-.6V39l.5-.6h6.6l.6.6v26.3l-.6.6Zm25.8-38v5.6l-.5.5h-5c-1 0-1.6.6-1.6 1.7v2.2l.5.5h5.5l.6.6v5.5l-.6.5h-5.5l-.5.6v19.7l-.6.6h-6.5l-.6-.6V45.5l-.5-.5h-3.9l-.5-.5V39l.5-.6h3.9l.5-.5v-2.2c0-6 4.4-8.3 9.4-8.3h4.9l.5.6Zm20.3 38.5c-2.2 5.5-4.3 8.8-12 8.8h-2.8l-.5-.5v-5.5l.5-.6h2.8c2.7 0 3.3-.5 3.8-2.2V66l-8.8-21.4V39l.6-.6h5l.5.6 6.5 18.7h.6L206 39l.5-.6h5l.5.6v5.5l-8.8 22Z"></path>
</svg>
	</a>

	<a href="https://firebase.studio/?utm_source=astro&utm_medium=astro&utm_campaign=astro" aria-label="Firebase Studio" class="astro-kwmzlgva">
		
		<svg xmlns="http://www.w3.org/2000/svg" width="155" viewBox="0 0 322 65" class="astro-kwmzlgva">
			<path fill="#FFC400" d="M31.39 24.27c.4.03.95.18 1.6.28l6.58 4.25-21.52 12.8a12.27 12.27 0 0 1-4.05.72l-8.27-9.85 17.35-6.74c1.77-.66 3.31-1 4.44-1.18 1.26-.21 2.5-.4 3.87-.27h-.01Z" class="astro-kwmzlgva"></path>
			<path fill="url(#fbs-gradient-a-61356)" d="M30.99 7.92a14.8 14.8 0 0 0-.5-1.73 12.76 12.76 0 0 0-3.02-4.9c-.34-.34-.8-.75-1.38-1.17a60.17 60.17 0 0 1-5.76 6.05C16.73 9.45 10.84 14 7.06 17.42c-.66.6-2 1.94-3.2 3.98v.01c-.22.38-.49.86-.77 1.44l-.13.28-.35.8a15.19 15.19 0 0 0-1.24 4.5 12.85 12.85 0 0 0 .27 4.19 13.5 13.5 0 0 0 4.46 7.05 12 12 0 0 0 7.9 2.65v-.02c-.14-.48-.3-1.17-.37-2.02a12.7 12.7 0 0 1 1.14-6.25c.36-.84 1.23-2.81 3.1-4.6.87-.84 1.81-1.52 2.75-2.13 1.01-.67 1.9-1.18 2.4-1.53.02-.01-.01 0 0 0l.07-.05a20.71 20.71 0 0 0 7.08-9.04c.21-.56.38-1.11.38-1.11.57-1.78 1.13-4.53.44-7.66Z" class="astro-kwmzlgva"></path>
			<path fill="#FF9100" d="M14 42.33a12 12 0 0 1-7.9-2.66A13.29 13.29 0 0 1 1.5 32a13.32 13.32 0 0 1 1.1-8.06c.44-1.08.9-1.94 1.25-2.53a7.97 7.97 0 0 0 3.62 4.31c.37.24 2.1 1.35 4.71 1.93a14.13 14.13 0 0 0 10.89-1.92c-.5.36-1.44.9-2.46 1.57-.93.61-1.87 1.29-2.74 2.13a13.73 13.73 0 0 0-3.1 4.6 12.7 12.7 0 0 0-1.14 6.26c.07.86.23 1.56.36 2.03Z" class="astro-kwmzlgva"></path>
			<path fill="url(#fbs-gradient-b-61356)" d="M42.05 41.41a14.89 14.89 0 0 0 1.13-3.25 12.25 12.25 0 0 0 .12-4.58c-.53-2.89-2.74-5.23-2.97-5.47 0 0-1.5-1.54-3.7-2.6-.32-.16-.87-.43-1.65-.67a19.01 19.01 0 0 0-3.6-.58c.09.02.22.03.37.07.36.09.62.21.81.31.19.09.47.23.77.5a2.32 2.32 0 0 1 .81 1.26c.27 1.09-.4 2.11-.64 2.48-1.72 2.64-11.06 8.13-16.59 13.83a14.7 14.7 0 0 0-3.15 4.45 14.15 14.15 0 0 0-.93 8.17 14.38 14.38 0 0 0 5.76 8.8 96.15 96.15 0 0 1 6.88-6.97c4.49-4.08 10.33-8.6 10.33-8.6s4.49-3.63 6.24-7.15Z" class="astro-kwmzlgva"></path>
			<path fill="currentColor" d="M60.04 17.72h17.5v4.3h-13v8.3h11.71v4.26h-11.7v11.95h-4.51v-28.8ZM82.4 23.2c-.82 0-1.54-.29-2.13-.85a2.98 2.98 0 0 1-.84-2.13c0-.84.28-1.53.84-2.1a2.9 2.9 0 0 1 2.14-.88c.83 0 1.53.3 2.09.88.59.57.88 1.26.88 2.1a2.94 2.94 0 0 1-2.98 2.97Zm-2.2 3.37h4.42v19.96h-4.43V26.57Zm8.52 0h4.19v2.98h.24A5.41 5.41 0 0 1 95.48 27a6.5 6.5 0 0 1 3.46-1.04 6 6 0 0 1 2.37.4V31a6.74 6.74 0 0 0-3.05-.69 4.7 4.7 0 0 0-3.66 1.7 5.94 5.94 0 0 0-1.45 4.06v10.46h-4.43V26.57Zm22.58 20.6c-1.96 0-3.73-.46-5.3-1.37a9.73 9.73 0 0 1-3.67-3.78 11.31 11.31 0 0 1-1.33-5.47c0-1.93.42-3.7 1.25-5.31a9.75 9.75 0 0 1 8.81-5.31c2.01 0 3.75.44 5.23 1.33a8.61 8.61 0 0 1 3.42 3.7 11.9 11.9 0 0 1 1.09 6.51h-15.37a5.8 5.8 0 0 0 1.97 4.23 6.08 6.08 0 0 0 4.02 1.49c2.3 0 4.08-1.08 5.31-3.22l3.78 1.8a10.45 10.45 0 0 1-3.7 3.95 10.17 10.17 0 0 1-5.5 1.45Zm5.07-13.08a4.86 4.86 0 0 0-.64-1.97 4.49 4.49 0 0 0-1.77-1.69 5.48 5.48 0 0 0-2.94-.72c-1.31 0-2.45.4-3.42 1.2a6.14 6.14 0 0 0-1.93 3.18h10.7Zm18 13.08a8 8 0 0 1-3.9-.93 6.5 6.5 0 0 1-2.53-2.33h-.24v2.62h-4.19v-28.8h4.43v8.64l-.24 2.78h.24a6.62 6.62 0 0 1 2.53-2.3 8.14 8.14 0 0 1 3.9-.92c1.72 0 3.3.45 4.75 1.37a9.66 9.66 0 0 1 3.5 3.82c.89 1.6 1.33 3.42 1.33 5.43s-.44 3.82-1.33 5.43a10.03 10.03 0 0 1-3.5 3.82 8.73 8.73 0 0 1-4.75 1.37Zm-.76-4.06a5.79 5.79 0 0 0 5.07-3.1c.56-1.02.84-2.17.84-3.46a6.8 6.8 0 0 0-.84-3.42 5.73 5.73 0 0 0-8-2.33c-.9.53-1.62 1.3-2.18 2.29-.54 1-.8 2.14-.8 3.46 0 1.31.26 2.47.8 3.46a5.7 5.7 0 0 0 5.1 3.1Zm19.73 4.06c-1.42 0-2.7-.28-3.86-.85a7.11 7.11 0 0 1-2.7-2.4 6.62 6.62 0 0 1-.96-3.55c0-2.1.78-3.74 2.33-4.95a9.6 9.6 0 0 1 6-1.8c2.12 0 3.93.35 5.43 1.08v-.85c0-1.2-.49-2.2-1.45-2.97a5.08 5.08 0 0 0-3.42-1.21c-2.04 0-3.67.83-4.9 2.5l-3.39-2.34a9.38 9.38 0 0 1 3.5-2.9c1.43-.67 3.02-1 4.79-1 2.92 0 5.18.74 6.76 2.21 1.6 1.45 2.41 3.5 2.41 6.16v12.23h-4.3v-2.46h-.24a7.92 7.92 0 0 1-2.46 2.25c-.99.57-2.17.85-3.54.85Zm.73-3.66c.99 0 1.9-.24 2.73-.73a5.68 5.68 0 0 0 2.01-1.97 5 5 0 0 0 .77-2.65 9.33 9.33 0 0 0-4.55-1.17 5.5 5.5 0 0 0-3.46.97 2.98 2.98 0 0 0-.16 4.7 4.3 4.3 0 0 0 2.66.85Zm20.44 3.66a9.7 9.7 0 0 1-5.67-1.57 8.8 8.8 0 0 1-3.14-4.02l3.95-1.7a5.31 5.31 0 0 0 1.97 2.5 5.3 5.3 0 0 0 2.9.85c1.1 0 2-.2 2.69-.6.7-.44 1.04-.99 1.04-1.66 0-.64-.28-1.16-.84-1.56a7.92 7.92 0 0 0-2.78-1.13l-2.73-.65a8.96 8.96 0 0 1-3.9-1.93 4.8 4.8 0 0 1-1.61-3.74c0-1.85.76-3.31 2.29-4.38a9.39 9.39 0 0 1 5.63-1.65c1.85 0 3.49.39 4.91 1.16 1.45.78 2.5 1.9 3.14 3.38l-3.9 1.65a3.75 3.75 0 0 0-1.74-1.85c-.77-.4-1.62-.6-2.53-.6-.88 0-1.66.2-2.33.6-.67.38-1 .89-1 1.53 0 .57.22 1.02.68 1.37.48.35 1.23.64 2.25.88l2.98.73c2 .5 3.5 1.29 4.5 2.33a5.1 5.1 0 0 1 1.49 3.7 5.2 5.2 0 0 1-1.09 3.22 7.1 7.1 0 0 1-2.93 2.3c-1.24.56-2.65.84-4.23.84Zm20.42 0c-1.96 0-3.73-.46-5.31-1.37a9.73 9.73 0 0 1-3.66-3.78 11.31 11.31 0 0 1-1.33-5.47c0-1.93.41-3.7 1.24-5.31a9.76 9.76 0 0 1 8.81-5.31 9.9 9.9 0 0 1 5.23 1.33 8.61 8.61 0 0 1 3.42 3.7 11.91 11.91 0 0 1 1.09 6.51h-15.37a5.8 5.8 0 0 0 1.97 4.23 6.08 6.08 0 0 0 4.03 1.49c2.3 0 4.07-1.08 5.3-3.22l3.79 1.8a10.45 10.45 0 0 1-3.7 3.95c-1.56.97-3.4 1.45-5.51 1.45Zm5.06-13.08a4.88 4.88 0 0 0-.64-1.97 4.5 4.5 0 0 0-1.77-1.69 5.48 5.48 0 0 0-2.94-.72c-1.31 0-2.45.4-3.41 1.2a6.13 6.13 0 0 0-1.94 3.18H200Zm24.71 13.08c-1.45 0-2.86-.3-4.23-.89a11.03 11.03 0 0 1-3.58-2.65 10.78 10.78 0 0 1-2.21-4.27l3.26-1.32a8.4 8.4 0 0 0 2.53 4.22 6.27 6.27 0 0 0 4.3 1.65 6.8 6.8 0 0 0 4.27-1.33 4.47 4.47 0 0 0 1.73-3.7c0-1.34-.5-2.44-1.49-3.3-.97-.88-2.56-1.7-4.79-2.45l-1.8-.64a14.42 14.42 0 0 1-5-2.86c-1.28-1.18-1.93-2.82-1.93-4.9a6.8 6.8 0 0 1 1.13-3.79 8.07 8.07 0 0 1 3.1-2.82 9.62 9.62 0 0 1 4.5-1.04c1.67 0 3.11.3 4.35.92a8.71 8.71 0 0 1 4.5 4.87l-3.17 1.37a5.55 5.55 0 0 0-5.6-3.9 5.9 5.9 0 0 0-3.78 1.24 3.85 3.85 0 0 0-1.57 3.14c0 1.13.45 2.05 1.33 2.78.89.7 2.23 1.35 4.02 1.97l1.85.64c2.45.89 4.35 2 5.72 3.34 1.4 1.32 2.09 3.11 2.09 5.4 0 1.84-.48 3.4-1.45 4.66a8.29 8.29 0 0 1-3.58 2.77c-1.45.6-2.95.89-4.5.89Zm19.63-.32c-.8 0-1.55-.14-2.25-.4a5.41 5.41 0 0 1-1.73-1.1 4.95 4.95 0 0 1-1.2-1.76 7.5 7.5 0 0 1-.37-2.46V29.67h-3.54v-3.1h3.54v-5.95h3.38v5.95h4.91v3.1h-4.9v10.62c0 1.13.22 1.96.68 2.5.45.58 1.15.88 2.09.88a4.1 4.1 0 0 0 2.17-.56v3.3a7.64 7.64 0 0 1-2.78.44Zm13.3.32c-2.47 0-4.35-.71-5.64-2.13-1.26-1.42-1.89-3.4-1.89-5.92V26.57h3.42v11.99c0 3.67 1.65 5.51 4.95 5.51 1.1 0 2.08-.3 2.94-.92a5.88 5.88 0 0 0 2-2.42c.5-.99.73-2.04.73-3.14V26.57h3.38v19.96h-3.22v-2.98h-.16a7.14 7.14 0 0 1-2.7 2.57 7.38 7.38 0 0 1-3.81 1.05Zm22.27 0c-1.71 0-3.3-.46-4.74-1.37a9.83 9.83 0 0 1-3.46-3.78 11.6 11.6 0 0 1-1.29-5.47c0-2.01.43-3.82 1.29-5.43a9.76 9.76 0 0 1 3.46-3.82 8.74 8.74 0 0 1 4.74-1.37c1.56 0 2.96.35 4.19 1.04a7.1 7.1 0 0 1 2.78 2.54h.16l-.16-2.74v-9.05h3.37v28.8h-3.21v-2.97h-.16a7.28 7.28 0 0 1-2.78 2.61c-1.23.67-2.63 1-4.19 1Zm.53-3.1a6.26 6.26 0 0 0 5.67-3.54c.62-1.15.93-2.48.93-3.98a8.1 8.1 0 0 0-.93-3.98 6.18 6.18 0 0 0-2.41-2.62 6.25 6.25 0 0 0-6.56 0 6.7 6.7 0 0 0-2.41 2.66 8.38 8.38 0 0 0-.89 3.94c0 1.5.3 2.83.89 3.98a6.9 6.9 0 0 0 2.41 2.62c1.02.61 2.12.92 3.3.92Zm16.04-21.68c-.67 0-1.24-.24-1.73-.73a2.36 2.36 0 0 1-.72-1.73c0-.67.24-1.24.72-1.73a2.36 2.36 0 0 1 1.73-.72c.67 0 1.25.24 1.73.72.49.49.73 1.06.73 1.73 0 .67-.24 1.25-.73 1.73-.45.49-1.03.73-1.73.73Zm-1.69 4.18h3.38v19.96h-3.38V26.57Zm16.77 20.6c-1.96 0-3.72-.46-5.27-1.37a10.03 10.03 0 0 1-3.66-3.82 11.51 11.51 0 0 1-1.29-5.43c0-1.99.43-3.78 1.29-5.4a10 10 0 0 1 8.93-5.23 10 10 0 0 1 8.93 5.24 11 11 0 0 1 1.33 5.39c0 1.98-.44 3.8-1.33 5.43a9.65 9.65 0 0 1-3.66 3.82 10.23 10.23 0 0 1-5.27 1.37Zm0-3.1a6.69 6.69 0 0 0 5.87-3.54c.65-1.15.97-2.48.97-3.98a7.8 7.8 0 0 0-.97-3.94 6.62 6.62 0 0 0-5.87-3.58c-1.18 0-2.3.3-3.34.92a6.9 6.9 0 0 0-2.53 2.66 8.08 8.08 0 0 0-.93 3.94c0 1.5.3 2.83.93 3.98.64 1.13 1.48 2 2.53 2.62 1.05.61 2.16.92 3.34.92Z" class="astro-kwmzlgva"></path>
			<defs class="astro-kwmzlgva">
				<linearGradient id="fbs-gradient-a-61356" x1="5" x2="26.68" y1="37.44" y2=".98" gradientUnits="userSpaceOnUse" class="astro-kwmzlgva">
					<stop stop-color="#F8682F" class="astro-kwmzlgva"></stop>
					<stop offset="1" stop-color="#DD2C00" class="astro-kwmzlgva"></stop>
				</linearGradient>
				<linearGradient id="fbs-gradient-b-61356" x1="25.29" x2="22.81" y1="27.27" y2="70.76" gradientUnits="userSpaceOnUse" class="astro-kwmzlgva">
					<stop stop-color="#F8682F" class="astro-kwmzlgva"></stop>
					<stop offset=".57" stop-color="#E92A4E" class="astro-kwmzlgva"></stop>
					<stop offset="1" stop-color="#C447FF" class="astro-kwmzlgva"></stop>
				</linearGradient>
			</defs>
		</svg>
	</a>

	<a href="https://sentry.io/welcome/?utm_medium=partner&utm_source=astro&utm_campaign=astro-docs" aria-label="Sentry" class="astro-kwmzlgva">
		<svg viewBox="0 0 200 44" width="96" aria-hidden="true" class="astro-kwmzlgva">
	<path d="M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z M124.32,28.28,109.56,9.22h-3.68V34.77h3.73V15.19l15.18,19.58h3.26V9.22h-3.73ZM87.15,23.54h13.23V20.22H87.14V12.53h14.93V9.21H83.34V34.77h18.92V31.45H87.14ZM71.59,20.3h0C66.44,19.06,65,18.08,65,15.7c0-2.14,1.89-3.59,4.71-3.59a12.06,12.06,0,0,1,7.07,2.55l2-2.83a14.1,14.1,0,0,0-9-3c-5.06,0-8.59,3-8.59,7.27,0,4.6,3,6.19,8.46,7.52C74.51,24.74,76,25.78,76,28.11s-2,3.77-5.09,3.77a12.34,12.34,0,0,1-8.3-3.26l-2.25,2.69a15.94,15.94,0,0,0,10.42,3.85c5.48,0,9-2.95,9-7.51C79.75,23.79,77.47,21.72,71.59,20.3ZM195.7,9.22l-7.69,12-7.64-12h-4.46L186,24.67V34.78h3.84V24.55L200,9.22Zm-64.63,3.46h8.37v22.1h3.84V12.68h8.37V9.22H131.08ZM169.41,24.8c3.86-1.07,6-3.77,6-7.63,0-4.91-3.59-8-9.38-8H154.67V34.76h3.8V25.58h6.45l6.48,9.2h4.44l-7-9.82Zm-10.95-2.5V12.6h7.17c3.74,0,5.88,1.77,5.88,4.84s-2.29,4.86-5.84,4.86Z" fill="currentColor"></path>
</svg>
	</a>

	<a href="https://www.mux.com/?utm_campaign=21819274-Astro&utm_source=astro" aria-label="Mux" class="astro-kwmzlgva">
		<svg viewBox="0 0 77 24" height="15" fill="currentColor" aria-hidden="true" class="astro-kwmzlgva">
	<path d="M47.73 0a2.98 2.98 0 0 0-2.97 3v9c0 3.31-2.67 6-5.94 6a5.97 5.97 0 0 1-5.94-6V3c0-1.66-1.33-3-2.97-3a2.98 2.98 0 0 0-2.97 3v9c0 6.62 5.33 12 11.88 12 6.55 0 11.88-5.38 11.88-12V3c.01-1.66-1.32-3-2.97-3zm13.19 12-6.81 6.88a3.02 3.02 0 0 0 0 4.24 2.95 2.95 0 0 0 4.2 0l6.81-6.88 6.81 6.88a2.95 2.95 0 0 0 4.2 0 3.02 3.02 0 0 0 0-4.24L69.32 12l6.81-6.88a3.02 3.02 0 0 0 0-4.24 2.95 2.95 0 0 0-4.2 0l-6.81 6.88L58.3.88a2.95 2.95 0 0 0-4.2 0 3.02 3.02 0 0 0 0 4.24L60.92 12zM21.93.23a2.96 2.96 0 0 0-3.24.65l-6.81 6.88L5.07.88A2.94 2.94 0 0 0 1.83.23 3 3 0 0 0 0 3v18c0 1.66 1.33 3 2.97 3s2.97-1.34 2.97-3V10.24l3.84 3.88a2.95 2.95 0 0 0 4.2 0l3.84-3.88V21c0 1.66 1.33 3 2.97 3s2.97-1.34 2.97-3V3A2.98 2.98 0 0 0 21.93.23z"></path>
</svg>
	</a>
</div>
	<div class="mobile-preferences sl-flex astro-4pp45uhr">
	<div class="social-icons astro-4pp45uhr">
		<a href="https://github.com/withastro/astro" rel="me" class="sl-flex astro-tpebbyzj">
					<span class="sr-only astro-tpebbyzj">GitHub</span>
					
	<svg aria-hidden="true" class="astro-tpebbyzj astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



				</a><a href="https://astro.build/chat" rel="me" class="sl-flex astro-tpebbyzj">
					<span class="sr-only astro-tpebbyzj">Discord</span>
					
	<svg aria-hidden="true" class="astro-tpebbyzj astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M20.32 4.37a19.8 19.8 0 0 0-4.93-1.51 13.78 13.78 0 0 0-.64 1.28 18.27 18.27 0 0 0-5.5 0 12.64 12.64 0 0 0-.64-1.28h-.05A19.74 19.74 0 0 0 3.64 4.4 20.26 20.26 0 0 0 .11 18.09l.02.02a19.9 19.9 0 0 0 6.04 3.03l.04-.02a14.24 14.24 0 0 0 1.23-2.03.08.08 0 0 0-.05-.07 13.1 13.1 0 0 1-1.9-.92.08.08 0 0 1 .02-.1 10.2 10.2 0 0 0 .41-.31h.04a14.2 14.2 0 0 0 12.1 0l.04.01a9.63 9.63 0 0 0 .4.32.08.08 0 0 1-.03.1 12.29 12.29 0 0 1-1.9.91.08.08 0 0 0-.02.1 15.97 15.97 0 0 0 1.27 2.01h.04a19.84 19.84 0 0 0 6.03-3.05v-.03a20.12 20.12 0 0 0-3.57-13.69ZM8.02 15.33c-1.18 0-2.16-1.08-2.16-2.42 0-1.33.96-2.42 2.16-2.42 1.21 0 2.18 1.1 2.16 2.42 0 1.34-.96 2.42-2.16 2.42Zm7.97 0c-1.18 0-2.15-1.08-2.15-2.42 0-1.33.95-2.42 2.15-2.42 1.22 0 2.18 1.1 2.16 2.42 0 1.34-.94 2.42-2.16 2.42Z"/></svg>



				</a>


	</div>
	<starlight-theme-select>
	
	<label style="--sl-select-width: 6.25em" class="astro-5trz26bn">
	<span class="sr-only astro-5trz26bn">Select theme</span>
	
	<svg aria-hidden="true" class="icon label-icon astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg>



	<select value="auto" autocomplete="off" class="astro-5trz26bn">
		<option value="dark" class="astro-5trz26bn">Dark</option><option value="light" class="astro-5trz26bn">Light</option><option value="auto" selected class="astro-5trz26bn">Auto</option>
	</select>
	
	<svg aria-hidden="true" class="icon caret astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>



</label>
</starlight-theme-select>


<script>
	StarlightThemeProvider.updatePickers();
</script>


	<starlight-lang-select>
			<label style="--sl-select-width: 7em" class="astro-5trz26bn">
	<span class="sr-only astro-5trz26bn">Select language</span>
	
	<svg aria-hidden="true" class="icon label-icon astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path fill-rule="evenodd" d="M8.516 3a.94.94 0 0 0-.941.94v1.15H2.94a.94.94 0 1 0 0 1.882h7.362a7.422 7.422 0 0 1-1.787 3.958 7.42 7.42 0 0 1-1.422-2.425.94.94 0 1 0-1.774.627 9.303 9.303 0 0 0 1.785 3.043 7.422 7.422 0 0 1-4.164 1.278.94.94 0 1 0 0 1.881 9.303 9.303 0 0 0 5.575-1.855 9.303 9.303 0 0 0 4.11 1.74l-.763 1.525a.968.968 0 0 0-.016.034l-1.385 2.77a.94.94 0 1 0 1.683.841l1.133-2.267h5.806l1.134 2.267a.94.94 0 0 0 1.683-.841l-1.385-2.769a.95.95 0 0 0-.018-.036l-3.476-6.951a.94.94 0 0 0-1.682 0l-1.82 3.639a7.423 7.423 0 0 1-3.593-1.256 9.303 9.303 0 0 0 2.27-5.203h1.894a.94.94 0 0 0 0-1.881H9.456V3.94A.94.94 0 0 0 8.516 3Zm6.426 11.794a1.068 1.068 0 0 1-.02.039l-.703 1.407h3.924l-1.962-3.924-1.24 2.478Z" clip-rule="evenodd"/></svg>



	<select value="/en/guides/upgrade-to/v5/" autocomplete="off" class="astro-5trz26bn">
		<option value="/en/guides/upgrade-to/v5/" selected class="astro-5trz26bn">English</option><option value="/zh-cn/guides/upgrade-to/v5/" class="astro-5trz26bn">简体中文</option>
	</select>
	
	<svg aria-hidden="true" class="icon caret astro-5trz26bn astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg>



</label>
		</starlight-lang-select>


</div>
</div>
</div>

<div class="desktop-footer sl-hidden md:sl-block astro-3x5efdbn">
	<div dir="ltr" lang="en" class="sponsors astro-kwmzlgva">
	<h2 class="sponsors-title astro-kwmzlgva">Sponsored by</h2>
	<a href="https://www.netlify.com/?utm_campaign=Astro-2024&utm_source=astro-referral" aria-label="Netlify" class="astro-kwmzlgva">
		<svg viewBox="0 0 256 105" width="96" aria-hidden="true" fill="currentColor" class="astro-kwmzlgva">
	<path fill="#32E6E2" d="M58.5 103.8V77.4l.5-.5h6.6l.6.5v26.4l-.6.5H59l-.5-.5Zm0-76.9V.5L59 0h6.6l.6.5V27l-.6.5H59l-.5-.5ZM35.8 85.2h-1l-4.4-4.5v-.9l8.5-8.5h4.7l.7.6v4.8l-8.5 8.5Zm-5.4-60.5v-.9l4.5-4.5h.9l8.5 8.5v4.8l-.7.6H39l-8.5-8.5ZM.5 48.3H38l.5.6v6.6l-.5.5H.5l-.5-.5v-6.6l.5-.6Zm255 0 .5.6v6.6l-.6.5h-37.8l-.6-.5 2.8-6.6.5-.6h35.1Z"></path>
	<path d="M74.7 65.9H68l-.6-.6V50c0-2.7-1-4.9-4.4-5-1.7 0-3.6 0-5.7.2l-.3.3v20l-.6.5H50l-.6-.6V39l.6-.6h14.8c5.7 0 10.4 4.7 10.4 10.5v16.4l-.5.6Zm31.9-11.6-.6.6H89l-.6.5c0 1.1 1.1 4.4 5.5 4.4 1.7 0 3.3-.5 3.9-1.6l.5-.6h6.6l.6.6c-.6 3.3-3.3 8.2-11.6 8.2-9.3 0-13.7-6.6-13.7-14.3S84.6 38 93.4 38s13.2 6.6 13.2 14.2v2.2ZM98.3 49c0-.6-.5-4.4-5-4.4s-4.9 3.8-4.9 4.4l.6.5h8.8l.5-.5Zm23.7 8.7c0 1.1.5 1.7 1.6 1.7h5l.5.5v5.5l-.6.6h-4.9c-5 0-9.3-2.2-9.3-8.3v-12l-.6-.6H110l-.6-.5V39l.6-.6h3.8l.6-.5v-5l.5-.5h6.6l.5.5v5l.6.5h6l.6.6v5.5l-.6.5h-6l-.6.6v12Zm20.3 8.3h-6.6l-.6-.6V28l.6-.6h6.6l.5.6v37.3l-.5.6ZM157 34h-6.6l-.5-.5V28l.5-.6h6.6l.6.6v5.5l-.6.5Zm0 31.9h-6.6l-.5-.6V39l.5-.6h6.6l.6.6v26.3l-.6.6Zm25.8-38v5.6l-.5.5h-5c-1 0-1.6.6-1.6 1.7v2.2l.5.5h5.5l.6.6v5.5l-.6.5h-5.5l-.5.6v19.7l-.6.6h-6.5l-.6-.6V45.5l-.5-.5h-3.9l-.5-.5V39l.5-.6h3.9l.5-.5v-2.2c0-6 4.4-8.3 9.4-8.3h4.9l.5.6Zm20.3 38.5c-2.2 5.5-4.3 8.8-12 8.8h-2.8l-.5-.5v-5.5l.5-.6h2.8c2.7 0 3.3-.5 3.8-2.2V66l-8.8-21.4V39l.6-.6h5l.5.6 6.5 18.7h.6L206 39l.5-.6h5l.5.6v5.5l-8.8 22Z"></path>
</svg>
	</a>

	<a href="https://firebase.studio/?utm_source=astro&utm_medium=astro&utm_campaign=astro" aria-label="Firebase Studio" class="astro-kwmzlgva">
		
		<svg xmlns="http://www.w3.org/2000/svg" width="155" viewBox="0 0 322 65" class="astro-kwmzlgva">
			<path fill="#FFC400" d="M31.39 24.27c.4.03.95.18 1.6.28l6.58 4.25-21.52 12.8a12.27 12.27 0 0 1-4.05.72l-8.27-9.85 17.35-6.74c1.77-.66 3.31-1 4.44-1.18 1.26-.21 2.5-.4 3.87-.27h-.01Z" class="astro-kwmzlgva"></path>
			<path fill="url(#fbs-gradient-a-20003)" d="M30.99 7.92a14.8 14.8 0 0 0-.5-1.73 12.76 12.76 0 0 0-3.02-4.9c-.34-.34-.8-.75-1.38-1.17a60.17 60.17 0 0 1-5.76 6.05C16.73 9.45 10.84 14 7.06 17.42c-.66.6-2 1.94-3.2 3.98v.01c-.22.38-.49.86-.77 1.44l-.13.28-.35.8a15.19 15.19 0 0 0-1.24 4.5 12.85 12.85 0 0 0 .27 4.19 13.5 13.5 0 0 0 4.46 7.05 12 12 0 0 0 7.9 2.65v-.02c-.14-.48-.3-1.17-.37-2.02a12.7 12.7 0 0 1 1.14-6.25c.36-.84 1.23-2.81 3.1-4.6.87-.84 1.81-1.52 2.75-2.13 1.01-.67 1.9-1.18 2.4-1.53.02-.01-.01 0 0 0l.07-.05a20.71 20.71 0 0 0 7.08-9.04c.21-.56.38-1.11.38-1.11.57-1.78 1.13-4.53.44-7.66Z" class="astro-kwmzlgva"></path>
			<path fill="#FF9100" d="M14 42.33a12 12 0 0 1-7.9-2.66A13.29 13.29 0 0 1 1.5 32a13.32 13.32 0 0 1 1.1-8.06c.44-1.08.9-1.94 1.25-2.53a7.97 7.97 0 0 0 3.62 4.31c.37.24 2.1 1.35 4.71 1.93a14.13 14.13 0 0 0 10.89-1.92c-.5.36-1.44.9-2.46 1.57-.93.61-1.87 1.29-2.74 2.13a13.73 13.73 0 0 0-3.1 4.6 12.7 12.7 0 0 0-1.14 6.26c.07.86.23 1.56.36 2.03Z" class="astro-kwmzlgva"></path>
			<path fill="url(#fbs-gradient-b-20003)" d="M42.05 41.41a14.89 14.89 0 0 0 1.13-3.25 12.25 12.25 0 0 0 .12-4.58c-.53-2.89-2.74-5.23-2.97-5.47 0 0-1.5-1.54-3.7-2.6-.32-.16-.87-.43-1.65-.67a19.01 19.01 0 0 0-3.6-.58c.09.02.22.03.37.07.36.09.62.21.81.31.19.09.47.23.77.5a2.32 2.32 0 0 1 .81 1.26c.27 1.09-.4 2.11-.64 2.48-1.72 2.64-11.06 8.13-16.59 13.83a14.7 14.7 0 0 0-3.15 4.45 14.15 14.15 0 0 0-.93 8.17 14.38 14.38 0 0 0 5.76 8.8 96.15 96.15 0 0 1 6.88-6.97c4.49-4.08 10.33-8.6 10.33-8.6s4.49-3.63 6.24-7.15Z" class="astro-kwmzlgva"></path>
			<path fill="currentColor" d="M60.04 17.72h17.5v4.3h-13v8.3h11.71v4.26h-11.7v11.95h-4.51v-28.8ZM82.4 23.2c-.82 0-1.54-.29-2.13-.85a2.98 2.98 0 0 1-.84-2.13c0-.84.28-1.53.84-2.1a2.9 2.9 0 0 1 2.14-.88c.83 0 1.53.3 2.09.88.59.57.88 1.26.88 2.1a2.94 2.94 0 0 1-2.98 2.97Zm-2.2 3.37h4.42v19.96h-4.43V26.57Zm8.52 0h4.19v2.98h.24A5.41 5.41 0 0 1 95.48 27a6.5 6.5 0 0 1 3.46-1.04 6 6 0 0 1 2.37.4V31a6.74 6.74 0 0 0-3.05-.69 4.7 4.7 0 0 0-3.66 1.7 5.94 5.94 0 0 0-1.45 4.06v10.46h-4.43V26.57Zm22.58 20.6c-1.96 0-3.73-.46-5.3-1.37a9.73 9.73 0 0 1-3.67-3.78 11.31 11.31 0 0 1-1.33-5.47c0-1.93.42-3.7 1.25-5.31a9.75 9.75 0 0 1 8.81-5.31c2.01 0 3.75.44 5.23 1.33a8.61 8.61 0 0 1 3.42 3.7 11.9 11.9 0 0 1 1.09 6.51h-15.37a5.8 5.8 0 0 0 1.97 4.23 6.08 6.08 0 0 0 4.02 1.49c2.3 0 4.08-1.08 5.31-3.22l3.78 1.8a10.45 10.45 0 0 1-3.7 3.95 10.17 10.17 0 0 1-5.5 1.45Zm5.07-13.08a4.86 4.86 0 0 0-.64-1.97 4.49 4.49 0 0 0-1.77-1.69 5.48 5.48 0 0 0-2.94-.72c-1.31 0-2.45.4-3.42 1.2a6.14 6.14 0 0 0-1.93 3.18h10.7Zm18 13.08a8 8 0 0 1-3.9-.93 6.5 6.5 0 0 1-2.53-2.33h-.24v2.62h-4.19v-28.8h4.43v8.64l-.24 2.78h.24a6.62 6.62 0 0 1 2.53-2.3 8.14 8.14 0 0 1 3.9-.92c1.72 0 3.3.45 4.75 1.37a9.66 9.66 0 0 1 3.5 3.82c.89 1.6 1.33 3.42 1.33 5.43s-.44 3.82-1.33 5.43a10.03 10.03 0 0 1-3.5 3.82 8.73 8.73 0 0 1-4.75 1.37Zm-.76-4.06a5.79 5.79 0 0 0 5.07-3.1c.56-1.02.84-2.17.84-3.46a6.8 6.8 0 0 0-.84-3.42 5.73 5.73 0 0 0-8-2.33c-.9.53-1.62 1.3-2.18 2.29-.54 1-.8 2.14-.8 3.46 0 1.31.26 2.47.8 3.46a5.7 5.7 0 0 0 5.1 3.1Zm19.73 4.06c-1.42 0-2.7-.28-3.86-.85a7.11 7.11 0 0 1-2.7-2.4 6.62 6.62 0 0 1-.96-3.55c0-2.1.78-3.74 2.33-4.95a9.6 9.6 0 0 1 6-1.8c2.12 0 3.93.35 5.43 1.08v-.85c0-1.2-.49-2.2-1.45-2.97a5.08 5.08 0 0 0-3.42-1.21c-2.04 0-3.67.83-4.9 2.5l-3.39-2.34a9.38 9.38 0 0 1 3.5-2.9c1.43-.67 3.02-1 4.79-1 2.92 0 5.18.74 6.76 2.21 1.6 1.45 2.41 3.5 2.41 6.16v12.23h-4.3v-2.46h-.24a7.92 7.92 0 0 1-2.46 2.25c-.99.57-2.17.85-3.54.85Zm.73-3.66c.99 0 1.9-.24 2.73-.73a5.68 5.68 0 0 0 2.01-1.97 5 5 0 0 0 .77-2.65 9.33 9.33 0 0 0-4.55-1.17 5.5 5.5 0 0 0-3.46.97 2.98 2.98 0 0 0-.16 4.7 4.3 4.3 0 0 0 2.66.85Zm20.44 3.66a9.7 9.7 0 0 1-5.67-1.57 8.8 8.8 0 0 1-3.14-4.02l3.95-1.7a5.31 5.31 0 0 0 1.97 2.5 5.3 5.3 0 0 0 2.9.85c1.1 0 2-.2 2.69-.6.7-.44 1.04-.99 1.04-1.66 0-.64-.28-1.16-.84-1.56a7.92 7.92 0 0 0-2.78-1.13l-2.73-.65a8.96 8.96 0 0 1-3.9-1.93 4.8 4.8 0 0 1-1.61-3.74c0-1.85.76-3.31 2.29-4.38a9.39 9.39 0 0 1 5.63-1.65c1.85 0 3.49.39 4.91 1.16 1.45.78 2.5 1.9 3.14 3.38l-3.9 1.65a3.75 3.75 0 0 0-1.74-1.85c-.77-.4-1.62-.6-2.53-.6-.88 0-1.66.2-2.33.6-.67.38-1 .89-1 1.53 0 .57.22 1.02.68 1.37.48.35 1.23.64 2.25.88l2.98.73c2 .5 3.5 1.29 4.5 2.33a5.1 5.1 0 0 1 1.49 3.7 5.2 5.2 0 0 1-1.09 3.22 7.1 7.1 0 0 1-2.93 2.3c-1.24.56-2.65.84-4.23.84Zm20.42 0c-1.96 0-3.73-.46-5.31-1.37a9.73 9.73 0 0 1-3.66-3.78 11.31 11.31 0 0 1-1.33-5.47c0-1.93.41-3.7 1.24-5.31a9.76 9.76 0 0 1 8.81-5.31 9.9 9.9 0 0 1 5.23 1.33 8.61 8.61 0 0 1 3.42 3.7 11.91 11.91 0 0 1 1.09 6.51h-15.37a5.8 5.8 0 0 0 1.97 4.23 6.08 6.08 0 0 0 4.03 1.49c2.3 0 4.07-1.08 5.3-3.22l3.79 1.8a10.45 10.45 0 0 1-3.7 3.95c-1.56.97-3.4 1.45-5.51 1.45Zm5.06-13.08a4.88 4.88 0 0 0-.64-1.97 4.5 4.5 0 0 0-1.77-1.69 5.48 5.48 0 0 0-2.94-.72c-1.31 0-2.45.4-3.41 1.2a6.13 6.13 0 0 0-1.94 3.18H200Zm24.71 13.08c-1.45 0-2.86-.3-4.23-.89a11.03 11.03 0 0 1-3.58-2.65 10.78 10.78 0 0 1-2.21-4.27l3.26-1.32a8.4 8.4 0 0 0 2.53 4.22 6.27 6.27 0 0 0 4.3 1.65 6.8 6.8 0 0 0 4.27-1.33 4.47 4.47 0 0 0 1.73-3.7c0-1.34-.5-2.44-1.49-3.3-.97-.88-2.56-1.7-4.79-2.45l-1.8-.64a14.42 14.42 0 0 1-5-2.86c-1.28-1.18-1.93-2.82-1.93-4.9a6.8 6.8 0 0 1 1.13-3.79 8.07 8.07 0 0 1 3.1-2.82 9.62 9.62 0 0 1 4.5-1.04c1.67 0 3.11.3 4.35.92a8.71 8.71 0 0 1 4.5 4.87l-3.17 1.37a5.55 5.55 0 0 0-5.6-3.9 5.9 5.9 0 0 0-3.78 1.24 3.85 3.85 0 0 0-1.57 3.14c0 1.13.45 2.05 1.33 2.78.89.7 2.23 1.35 4.02 1.97l1.85.64c2.45.89 4.35 2 5.72 3.34 1.4 1.32 2.09 3.11 2.09 5.4 0 1.84-.48 3.4-1.45 4.66a8.29 8.29 0 0 1-3.58 2.77c-1.45.6-2.95.89-4.5.89Zm19.63-.32c-.8 0-1.55-.14-2.25-.4a5.41 5.41 0 0 1-1.73-1.1 4.95 4.95 0 0 1-1.2-1.76 7.5 7.5 0 0 1-.37-2.46V29.67h-3.54v-3.1h3.54v-5.95h3.38v5.95h4.91v3.1h-4.9v10.62c0 1.13.22 1.96.68 2.5.45.58 1.15.88 2.09.88a4.1 4.1 0 0 0 2.17-.56v3.3a7.64 7.64 0 0 1-2.78.44Zm13.3.32c-2.47 0-4.35-.71-5.64-2.13-1.26-1.42-1.89-3.4-1.89-5.92V26.57h3.42v11.99c0 3.67 1.65 5.51 4.95 5.51 1.1 0 2.08-.3 2.94-.92a5.88 5.88 0 0 0 2-2.42c.5-.99.73-2.04.73-3.14V26.57h3.38v19.96h-3.22v-2.98h-.16a7.14 7.14 0 0 1-2.7 2.57 7.38 7.38 0 0 1-3.81 1.05Zm22.27 0c-1.71 0-3.3-.46-4.74-1.37a9.83 9.83 0 0 1-3.46-3.78 11.6 11.6 0 0 1-1.29-5.47c0-2.01.43-3.82 1.29-5.43a9.76 9.76 0 0 1 3.46-3.82 8.74 8.74 0 0 1 4.74-1.37c1.56 0 2.96.35 4.19 1.04a7.1 7.1 0 0 1 2.78 2.54h.16l-.16-2.74v-9.05h3.37v28.8h-3.21v-2.97h-.16a7.28 7.28 0 0 1-2.78 2.61c-1.23.67-2.63 1-4.19 1Zm.53-3.1a6.26 6.26 0 0 0 5.67-3.54c.62-1.15.93-2.48.93-3.98a8.1 8.1 0 0 0-.93-3.98 6.18 6.18 0 0 0-2.41-2.62 6.25 6.25 0 0 0-6.56 0 6.7 6.7 0 0 0-2.41 2.66 8.38 8.38 0 0 0-.89 3.94c0 1.5.3 2.83.89 3.98a6.9 6.9 0 0 0 2.41 2.62c1.02.61 2.12.92 3.3.92Zm16.04-21.68c-.67 0-1.24-.24-1.73-.73a2.36 2.36 0 0 1-.72-1.73c0-.67.24-1.24.72-1.73a2.36 2.36 0 0 1 1.73-.72c.67 0 1.25.24 1.73.72.49.49.73 1.06.73 1.73 0 .67-.24 1.25-.73 1.73-.45.49-1.03.73-1.73.73Zm-1.69 4.18h3.38v19.96h-3.38V26.57Zm16.77 20.6c-1.96 0-3.72-.46-5.27-1.37a10.03 10.03 0 0 1-3.66-3.82 11.51 11.51 0 0 1-1.29-5.43c0-1.99.43-3.78 1.29-5.4a10 10 0 0 1 8.93-5.23 10 10 0 0 1 8.93 5.24 11 11 0 0 1 1.33 5.39c0 1.98-.44 3.8-1.33 5.43a9.65 9.65 0 0 1-3.66 3.82 10.23 10.23 0 0 1-5.27 1.37Zm0-3.1a6.69 6.69 0 0 0 5.87-3.54c.65-1.15.97-2.48.97-3.98a7.8 7.8 0 0 0-.97-3.94 6.62 6.62 0 0 0-5.87-3.58c-1.18 0-2.3.3-3.34.92a6.9 6.9 0 0 0-2.53 2.66 8.08 8.08 0 0 0-.93 3.94c0 1.5.3 2.83.93 3.98.64 1.13 1.48 2 2.53 2.62 1.05.61 2.16.92 3.34.92Z" class="astro-kwmzlgva"></path>
			<defs class="astro-kwmzlgva">
				<linearGradient id="fbs-gradient-a-20003" x1="5" x2="26.68" y1="37.44" y2=".98" gradientUnits="userSpaceOnUse" class="astro-kwmzlgva">
					<stop stop-color="#F8682F" class="astro-kwmzlgva"></stop>
					<stop offset="1" stop-color="#DD2C00" class="astro-kwmzlgva"></stop>
				</linearGradient>
				<linearGradient id="fbs-gradient-b-20003" x1="25.29" x2="22.81" y1="27.27" y2="70.76" gradientUnits="userSpaceOnUse" class="astro-kwmzlgva">
					<stop stop-color="#F8682F" class="astro-kwmzlgva"></stop>
					<stop offset=".57" stop-color="#E92A4E" class="astro-kwmzlgva"></stop>
					<stop offset="1" stop-color="#C447FF" class="astro-kwmzlgva"></stop>
				</linearGradient>
			</defs>
		</svg>
	</a>

	<a href="https://sentry.io/welcome/?utm_medium=partner&utm_source=astro&utm_campaign=astro-docs" aria-label="Sentry" class="astro-kwmzlgva">
		<svg viewBox="0 0 200 44" width="96" aria-hidden="true" class="astro-kwmzlgva">
	<path d="M29,2.26a4.67,4.67,0,0,0-8,0L14.42,13.53A32.21,32.21,0,0,1,32.17,40.19H27.55A27.68,27.68,0,0,0,12.09,17.47L6,28a15.92,15.92,0,0,1,9.23,12.17H4.62A.76.76,0,0,1,4,39.06l2.94-5a10.74,10.74,0,0,0-3.36-1.9l-2.91,5a4.54,4.54,0,0,0,1.69,6.24A4.66,4.66,0,0,0,4.62,44H19.15a19.4,19.4,0,0,0-8-17.31l2.31-4A23.87,23.87,0,0,1,23.76,44H36.07a35.88,35.88,0,0,0-16.41-31.8l4.67-8a.77.77,0,0,1,1.05-.27c.53.29,20.29,34.77,20.66,35.17a.76.76,0,0,1-.68,1.13H40.6q.09,1.91,0,3.81h4.78A4.59,4.59,0,0,0,50,39.43a4.49,4.49,0,0,0-.62-2.28Z M124.32,28.28,109.56,9.22h-3.68V34.77h3.73V15.19l15.18,19.58h3.26V9.22h-3.73ZM87.15,23.54h13.23V20.22H87.14V12.53h14.93V9.21H83.34V34.77h18.92V31.45H87.14ZM71.59,20.3h0C66.44,19.06,65,18.08,65,15.7c0-2.14,1.89-3.59,4.71-3.59a12.06,12.06,0,0,1,7.07,2.55l2-2.83a14.1,14.1,0,0,0-9-3c-5.06,0-8.59,3-8.59,7.27,0,4.6,3,6.19,8.46,7.52C74.51,24.74,76,25.78,76,28.11s-2,3.77-5.09,3.77a12.34,12.34,0,0,1-8.3-3.26l-2.25,2.69a15.94,15.94,0,0,0,10.42,3.85c5.48,0,9-2.95,9-7.51C79.75,23.79,77.47,21.72,71.59,20.3ZM195.7,9.22l-7.69,12-7.64-12h-4.46L186,24.67V34.78h3.84V24.55L200,9.22Zm-64.63,3.46h8.37v22.1h3.84V12.68h8.37V9.22H131.08ZM169.41,24.8c3.86-1.07,6-3.77,6-7.63,0-4.91-3.59-8-9.38-8H154.67V34.76h3.8V25.58h6.45l6.48,9.2h4.44l-7-9.82Zm-10.95-2.5V12.6h7.17c3.74,0,5.88,1.77,5.88,4.84s-2.29,4.86-5.84,4.86Z" fill="currentColor"></path>
</svg>
	</a>

	<a href="https://www.mux.com/?utm_campaign=21819274-Astro&utm_source=astro" aria-label="Mux" class="astro-kwmzlgva">
		<svg viewBox="0 0 77 24" height="15" fill="currentColor" aria-hidden="true" class="astro-kwmzlgva">
	<path d="M47.73 0a2.98 2.98 0 0 0-2.97 3v9c0 3.31-2.67 6-5.94 6a5.97 5.97 0 0 1-5.94-6V3c0-1.66-1.33-3-2.97-3a2.98 2.98 0 0 0-2.97 3v9c0 6.62 5.33 12 11.88 12 6.55 0 11.88-5.38 11.88-12V3c.01-1.66-1.32-3-2.97-3zm13.19 12-6.81 6.88a3.02 3.02 0 0 0 0 4.24 2.95 2.95 0 0 0 4.2 0l6.81-6.88 6.81 6.88a2.95 2.95 0 0 0 4.2 0 3.02 3.02 0 0 0 0-4.24L69.32 12l6.81-6.88a3.02 3.02 0 0 0 0-4.24 2.95 2.95 0 0 0-4.2 0l-6.81 6.88L58.3.88a2.95 2.95 0 0 0-4.2 0 3.02 3.02 0 0 0 0 4.24L60.92 12zM21.93.23a2.96 2.96 0 0 0-3.24.65l-6.81 6.88L5.07.88A2.94 2.94 0 0 0 1.83.23 3 3 0 0 0 0 3v18c0 1.66 1.33 3 2.97 3s2.97-1.34 2.97-3V10.24l3.84 3.88a2.95 2.95 0 0 0 4.2 0l3.84-3.88V21c0 1.66 1.33 3 2.97 3s2.97-1.34 2.97-3V3A2.98 2.98 0 0 0 21.93.23z"></path>
</svg>
	</a>
</div>
</div>
					</div>
				</div>
			</nav>
	<div class="main-frame astro-34ku3w3v">
			
			<script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script>
			<div class="lg:sl-flex astro-il45mser">
	<aside class="right-sidebar-container print:hidden astro-il45mser">
				<div class="right-sidebar astro-il45mser">
					
			<div class="lg:sl-hidden astro-evux67hy">
				<mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-yitqccco">
			<nav aria-labelledby="starlight__on-this-page--mobile" class="astro-yitqccco">
				<details id="starlight__mobile-toc" class="astro-yitqccco">
					<summary id="starlight__on-this-page--mobile" class="sl-flex astro-yitqccco">
						<div class="toggle sl-flex astro-yitqccco">
							On this page
							
	<svg aria-hidden="true" class="caret astro-yitqccco astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg>



						</div>
						<span class="display-current astro-yitqccco"></span>
					</summary>
					<div class="dropdown astro-yitqccco">
						<ul class="isMobile astro-oitnbpw7" style="--depth: 0;">
	<li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#_top" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Overview</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#upgrade-astro" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Upgrade Astro</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#dependency-upgrades" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Dependency Upgrades</span>
				</a>
				<ul class="isMobile astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#vite-60" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Vite 6.0</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#astrojsmdx" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">@astrojs/mdx</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#legacy" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Legacy</span>
				</a>
				<ul class="isMobile astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#legacy-v20-content-collections-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Legacy: v2.0 Content Collections API</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#deprecated" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Deprecated</span>
				</a>
				<ul class="isMobile astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#deprecated-astroglob" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Deprecated: Astro.glob()</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#deprecated-functionperroute-adapter-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Deprecated: functionPerRoute (Adapter API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#deprecated-routes-on-astrobuilddone-hook-integration-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Deprecated: routes on astro:build:done hook (Integration API)</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#removed" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Removed</span>
				</a>
				<ul class="isMobile astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-the-lit-integration" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: The Lit integration</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-hybrid-rendering-mode" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: hybrid rendering mode</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-support-for-dynamic-prerender-values-in-routes" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: support for dynamic prerender values in routes</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-squoosh-image-service" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: Squoosh image service</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-some-public-facing-types" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: some public-facing types</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#experimental-flags" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Experimental Flags</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#changed-defaults" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Changed Defaults</span>
				</a>
				<ul class="isMobile astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#csrf-protection-is-now-set-by-default" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">CSRF protection is now set by default</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#route-priority-order-for-injected-routes-and-redirects" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Route priority order for injected routes and redirects</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#script-tags-are-rendered-directly-as-declared" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">&lt;script&gt; tags are rendered directly as declared</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#breaking-changes" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Breaking Changes</span>
				</a>
				<ul class="isMobile astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#renamed-viewtransitions--component" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Renamed: &lt;ViewTransitions /&gt; component</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-typescript-configuration" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: TypeScript configuration</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-actions-submitted-by-html-forms-no-longer-use-cookie-redirects" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Actions submitted by HTML forms no longer use cookie redirects</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-compiledcontent-is-now-an-async-function" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: compiledContent() is now an async function</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-astrocontent-can-no-longer-be-used-on-the-client" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: astro:content can no longer be used on the client</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#renamed-shiki-css-variables-theme-color-token-names" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Renamed: Shiki css-variables theme color token names</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-internal-shiki-rehype-plugin-for-highlighting-code-blocks" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: internal Shiki rehype plugin for highlighting code blocks</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-automatic-charsetutf-8-behavior-for-markdown-and-mdx-pages" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Automatic charset=utf-8 behavior for Markdown and MDX pages</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-astro-specific-metadata-attached-in-remark-and-rehype-plugins" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Astro-specific metadata attached in remark and rehype plugins</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-image-endpoint-configuration" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: image endpoint configuration</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-buildclient-and-buildserver-resolve-behavior" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: build.client and build.server resolve behavior</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-js-dependencies-in-config-file-are-no-longer-processed-by-vite" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: JS dependencies in config file are no longer processed by Vite</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-urls-returned-by-paginate" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: URLs returned by paginate()</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-non-boolean-html-attribute-values" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: non-boolean HTML attribute values</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-adding-values-to-contextlocals" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: adding values to context.locals</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-params-no-longer-decoded" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: params no longer decoded</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-routedata-type-replaced-by-integrationsroutedata-integrations-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: RouteData type replaced by IntegrationsRouteData (Integrations API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-disturl-is-now-an-array-integrations-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: distURL is now an array (Integrations API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-arguments-passed-to-apprender-adapter-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Arguments passed to app.render() (Adapter API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-properties-on-supportedastrofeatures-adapter-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Properties on supportedAstroFeatures (Adapter API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-deprecated-definition-shape-for-dev-toolbar-apps-dev-toolbar-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: Deprecated definition shape for dev toolbar apps (Dev Toolbar API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-configuring-typescript-during-create-astro" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: configuring Typescript during create-astro</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#community-resources" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Community Resources</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#known-issues" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Known Issues</span>
				</a>
				
			</li>
</ul>
					</div>
				</details>
			</nav>
		</mobile-starlight-toc>



<script type="module" src="/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.B6c2wewi.js"></script>
			</div>
			<div class="right-sidebar-panel sl-hidden lg:sl-block astro-evux67hy">
				<div class="sl-container astro-evux67hy">
					<starlight-toc data-min-h="2" data-max-h="3">
			<nav aria-labelledby="starlight__on-this-page">
				<h2 id="starlight__on-this-page">
					On this page
				</h2>
				<ul class="astro-oitnbpw7" style="--depth: 0;">
	<li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#_top" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Overview</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#upgrade-astro" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Upgrade Astro</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#dependency-upgrades" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Dependency Upgrades</span>
				</a>
				<ul class="astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#vite-60" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Vite 6.0</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#astrojsmdx" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">@astrojs/mdx</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#legacy" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Legacy</span>
				</a>
				<ul class="astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#legacy-v20-content-collections-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Legacy: v2.0 Content Collections API</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#deprecated" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Deprecated</span>
				</a>
				<ul class="astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#deprecated-astroglob" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Deprecated: Astro.glob()</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#deprecated-functionperroute-adapter-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Deprecated: functionPerRoute (Adapter API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#deprecated-routes-on-astrobuilddone-hook-integration-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Deprecated: routes on astro:build:done hook (Integration API)</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#removed" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Removed</span>
				</a>
				<ul class="astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-the-lit-integration" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: The Lit integration</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-hybrid-rendering-mode" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: hybrid rendering mode</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-support-for-dynamic-prerender-values-in-routes" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: support for dynamic prerender values in routes</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-squoosh-image-service" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: Squoosh image service</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-some-public-facing-types" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: some public-facing types</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#experimental-flags" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Experimental Flags</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#changed-defaults" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Changed Defaults</span>
				</a>
				<ul class="astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#csrf-protection-is-now-set-by-default" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">CSRF protection is now set by default</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#route-priority-order-for-injected-routes-and-redirects" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Route priority order for injected routes and redirects</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#script-tags-are-rendered-directly-as-declared" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">&lt;script&gt; tags are rendered directly as declared</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#breaking-changes" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Breaking Changes</span>
				</a>
				<ul class="astro-oitnbpw7" style="--depth: 1;">
	<li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#renamed-viewtransitions--component" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Renamed: &lt;ViewTransitions /&gt; component</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-typescript-configuration" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: TypeScript configuration</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-actions-submitted-by-html-forms-no-longer-use-cookie-redirects" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Actions submitted by HTML forms no longer use cookie redirects</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-compiledcontent-is-now-an-async-function" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: compiledContent() is now an async function</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-astrocontent-can-no-longer-be-used-on-the-client" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: astro:content can no longer be used on the client</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#renamed-shiki-css-variables-theme-color-token-names" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Renamed: Shiki css-variables theme color token names</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-internal-shiki-rehype-plugin-for-highlighting-code-blocks" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: internal Shiki rehype plugin for highlighting code blocks</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-automatic-charsetutf-8-behavior-for-markdown-and-mdx-pages" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Automatic charset=utf-8 behavior for Markdown and MDX pages</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-astro-specific-metadata-attached-in-remark-and-rehype-plugins" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Astro-specific metadata attached in remark and rehype plugins</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-image-endpoint-configuration" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: image endpoint configuration</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-buildclient-and-buildserver-resolve-behavior" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: build.client and build.server resolve behavior</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-js-dependencies-in-config-file-are-no-longer-processed-by-vite" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: JS dependencies in config file are no longer processed by Vite</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-urls-returned-by-paginate" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: URLs returned by paginate()</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-non-boolean-html-attribute-values" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: non-boolean HTML attribute values</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-adding-values-to-contextlocals" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: adding values to context.locals</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-params-no-longer-decoded" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: params no longer decoded</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-routedata-type-replaced-by-integrationsroutedata-integrations-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: RouteData type replaced by IntegrationsRouteData (Integrations API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-disturl-is-now-an-array-integrations-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: distURL is now an array (Integrations API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-arguments-passed-to-apprender-adapter-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Arguments passed to app.render() (Adapter API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#changed-properties-on-supportedastrofeatures-adapter-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Changed: Properties on supportedAstroFeatures (Adapter API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-deprecated-definition-shape-for-dev-toolbar-apps-dev-toolbar-api" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: Deprecated definition shape for dev toolbar apps (Dev Toolbar API)</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 1;">
				<a href="#removed-configuring-typescript-during-create-astro" class="astro-oitnbpw7" style="--depth: 1;">
					<span class="astro-oitnbpw7" style="--depth: 1;">Removed: configuring Typescript during create-astro</span>
				</a>
				
			</li>
</ul>
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#community-resources" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Community Resources</span>
				</a>
				
			</li><li class="astro-oitnbpw7" style="--depth: 0;">
				<a href="#known-issues" class="astro-oitnbpw7" style="--depth: 0;">
					<span class="astro-oitnbpw7" style="--depth: 0;">Known Issues</span>
				</a>
				
			</li>
</ul>
			</nav>
		</starlight-toc>

<script type="module" src="/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script>
				</div>
				<div class="sl-container astro-evux67hy">
					<div class="container astro-zwxhm4ix" lang="en" dir="ltr" data-algolia-exclude>
	<aside aria-labelledby="learn-astro-course-2" class="astro-zwxhm4ix">
		<div class="graphics astro-zwxhm4ix">
			
<img src="/_astro/Scrimba.ByZ1pAIN_1PqoUV.webp" alt="Scrimba" loading="lazy" decoding="async" fetchpriority="auto" width="72" height="72" class="scrimba-bubble astro-zwxhm4ix">
			
<img src="/_astro/JamesQuick.BYVczE5K_Z27c5s6.webp" alt loading="lazy" decoding="async" fetchpriority="auto" width="72" height="72" class="astro-zwxhm4ix">
		</div>
		<h2 id="learn-astro-course-2" class="astro-zwxhm4ix">
			<strong class="astro-zwxhm4ix">Learn Astro</strong> with James Q Quick
		</h2>
		<p class="astro-zwxhm4ix">Build your first site with 35 interactive Scrimba lessons</p>
		<a class="sl-link-button not-content primary cta astro-zwxhm4ix astro-n3qr5j5k" href="https://scrimba.com/intro-to-astro-c00ar0fi5u?via=astro" data-scrimba-cta="true">
	
	Get 20% off
	
</a>
	</aside>
</div>

<script type="module">document.querySelectorAll("a[data-scrimba-cta]").forEach(c=>c.addEventListener("click",()=>{window.fathom?.trackEvent("Docs: Scrimba campaign click")}));</script>
				</div>
			</div>
		


				</div>
			</aside>
	<div class="main-pane astro-il45mser">
				
				<main data-pagefind-body class="astro-4g3gq6ui" lang="en" dir="ltr">
					
					


					
								<div class="content-panel astro-2mug3n2c">
	<div class="sl-container astro-2mug3n2c">
									<h1 id="_top" class="astro-62i6xxx4">Upgrade to Astro v5</h1>


									</div>
</div>
								<div class="content-panel astro-2mug3n2c">
	<div class="sl-container astro-2mug3n2c">
									<div class="sl-markdown-content">
	
										<p>This guide will help you migrate from Astro v4 to Astro v5.</p>
<p>Need to upgrade an older project to v4 first? See our <a href="/en/guides/upgrade-to/v4/">older migration guide</a>.</p>
<p>Need to see the v4 docs? Visit this <a href="https://v4.docs.astro.build/">older version of the docs site (unmaintained v4.16 snapshot)</a>.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="upgrade-astro">Upgrade Astro</h2><a class="sl-anchor-link" href="#upgrade-astro"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Upgrade Astro”</span></a></div>
<p>Update your project’s version of Astro to the latest version using your package manager:</p>

<script>
(() => {
	class StarlightTabsRestore extends HTMLElement {
		connectedCallback() {
			const starlightTabs = this.closest('starlight-tabs');
			if (!(starlightTabs instanceof HTMLElement) || typeof localStorage === 'undefined') return;
			const syncKey = starlightTabs.dataset.syncKey;
			if (!syncKey) return;
			const label = localStorage.getItem(`starlight-synced-tabs__${syncKey}`);
			if (!label) return;
			const tabs = [...starlightTabs?.querySelectorAll('[role="tab"]')];
			const tabIndexToRestore = tabs.findIndex(
				(tab) => tab instanceof HTMLAnchorElement && tab.textContent?.trim() === label
			);
			const panels = starlightTabs?.querySelectorAll(':scope > [role="tabpanel"]');
			const newTab = tabs[tabIndexToRestore];
			const newPanel = panels[tabIndexToRestore];
			if (tabIndexToRestore < 1 || !newTab || !newPanel) return;
			tabs[0]?.setAttribute('aria-selected', 'false');
			tabs[0]?.setAttribute('tabindex', '-1');
			panels?.[0]?.setAttribute('hidden', 'true');
			newTab.removeAttribute('tabindex');
			newTab.setAttribute('aria-selected', 'true');
			newPanel.removeAttribute('hidden');
		}
	}
	customElements.define('starlight-tabs-restore', StarlightTabsRestore);
})()
</script>

<starlight-tabs data-sync-key="package-managers" class="astro-xtbw65nk">
	<div class="tablist-wrapper not-content astro-xtbw65nk">
				<ul role="tablist" class="astro-xtbw65nk">
					<li role="presentation" class="tab astro-xtbw65nk">
							<a role="tab" href="#tab-panel-9575" id="tab-9575" aria-selected="true" tabindex="0" class="astro-xtbw65nk">
								
								npm
							</a>
						</li><li role="presentation" class="tab astro-xtbw65nk">
							<a role="tab" href="#tab-panel-9576" id="tab-9576" aria-selected="false" tabindex="-1" class="astro-xtbw65nk">
								
								pnpm
							</a>
						</li><li role="presentation" class="tab astro-xtbw65nk">
							<a role="tab" href="#tab-panel-9577" id="tab-9577" aria-selected="false" tabindex="-1" class="astro-xtbw65nk">
								
								Yarn
							</a>
						</li>
				</ul>
			</div>
	
	<div id="tab-panel-9575" aria-labelledby="tab-9575" role="tabpanel">
	
		<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.rvnnt.css"><script type="module" src="/_astro/ec.p1z7b.js"></script><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># Upgrade Astro and official integrations together</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npx</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">@astrojs/upgrade</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npx @astrojs/upgrade"><div></div></button></div></figure></div>
	
</div>
	<div id="tab-panel-9576" aria-labelledby="tab-9576" role="tabpanel" hidden>
	
		<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># Upgrade Astro and official integrations together</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">pnpm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dlx</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">@astrojs/upgrade</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pnpm dlx @astrojs/upgrade"><div></div></button></div></figure></div>
	
</div>
	<div id="tab-panel-9577" aria-labelledby="tab-9577" role="tabpanel" hidden>
	
		<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F"># Upgrade Astro and official integrations together</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">yarn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">dlx</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">@astrojs/upgrade</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="yarn dlx @astrojs/upgrade"><div></div></button></div></figure></div>
	
</div>

	<starlight-tabs-restore class="astro-xtbw65nk"></starlight-tabs-restore>
</starlight-tabs>



<script type="module">class r extends HTMLElement{static#e=new Map;#t;#n="starlight-synced-tabs__";constructor(){super();const t=this.querySelector('[role="tablist"]');if(this.tabs=[...t.querySelectorAll('[role="tab"]')],this.panels=[...this.querySelectorAll(':scope > [role="tabpanel"]')],this.#t=this.dataset.syncKey,this.#t){const i=r.#e.get(this.#t)??[];i.push(this),r.#e.set(this.#t,i)}this.tabs.forEach((i,c)=>{i.addEventListener("click",e=>{e.preventDefault();const n=t.querySelector('[aria-selected="true"]');e.currentTarget!==n&&this.switchTab(e.currentTarget,c)}),i.addEventListener("keydown",e=>{const n=this.tabs.indexOf(e.currentTarget),s=e.key==="ArrowLeft"?n-1:e.key==="ArrowRight"?n+1:e.key==="Home"?0:e.key==="End"?this.tabs.length-1:null;s!==null&&this.tabs[s]&&(e.preventDefault(),this.switchTab(this.tabs[s],s))})})}switchTab(t,i,c=!0){if(!t)return;const e=c?this.getBoundingClientRect().top:0;this.tabs.forEach(s=>{s.setAttribute("aria-selected","false"),s.setAttribute("tabindex","-1")}),this.panels.forEach(s=>{s.hidden=!0});const n=this.panels[i];n&&(n.hidden=!1),t.removeAttribute("tabindex"),t.setAttribute("aria-selected","true"),c&&(t.focus(),r.#r(this,t),window.scrollTo({top:window.scrollY+(this.getBoundingClientRect().top-e),behavior:"instant"}))}#i(t){!this.#t||typeof localStorage>"u"||localStorage.setItem(this.#n+this.#t,t)}static#r(t,i){const c=t.#t,e=r.#s(i);if(!c||!e)return;const n=r.#e.get(c);if(n){for(const s of n){if(s===t)continue;const a=s.tabs.findIndex(o=>r.#s(o)===e);a!==-1&&s.switchTab(s.tabs[a],a,!1)}t.#i(e)}}static#s(t){return t.textContent?.trim()}}customElements.define("starlight-tabs",r);</script>
<p>You can also <a href="/en/guides/integrations-guide/#manual-upgrading">upgrade your Astro integrations manually</a> if needed, and you may also need to upgrade other dependencies in your project.</p>
<aside aria-label="Need to continue?" class="starlight-aside starlight-aside--note"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 11C11.7348 11 11.4804 11.1054 11.2929 11.2929C11.1054 11.4804 11 11.7348 11 12V16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17C12.2652 17 12.5196 16.8946 12.7071 16.7071C12.8946 16.5196 13 16.2652 13 16V12C13 11.7348 12.8946 11.4804 12.7071 11.2929C12.5196 11.1054 12.2652 11 12 11ZM12.38 7.08C12.1365 6.97998 11.8635 6.97998 11.62 7.08C11.4973 7.12759 11.3851 7.19896 11.29 7.29C11.2017 7.3872 11.1306 7.49882 11.08 7.62C11.024 7.73868 10.9966 7.86882 11 8C10.9992 8.13161 11.0245 8.26207 11.0742 8.38391C11.124 8.50574 11.1973 8.61656 11.29 8.71C11.3872 8.79833 11.4988 8.86936 11.62 8.92C11.7715 8.98224 11.936 9.00632 12.099 8.99011C12.2619 8.97391 12.4184 8.91792 12.5547 8.82707C12.691 8.73622 12.8029 8.61328 12.8805 8.46907C12.9582 8.32486 12.9992 8.16378 13 8C12.9963 7.73523 12.8927 7.48163 12.71 7.29C12.6149 7.19896 12.5028 7.12759 12.38 7.08ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z"></path></svg>Need to continue?</p><div class="starlight-aside__content"><p>After upgrading Astro, you may not need to make any changes to your project at all!</p><p>But, if you notice errors or unexpected behavior, please check below for what has changed that might need updating in your project.</p></div></aside>
<p>Astro v5.0 includes <a href="#breaking-changes">potentially breaking changes</a>, as well as the removal and deprecation of some features.</p>
<p>If your project doesn’t work as expected after upgrading to v5.0, check this guide for an overview of all breaking changes and instructions on how to update your codebase.</p>
<p>See <a href="https://github.com/withastro/astro/blob/main/packages/astro/CHANGELOG.md">the Astro changelog</a> for full release notes.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="dependency-upgrades">Dependency Upgrades</h2><a class="sl-anchor-link" href="#dependency-upgrades"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Dependency Upgrades”</span></a></div>
<p>Any major upgrades to Astro’s dependencies may cause breaking changes in your project.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="vite-60">Vite 6.0</h3><a class="sl-anchor-link" href="#vite-60"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Vite 6.0”</span></a></div>
<p>Astro v5.0 upgrades to Vite v6.0 as the development server and production bundler.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you are using Vite-specific plugins, configuration, or APIs, check the <a href="https://vite.dev/guide/migration.html">Vite migration guide</a> for their breaking changes and upgrade your project as needed.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="astrojsmdx"><code dir="auto">@astrojs/mdx</code></h3><a class="sl-anchor-link" href="#astrojsmdx"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “@astrojs/mdx”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11741" class="astro-ro74hpkt">Implementation PR: Cleanup unused JSX code (#11741)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, Astro performed internal JSX handling for the <code dir="auto">@astrojs/mdx</code> integration.</p>
<p>Astro v5.0 moves this responsibility to handle and render JSX and MDX to the <code dir="auto">@astrojs/mdx</code> package directly. This means that Astro 5.0 is no longer compatible with older versions of the MDX integration.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-1">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-1"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If your project includes <code dir="auto">.mdx</code> files, you must upgrade <code dir="auto">@astrojs/mdx</code> to the latest version (v4.0.0) so that your JSX can be handled properly by the integration.</p>
<p>If you are using an MDX server renderer with the experimental <a href="/en/reference/container-reference/">Astro Container API</a> you must update the import to reflect the new location:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="ts"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">import</span><span style="--0:#D6DEEB;--1:#403F53"> mdxRenderer </span><span style="--0:#d0a3ed;--1:#663383">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">astro/jsx/server.js</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">import</span><span style="--0:#D6DEEB;--1:#403F53"> mdxRenderer </span><span style="--0:#d2a6ee;--1:#6a3588">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">@astrojs/mdx/server.js</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import mdxRenderer from &#x22;astro/jsx/server.js&#x22;;import mdxRenderer from &#x22;@astrojs/mdx/server.js&#x22;;"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Learn more about <a href="/en/guides/integrations-guide/mdx/">using MDX in your project</a>.</span>
</div>
<div class="sl-heading-wrapper level-h2"><h2 id="legacy">Legacy</h2><a class="sl-anchor-link" href="#legacy"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Legacy”</span></a></div>
<p>The following features are now considered legacy features. They should function normally but are no longer recommended and are in maintenance mode. They will see no future improvements and documentation will not be updated. These features will eventually be deprecated, and then removed entirely.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="legacy-v20-content-collections-api">Legacy: v2.0 Content Collections API</h3><a class="sl-anchor-link" href="#legacy-v20-content-collections-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Legacy: v2.0 Content Collections API”</span></a></div>
<p>In Astro 4.x, content collections were defined, queried, and rendered using <a href="https://astro.build/blog/introducing-content-collections/">the Content Collections API first introduced in Astro v2.0</a>. All collection entries were local files within the reserved <code dir="auto">src/content/</code> folder. Additionally, Astro’s <a href="/en/guides/routing/#excluding-pages">file name convention to exclude building individual pages</a> was built in to the Content Collections API.</p>
<p>Astro 5.0 introduces a new version of content collections using the Content Layer API which brings several performance improvements and added capabilities. While old (legacy) and new (Content Layer API) collections can continue exist together in this release, there are potentially breaking changes to existing legacy collections.</p>
<p>This release also removes the option to prefix collection entry file names with an underscore (<code dir="auto">_</code>) to prevent building a route.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-2">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-2"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>We recommend <a href="#updating-existing-collections">converting any existing collections to the new Content Layer API</a> as soon as you are able and making any new collections using the Content Layer API.</p>
<p>If you are unable to convert your collections, then please consult the <a href="#breaking-changes-to-legacy-content-and-data-collections">legacy collections breaking changes</a> to see whether your existing collections are affected and require updating.</p>
<p>If you are unable to make any changes to your collections at this time, you can <a href="#enabling-the-legacycollections-flag">enable the <code dir="auto">legacy.collections</code> flag</a> which will allow you to keep your collections in their current state until the legacy flag is no longer supported.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Learn more about the updated <a href="/en/guides/content-collections/">content collections</a>.</span>
</div>
<div class="sl-heading-wrapper level-h5"><h5 id="updating-existing-collections">Updating existing collections</h5><a class="sl-anchor-link" href="#updating-existing-collections"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Updating existing collections”</span></a></div>
<p>See the instructions below for updating an existing content collection (<code dir="auto">type: 'content'</code> or <code dir="auto">type: 'data'</code>) to use the Content Layer API.</p>
<details><summary>Step-by-step instructions to update a collection</summary><ol role="list" class="sl-steps">
<li>
<p><strong>Move the content config file</strong>. This file no longer lives within the <code dir="auto">src/content/</code> folder. This file should now exist at <code dir="auto">src/content.config.ts</code>.</p>
</li>
<li>
<p><strong>Edit the collection definition</strong>. Your updated collection requires a <code dir="auto">loader</code> which indicates both a folder for the location of your collection (<code dir="auto">base</code>) and a <code dir="auto">pattern</code> defining the collection entry filenames and extensions to match. (You may need to update the example below accordingly. You can use <a href="https://globster.xyz/">globster.xyz</a> to check your glob pattern.) The option to select a collection <code dir="auto">type</code> is no longer available.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/content.config.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineCollection, z } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:content</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">import</span><span style="--0:#D6DEEB;--1:#403F53"> { glob } </span><span style="--0:#d2a6ee;--1:#6a3588">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">astro/loaders</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">blog</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#82AAFF;--1:#3B61B0">defineCollection</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// For content layer you no longer define a `type`</span></div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383"><span class="indent">  </span>type: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">content</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#d0a3ed;--1:#663383">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">  </span>loader: </span><span style="--0:#94b6ff;--1:#2d4a87">glob</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#d2a6ee;--1:#6a3588">{ pattern: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">**/[^_]*.{md,mdx}</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#d2a6ee;--1:#6a3588">, base: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">./src/data/blog</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#d2a6ee;--1:#6a3588"> }</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#d2a6ee;--1:#6a3588">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">schema: </span><span style="--0:#D6DEEB;--1:#403F53">z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">object</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">title: </span><span style="--0:#D6DEEB;--1:#403F53">z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">description: </span><span style="--0:#D6DEEB;--1:#403F53">z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">string</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">pubDate: </span><span style="--0:#D6DEEB;--1:#403F53">z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">coerce</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">date</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">updatedDate: </span><span style="--0:#D6DEEB;--1:#403F53">z</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">coerce</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">date</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">optional</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { defineCollection, z } from &#x27;astro:content&#x27;;import { glob } from &#x27;astro/loaders&#x27;;const blog = defineCollection({  // For content layer you no longer define a &#x60;type&#x60;  type: &#x27;content&#x27;,  loader: glob({ pattern: &#x27;**/[^_]*.{md,mdx}&#x27;, base: &#x22;./src/data/blog&#x22; }),  schema: z.object({    title: z.string(),    description: z.string(),    pubDate: z.coerce.date(),    updatedDate: z.coerce.date().optional(),  }),});"><div></div></button></div></figure></div>
</li>
<li>
<p><strong>Change references from <code dir="auto">slug</code> to <code dir="auto">id</code></strong>. Content layer collections do not have a reserved <code dir="auto">slug</code> field. Instead, all updated collections will have an <code dir="auto">id</code>:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/[slug].astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">getStaticPaths</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">posts</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">getCollection</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">blog</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> posts</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">map</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">post</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> ({</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">params: { slug: post</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#7FDBCA;--1:#075356">slug</span><span style="--0:#D6DEEB;--1:#403F53"> }</span><span style="--0:#a5b7c5;--1:#3a4d5c">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">params: { slug: post</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#7FDBCA;--1:#075457">id</span><span style="--0:#D6DEEB;--1:#403F53"> }</span><span style="--0:#a8b9c6;--1:#3b4e5e">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">props: post</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}));</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---export async function getStaticPaths() {  const posts = await getCollection(&#x27;blog&#x27;);  return posts.map((post) => ({    params: { slug: post.slug },    params: { slug: post.id },    props: post,  }));}---"><div></div></button></div></figure></div>
<p>You can also update the dynamic routing file names to match the value of the changed <code dir="auto">getStaticPaths()</code> parameter.</p>
</li>
<li>
<p><strong>Switch to the new <code dir="auto">render()</code> function</strong>. Entries no longer have a <code dir="auto">render()</code> method, as they are now serializable plain objects. Instead, import the <code dir="auto">render()</code> function from <code dir="auto">astro:content</code>.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/index.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { getEntry</span><ins><span style="--0:#D6DEEB;--1:#403F53">, render</span></ins><span style="--0:#D6DEEB;--1:#403F53"> } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:content</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">post</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">getEntry</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">blog</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#D6DEEB;--1:#403F53">params</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">slug</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">const { </span><span style="--0:#91b4ff;--1:#2c4984">Content</span><span style="--0:#d0a3ed;--1:#663383">, </span><span style="--0:#91b4ff;--1:#2c4984">headings</span><span style="--0:#d0a3ed;--1:#663383"> } = await </span><span style="--0:#D6DEEB;--1:#403F53">post</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">render</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">const { </span><span style="--0:#94b6ff;--1:#2d4a87">Content</span><span style="--0:#d2a6ee;--1:#6a3588">, </span><span style="--0:#94b6ff;--1:#2d4a87">headings</span><span style="--0:#d2a6ee;--1:#6a3588"> } = await </span><span style="--0:#94b6ff;--1:#2d4a87">render</span><span style="--0:#D6DEEB;--1:#403F53">(post);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#8844AE">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">Content</span><span style="--0:#7FDBCA;--1:#8844AE"> /></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { getEntry, render } from &#x27;astro:content&#x27;;const post = await getEntry(&#x27;blog&#x27;, params.slug);const { Content, headings } = await post.render();const { Content, headings } = await render(post);---<Content />"><div></div></button></div></figure></div>
</li>
</ol>

</details>
<div class="sl-heading-wrapper level-h5"><h5 id="breaking-changes-to-legacy-content-and-data-collections">Breaking changes to legacy <code dir="auto">content</code> and <code dir="auto">data</code> collections</h5><a class="sl-anchor-link" href="#breaking-changes-to-legacy-content-and-data-collections"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Breaking changes to legacy content and data collections”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11976" class="astro-ro74hpkt">Implementation PR: Implement legacy collections using glob (#11976)<span class="astro-ro74hpkt"></span></a>
</div>
<p>By default, collections that use the old <code dir="auto">type</code> property (<code dir="auto">content</code> or <code dir="auto">data</code>) and do not define a <code dir="auto">loader</code> are now implemented under the hood using the Content Layer API’s built-in <code dir="auto">glob()</code> loader, with extra backward-compatibility handling.</p>
<p>Additionally, temporary backwards compatibility exists for keeping the content config file in its original location of <code dir="auto">src/content/config.ts</code>.</p>
<p>This backwards compatibility implementation is able to emulate most of the features of legacy collections and will allow many legacy collections to continue to work even without updating your code. However, <strong>there are some differences and limitations that may cause breaking changes to existing collections</strong>:</p>
<ul>
<li>In previous versions of Astro, collections would be generated for all folders in <code dir="auto">src/content/</code>, even if they were not defined in <code dir="auto">src/content/config.ts</code>. This behavior is now deprecated, and collections should always be defined in <code dir="auto">src/content.config.ts</code>. For existing collections, these can just be empty declarations (e.g. <code dir="auto">const blog = defineCollection({})</code>) and Astro will implicitly define your legacy collection for you in a way that is compatible with the new loading behavior.</li>
<li>The special <code dir="auto">layout</code> field is not supported in Markdown collection entries. This property is intended only for standalone page files located in <code dir="auto">src/pages/</code> and not likely to be in your collection entries. However, if you were using this property, you must now create dynamic routes that include your page styling.</li>
<li>Sort order of generated collections is non-deterministic and platform-dependent. This means that if you are calling <code dir="auto">getCollection()</code>, the order in which entries are returned may be different than before. If you need a specific order, you must sort the collection entries yourself.</li>
<li><code dir="auto">image().refine()</code> is not supported. If you need to validate the properties of an image you will need to do this at runtime in your page or component.</li>
<li>The <code dir="auto">key</code> argument of <code dir="auto">getEntry(collection, key)</code> is typed as <code dir="auto">string</code>, rather than having types for every entry.</li>
<li>Previously when calling <code dir="auto">getEntry(collection, key)</code> with a static string as the key, the return type was not nullable. The type now includes <code dir="auto">undefined</code> so you must check if the entry is defined before using the result or you will have type errors.</li>
</ul>
<div class="sl-heading-wrapper level-h5"><h5 id="enabling-the-legacycollections-flag">Enabling the <code dir="auto">legacy.collections</code> flag</h5><a class="sl-anchor-link" href="#enabling-the-legacycollections-flag"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Enabling the legacy.collections flag”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11976" class="astro-ro74hpkt">Implementation PR: Implement legacy collections using glob (#11976)<span class="astro-ro74hpkt"></span></a>
</div>
<p>If you are not yet ready to update your existing collections, you can enable the <a href="/en/reference/legacy-flags/"><code dir="auto">legacy.collections</code></a> flag and your existing collections will continue to function as before.</p>
<div class="sl-heading-wrapper level-h2"><h2 id="deprecated">Deprecated</h2><a class="sl-anchor-link" href="#deprecated"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Deprecated”</span></a></div>
<p>The following deprecated features are no longer supported and are no longer documented. Please update your project accordingly.</p>
<p>Some deprecated features may temporarily continue to function until they are completely removed. Others may silently have no effect, or throw an error prompting you to update your code.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="deprecated-astroglob">Deprecated: <code dir="auto">Astro.glob()</code></h3><a class="sl-anchor-link" href="#deprecated-astroglob"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Deprecated: Astro.glob()”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11826" class="astro-ro74hpkt">Implementation PR: Deprecate glob (#11826)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, you could use <code dir="auto">Astro.glob()</code> in your <code dir="auto">.astro</code> components to query multiple files in your project. This had some limitations (where it could be used, performance, etc.), and using querying functions from the Content Collections API or Vite’s own <code dir="auto">import.meta.glob()</code> often provided more function and flexibility.</p>
<p>Astro 5.0 deprecates <code dir="auto">Astro.glob()</code> in favor of using <code dir="auto">getCollection()</code> to query your collections, and <code dir="auto">import.meta.glob()</code> to query other source files in your project.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-3">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-3"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Replace all use of <code dir="auto">Astro.glob()</code> with <code dir="auto">import.meta.glob()</code>. Note that <code dir="auto">import.meta.glob()</code> no longer returns a <code dir="auto">Promise</code>, so you may have to update your code accordingly. You should not require any updates to your <a href="/en/guides/imports/#glob-patterns">glob patterns</a>.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/blog.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">const </span><span style="--0:#91b4ff;--1:#2c4984">posts</span><span style="--0:#d0a3ed;--1:#663383"> = await </span><span style="--0:#D6DEEB;--1:#403F53">Astro</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">glob</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">./posts/*.md</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">const </span><span style="--0:#94b6ff;--1:#2d4a87">posts</span><span style="--0:#d2a6ee;--1:#6a3588"> = </span><span style="--0:#D6DEEB;--1:#403F53">Object</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">values</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#d2a6ee;--1:#6a3588">import.</span><span style="--0:#7FDBCA;--1:#075457">meta</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">glob</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">./posts/*.md</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#d2a6ee;--1:#6a3588">, { eager: </span><span style="--0:#ff99aa;--1:#7a3636">true</span><span style="--0:#d2a6ee;--1:#6a3588"> }</span><span style="--0:#D6DEEB;--1:#403F53">));</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#D6DEEB;--1:#403F53">posts</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">map</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">post</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">li</span><span style="--0:#7FDBCA">>&#x3C;</span><span style="--0:#CAECE6">a</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">href</span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#D6DEEB;--1:#403F53">post</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">url</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#7FDBCA;--1:#8844AE">></span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#D6DEEB;--1:#403F53">post</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">frontmatter</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">title</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">a</span><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">li</span><span style="--0:#7FDBCA">></span></span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#E2817F;--1:#B23834">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---const posts = await Astro.glob(&#x27;./posts/*.md&#x27;);const posts = Object.values(import.meta.glob(&#x27;./posts/*.md&#x27;, { eager: true }));---{posts.map((post) => <li><a href={post.url}>{post.frontmatter.title}</a></li>)}"><div></div></button></div></figure></div>
<p>Where appropriate, consider using <a href="/en/guides/content-collections/">content collections</a> to organize your content, which has its own newer, more performant querying functions.</p>
<p>You may also wish to consider using glob packages from NPM, such as <a href="https://www.npmjs.com/package/fast-glob"><code dir="auto">fast-glob</code></a>.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Learn more about <a href="/en/guides/imports/#importmetaglob">importing files with <code dir="auto">import.meta.glob</code></a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="deprecated-functionperroute-adapter-api">Deprecated: <code dir="auto">functionPerRoute</code> (Adapter API)</h3><a class="sl-anchor-link" href="#deprecated-functionperroute-adapter-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Deprecated: functionPerRoute (Adapter API)”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11714" class="astro-ro74hpkt">Implementation PR: Remove functionPerRoute option (#11714)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, you could opt into creating a separate file for each route defined in the project, mirroring your <code dir="auto">src/pages/</code> directory in the build folder. By default, Astro emitted a single <code dir="auto">entry.mjs</code> file, which was responsible for emitting the rendered page on each request.</p>
<p>Astro v5.0 removes the option to opt out of the default behavior. This behavior is now standard, and non-configurable.</p>
<p>Remove the <code dir="auto">functionPerRoute</code> property from your <code dir="auto">adapterFeatures</code> configuration. It is no longer available.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">my-adapter.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">createIntegration</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">name: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">@matthewp/my-adapter</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">hooks: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:config:done</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D6DEEB">{ </span><span style="--0:#D7DBE0">setAdapter</span><span style="--0:#D6DEEB"> }</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#82AAFF;--1:#3B61B0">setAdapter</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">name: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">@matthewp/my-adapter</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">serverEntrypoint: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">@matthewp/my-adapter/server.js</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">adapterFeatures: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">              </span></span><span style="--0:#D6DEEB;--1:#403F53">functionPerRoute: </span><span style="--0:#ff96a8;--1:#7a3636">true</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">};</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="export default function createIntegration() {  return {    name: &#x27;@matthewp/my-adapter&#x27;,    hooks: {      &#x27;astro:config:done&#x27;: ({ setAdapter }) => {        setAdapter({          name: &#x27;@matthewp/my-adapter&#x27;,          serverEntrypoint: &#x27;@matthewp/my-adapter/server.js&#x27;,          adapterFeatures: {              functionPerRoute: true          }        });      },    },  };}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Learn more about <a href="/en/reference/adapter-reference/">the Adapter API</a> for building adapter integrations.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="deprecated-routes-on-astrobuilddone-hook-integration-api">Deprecated: <code dir="auto">routes</code> on <code dir="auto">astro:build:done</code> hook (Integration API)</h3><a class="sl-anchor-link" href="#deprecated-routes-on-astrobuilddone-hook-integration-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Deprecated: routes on astro:build:done hook (Integration API)”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/12329" class="astro-ro74hpkt">Implementation PR: feat(next): astro:routes:resolved (#12329)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, integrations accessed routes from the <code dir="auto">astro:build:done</code> hook.</p>
<p>Astro v5.0 deprecates the <code dir="auto">routes</code> array passed to this hook. Instead, it exposes a new <code dir="auto">astro:routes:resolved</code> hook that runs before <code dir="auto">astro:config:done</code>, and whenever a route changes in development. It has all the same properties of the deprecated <code dir="auto">routes</code> list, except <code dir="auto">distURL</code> which is only available during build.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-4">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-4"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Remove any instance of <code dir="auto">routes</code> passed to <code dir="auto">astro:build:done</code> and replace it with the new <code dir="auto">astro:routes:resolved</code> hook. Access <code dir="auto">distURL</code> on the newly exposed <code dir="auto">assets</code> map:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">my-integration.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">integration</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">    </span>let </span><span style="--0:#D7DBE0;--1:#403F53">routes</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">return {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">        </span></span><span style="--0:#C792EA;--1:#8844AE">name: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">my-integration</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">        </span></span><span style="--0:#C792EA;--1:#8844AE">hooks: {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">            </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">astro:routes:resolved</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#d2a6ee;--1:#6a3588">: </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">params</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#d2a6ee;--1:#6a3588"> => {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">                </span><span style="--0:#D7DBE0;--1:#403F53">routes</span><span style="--0:#d2a6ee;--1:#6a3588"> = </span><span style="--0:#7FDBCA;--1:#075457">params</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#7FDBCA;--1:#075457">routes</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">            </span>},</span></div></div><div class="ec-line"><div class="code"><span class="indent">            </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:build:done</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE">: </span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">{</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent">                </span><span style="--0:#D7DBE0;--1:#403F53">routes</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">                </span><span style="--0:#D7DBE0;--1:#403F53">assets</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">            </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">                </span>for </span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#d2a6ee;--1:#6a3588">const </span><span style="--0:#94b6ff;--1:#2d4a87">route</span><span style="--0:#d2a6ee;--1:#6a3588"> </span><span style="--0:#7FDBCA;--1:#075457">of</span><span style="--0:#d2a6ee;--1:#6a3588"> </span><span style="--1:#403F53"><span style="--0:#D7DBE0">routes</span><span style="--0:#D6DEEB">)</span></span><span style="--0:#d2a6ee;--1:#6a3588"> {</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">                    </span>const </span><span style="--0:#94b6ff;--1:#2d4a87">distURL</span><span style="--0:#d2a6ee;--1:#6a3588"> = </span><span style="--0:#7FDBCA;--1:#075457">assets</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">get</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#075457">route</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#7FDBCA;--1:#075457">pattern</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">                    </span>if </span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">distURL</span><span style="--0:#D6DEEB">)</span></span><span style="--0:#d2a6ee;--1:#6a3588"> {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">                        </span><span style="--0:#7FDBCA;--1:#075457">Object</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">assign</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">route</span></span><span style="--0:#d2a6ee;--1:#6a3588">, { </span><span style="--0:#D7DBE0;--1:#403F53">distURL</span><span style="--0:#d2a6ee;--1:#6a3588"> }</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">                    </span>}</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588"><span class="indent">                </span>}</span></div></div><div class="ec-line"><div class="code"><span class="indent">                </span><span style="--0:#7FDBCA;--1:#096E72">console</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">log</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">routes</span><span style="--0:#D6DEEB">)</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">            </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">        </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const integration = () => {    let routes    return {        name: &#x27;my-integration&#x27;,        hooks: {            &#x27;astro:routes:resolved&#x27;: (params) => {                routes = params.routes            },            &#x27;astro:build:done&#x27;: ({                routes                assets            }) => {                for (const route of routes) {                    const distURL = assets.get(route.pattern)                    if (distURL) {                        Object.assign(route, { distURL })                    }                }                console.log(routes)            }        }    }}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Learn more about <a href="/en/reference/integrations-reference/#astroroutesresolved">the Integration API <code dir="auto">astro:routes:resolved</code> hook</a> for building integrations.</span>
</div>
<div class="sl-heading-wrapper level-h2"><h2 id="removed">Removed</h2><a class="sl-anchor-link" href="#removed"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed”</span></a></div>
<p>The following features have now been entirely removed from the code base and can no longer be used. Some of these features may have continued to work in your project even after deprecation. Others may have silently had no effect.</p>
<p>Projects now containing these removed features will be unable to build, and there will no longer be any supporting documentation prompting you to remove these features.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="removed-the-lit-integration">Removed: The Lit integration</h3><a class="sl-anchor-link" href="#removed-the-lit-integration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed: The Lit integration”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11680" class="astro-ro74hpkt">Implementation PR: Remove `@astrojs/lit` (#11680)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, <a href="https://lit.dev/">Lit</a> was a core-maintained framework library through the <code dir="auto">@astrojs/lit</code> package.</p>
<p>Astro v5.0 removes the integration and it will not receive further updates for compatibility with 5.x and above.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-5">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-5"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>You can continue to use Lit for client components by adding a client-side script tag. For example:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">script</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">../components/MyTabs</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">script</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">my-tabs</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">title</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">These are my tabs</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53">...</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">my-tabs</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<script>  import &#x22;../components/MyTabs&#x22;;</script><my-tabs title=&#x22;These are my tabs&#x22;>...</my-tabs>"><div></div></button></div></figure></div>
<p>If you’re interested in maintaining a Lit integration yourself, you may wish to use the <a href="https://github.com/withastro/astro/tree/astro%404.13.0/packages/integrations/lit">last published version of <code dir="auto">@astrojs/lit</code></a> as a starting point and upgrade the relevant packages.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Learn more about <a href="/en/guides/integrations-guide/">Astro’s official integrations</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="removed-hybrid-rendering-mode">Removed: <code dir="auto">hybrid</code> rendering mode</h3><a class="sl-anchor-link" href="#removed-hybrid-rendering-mode"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed: hybrid rendering mode”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11824" class="astro-ro74hpkt">Implementation PR: Merge output:hybrid and output:static (#11824)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, Astro provided three rendering <code dir="auto">output</code> rendering modes: <code dir="auto">'static'</code>, <code dir="auto">'hybrid'</code>, and <code dir="auto">'server'</code></p>
<p>Astro v5.0 merges the <code dir="auto">output: 'hybrid'</code> and <code dir="auto">output: 'static'</code> configurations into one single configuration (now called <code dir="auto">'static'</code>) that works the same way as the previous hybrid option.</p>
<p>It is no longer necessary to specify <code dir="auto">output: 'hybrid'</code> in your Astro config to use server-rendered pages. The new <code dir="auto">output: 'static'</code> has this capability included.</p>
<p>Astro will now automatically allow you to opt out of prerendering in your static site with no change to your output configuration required. Any page route or endpoint can include <code dir="auto">export const prerender = false</code> to be server-rendered on demand, while the rest of your site is statically generated.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-6">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-6"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If your project used hybrid rendering, you must now remove the <code dir="auto">output: 'hybrid'</code> option from your Astro config as it no longer exists. However, no other changes to your project are required, and you should have no breaking changes. The previous <code dir="auto">'hybrid'</code> behavior is now the default, under a new name <code dir="auto">'static'</code>.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">astro.config.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineConfig } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">astro/config</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">defineConfig</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">output: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">hybrid</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { defineConfig } from &#x22;astro/config&#x22;;export default defineConfig({  output: &#x27;hybrid&#x27;,});"><div></div></button></div></figure></div>
<p>If you were using the <code dir="auto">output: 'static'</code> (default) option, you can continue to use it as before. By default, all of your pages will continue to be prerendered and you will have a completely static site. You should have no breaking changes to your project.</p>
<p>An adapter is still required to deploy an Astro project with any server-rendered pages, no matter which <code dir="auto">output</code> mode your project uses. Failure to include an adapter will result in a warning in development and an error at build time.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Learn more about <a href="/en/guides/on-demand-rendering/">on-demand rendering in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="removed-support-for-dynamic-prerender-values-in-routes">Removed: support for dynamic <code dir="auto">prerender</code> values in routes</h3><a class="sl-anchor-link" href="#removed-support-for-dynamic-prerender-values-in-routes"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed: support for dynamic prerender values in routes”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11824" class="astro-ro74hpkt">Implementation PR: Merge output:hybrid and output:static (#11824)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, environment variables could be used to dynamically set the value of <code dir="auto">prerender</code> exports in routes, for example <code dir="auto">export const prerender =  import.meta.env.SOME_VAR</code>.</p>
<p>Astro v5.0 removes support for dynamic values in <code dir="auto">prerender</code> exports. Only the static values <code dir="auto">true</code> and <code dir="auto">false</code> are supported.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-7">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-7"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<ol role="list" class="sl-steps">
<li>
<p>Remove any dynamic <code dir="auto">prerender</code> exports in your routes:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/blog/[slug].astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">export const </span><span style="--0:#91b4ff;--1:#2c4984">prerender</span><span style="--0:#d0a3ed;--1:#663383"> = import.</span><span style="--0:#7FDBCA;--1:#075356">meta</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#FAF39F;--1:#111111">env</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">SOME_VAR</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---export const prerender = import.meta.env.SOME_VAR;---"><div></div></button></div></figure></div>
</li>
<li>
<p>Use an Astro integration in your <code dir="auto">astro.config.mjs</code> file to set <code dir="auto">prerender</code> values that need to be dynamic in the <code dir="auto">"astro:route:setup"</code> hook:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">astro.config.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineConfig } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro/config</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { loadEnv } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">vite</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">defineConfig</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">integrations: [</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">name: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#804241">set-prerender</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">hooks: {</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#804241">astro:route:setup</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D6DEEB">{ </span><span style="--0:#D7DBE0">route</span><span style="--0:#D6DEEB"> }</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#d0a4ed;--1:#753a96">=></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent">          </span><span style="--0:#adb7b7;--1:#4e5464">// Load environment variables from .env files (if needed)</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent">          </span><span style="--0:#d0a4ed;--1:#753a96">const { </span><span style="--0:#91b4ff;--1:#325295">PRERENDER</span><span style="--0:#d0a4ed;--1:#753a96"> } = </span><span style="--0:#91b4ff;--1:#325295">loadEnv</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#7FDBCA;--1:#085f62">process</span><span style="--0:#d0a4ed;--1:#753a96">.</span><span style="--0:#FAF39F;--1:#111111">env</span><span style="--0:#d0a4ed;--1:#753a96">.</span><span style="--0:#91b4ff;--1:#325295">NODE_ENV</span><span style="--0:#d0a4ed;--1:#753a96">, </span><span style="--0:#7FDBCA;--1:#085f62">process</span><span style="--0:#d0a4ed;--1:#753a96">.</span><span style="--0:#91b4ff;--1:#325295">cwd</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#d0a4ed;--1:#753a96">, </span><span style="--0:#D9F5DD;--1:#111111">''</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent">          </span><span style="--0:#adb7b7;--1:#4e5464">// Find routes matching the expected filename.</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent">          </span><span style="--0:#d0a4ed;--1:#753a96">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#7FDBCA;--1:#085f62">route</span><span style="--0:#d0a4ed;--1:#753a96">.</span><span style="--0:#FAF39F;--1:#111111">component</span><span style="--0:#d0a4ed;--1:#753a96">.</span><span style="--0:#91b4ff;--1:#325295">endsWith</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#804241">/blog/[slug].astro</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)) {</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent">            </span><span style="--0:#adb7b7;--1:#4e5464">// Set the prerender value on routes as needed.</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent">            </span><span style="--0:#7FDBCA;--1:#085f62">route</span><span style="--0:#d0a4ed;--1:#753a96">.</span><span style="--0:#7FDBCA;--1:#085f62">prerender</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#d0a4ed;--1:#753a96">=</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#325295">PRERENDER</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">          </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line highlight mark"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">],</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { defineConfig } from &#x27;astro/config&#x27;;import { loadEnv } from &#x27;vite&#x27;;export default defineConfig({  integrations: [    {      name: &#x27;set-prerender&#x27;,      hooks: {        &#x27;astro:route:setup&#x27;: ({ route }) => {          // Load environment variables from .env files (if needed)          const { PRERENDER } = loadEnv(process.env.NODE_ENV, process.cwd(), &#x27;&#x27;);          // Find routes matching the expected filename.          if (route.component.endsWith(&#x27;/blog/[slug].astro&#x27;)) {            // Set the prerender value on routes as needed.            route.prerender = PRERENDER;          }        },      },    }  ],});"><div></div></button></div></figure></div>
</li>
</ol>


<div class="sl-heading-wrapper level-h3"><h3 id="removed-squoosh-image-service">Removed: Squoosh image service</h3><a class="sl-anchor-link" href="#removed-squoosh-image-service"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed: Squoosh image service”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11770" class="astro-ro74hpkt">Implementation PR: remove the squoosh image service (#11770)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, you could configure <code dir="auto">image.service: squooshImageService()</code> to use Squoosh to transform your images instead of Sharp. However, the underlying library <code dir="auto">libsquoosh</code> is no longer maintained and has memory and performance issues.</p>
<p>Astro 5.0 removes the Squoosh image optimization service entirely.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-8">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-8"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>To switch to the built-in Sharp image service, remove the <code dir="auto">squooshImageService</code> import from your Astro config. By default, you will use Sharp for <code dir="auto">astro:assets</code>.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">astro.config.mjs</span></figcaption><pre data-language="ts"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">import</span><span style="--0:#D6DEEB;--1:#403F53"> { squooshImageService } </span><span style="--0:#d0a3ed;--1:#663383">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">astro/config</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineConfig } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">astro/config</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">defineConfig</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53"> </span></span><span style="--0:#D6DEEB;--1:#403F53">image: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">   </span></span><span style="--0:#D6DEEB;--1:#403F53">service: </span><span style="--0:#91b4ff;--1:#2c4984">squooshImageService</span><span style="--0:#D6DEEB;--1:#403F53">()</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53"> </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { squooshImageService } from &#x22;astro/config&#x22;;import { defineConfig } from &#x22;astro/config&#x22;;export default defineConfig({ image: {   service: squooshImageService() }});"><div></div></button></div></figure></div>
<p>If you are using a strict package manager like <code dir="auto">pnpm</code>, you may need to install the <code dir="auto">sharp</code> package manually to use the Sharp image service, even though it is built into Astro by default.</p>
<p>If your adapter does not support Astro’s built-in Sharp image optimization, you can <a href="/en/guides/images/#configure-no-op-passthrough-service">configure a no-op image service</a> to allow you to use the <code dir="auto">&#x3C;Image /></code> and <code dir="auto">&#x3C;Picture /></code> components.</p>
<p>Alternatively, you may wish to consider <a href="https://github.com/Princesseuh/astro-image-service-squoosh">a community-maintained Squoosh image service</a> if you are unable to use the Sharp image service.</p>
<div class="sl-heading-wrapper level-h5"><h5 id="for-adapters">For adapters</h5><a class="sl-anchor-link" href="#for-adapters"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “For adapters”</span></a></div>
<p>If your adapter previously precised its compatibility status with Squoosh, you should now remove this information from your adapter configuration.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">my-adapter.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">supportedAstroFeatures: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">assets: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">isSquooshCompatible: </span><span style="--0:#ff96a8;--1:#7a3636">true</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="supportedAstroFeatures: {  assets: {    isSquooshCompatible: true  }}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/images/#default-image-service">configuring your default image service</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="removed-some-public-facing-types">Removed: some public-facing types</h3><a class="sl-anchor-link" href="#removed-some-public-facing-types"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed: some public-facing types”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11715" class="astro-ro74hpkt">Implementation PR: Refactor/types (#11715)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, <code dir="auto">@types/astro.ts</code> exposed all types publicly to users, whether or not they were still actively used or only intended for internal use.</p>
<p>Astro v5.0 refactors this file to remove outdated and internal types. This refactor brings improvements to your editor (e.g. faster completions, lower memory usage, and more relevant completion options). However, this refactor may cause errors in some projects that have been relying on types that are no longer available to the public.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-9">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-9"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Remove any types that now cause errors in your project as you no longer have access to them. These are mostly APIs that have previously been deprecated and removed, but may also include types that are now internal.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">See the <a href="https://github.com/withastro/astro/tree/main/packages/astro/src/types/public">public types exposed for use</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="experimental-flags">Experimental Flags</h3><a class="sl-anchor-link" href="#experimental-flags"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Experimental Flags”</span></a></div>
<p>The following experimental flags have been removed in Astro v5.0 and these features are available for use:</p>
<ul>
<li><code dir="auto">env</code></li>
<li><code dir="auto">serverIslands</code></li>
</ul>
<p>Additionally, the following experimental flags have been removed and <strong>are now the default or recommended behavior in Astro v5.0</strong>.</p>
<ul>
<li><code dir="auto">directRenderScript</code> (See below for breaking changes to <a href="#script-tags-are-rendered-directly-as-declared">default <code dir="auto">&#x3C;script></code> behavior</a>.)</li>
<li><code dir="auto">globalRoutePriority</code> (See below for breaking changes to <a href="#route-priority-order-for-injected-routes-and-redirects">default route priority order</a>.)</li>
<li><code dir="auto">contentLayer</code> (See guidance for <a href="#legacy-v20-content-collections-api">upgrading existing content collections</a> to the new, preferred Content Layer API.)</li>
</ul>
<p>The following experimental flags have been removed and <strong>their corresponding features are not part of Astro v5.0</strong>.</p>
<ul>
<li><code dir="auto">contentCollectionsCache</code></li>
</ul>
<p>Remove these experimental flags if you were previously using them, and move your <code dir="auto">env</code> configuration to the root of your Astro config:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">astro.config.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineConfig } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro/config</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">defineConfig</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">experimental: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">directRenderScript: </span><span style="--0:#ff96a8;--1:#7a3636">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">globalRoutePriority: </span><span style="--0:#ff96a8;--1:#7a3636">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">contentLayer: </span><span style="--0:#ff96a8;--1:#7a3636">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">serverIslands: </span><span style="--0:#ff96a8;--1:#7a3636">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">contentCollectionsCache: </span><span style="--0:#ff96a8;--1:#7a3636">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">env: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">schema: {</span><span style="--0:#7FDBCA;--1:#075356">...</span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">env: {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">schema: {</span><span style="--0:#7FDBCA;--1:#075457">...</span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { defineConfig } from &#x27;astro/config&#x27;;export default defineConfig({  experimental: {    directRenderScript: true,    globalRoutePriority: true,    contentLayer: true,    serverIslands: true,    contentCollectionsCache: true,    env: {      schema: {...}    }  },  env: {      schema: {...}  }})"><div></div></button></div></figure></div>
<p>These features are all available by default in Astro v5.0.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read about these exciting features and more in <a href="https://astro.build/blog/astro-5/">the v5.0 Blog post</a>.</span>
</div>
<div class="sl-heading-wrapper level-h2"><h2 id="changed-defaults">Changed Defaults</h2><a class="sl-anchor-link" href="#changed-defaults"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed Defaults”</span></a></div>
<p>Some default behavior has changed in Astro v5.0 and your project code may need updating to account for these changes.</p>
<p>In most cases, the only action needed is to review your existing project’s deployment and ensure that it continues to function as you expect, making updates to your code as necessary. In some cases, there may be a configuration setting to allow you to continue to use the previous default behavior.</p>
<div class="sl-heading-wrapper level-h3"><h3 id="csrf-protection-is-now-set-by-default">CSRF protection is now set by default</h3><a class="sl-anchor-link" href="#csrf-protection-is-now-set-by-default"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “CSRF protection is now set by default”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11788" class="astro-ro74hpkt">Implementation PR: change default value of checkOrigin (#11788)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, The default value of <code dir="auto">security.checkOrigin</code> was <code dir="auto">false</code>. Previously, you had to explicitly set this value to <code dir="auto">true</code> to enable Cross-Site Request Forgery (CSRF) protection.</p>
<p>Astro v5.0 changes the default value of this option to <code dir="auto">true</code>, and will automatically check that the “origin” header matches the URL sent by each request in on-demand rendered pages.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-10">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-10"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you had previously configured <code dir="auto">security.checkOrigin: true</code>, you no longer need this line in your Astro config. This is now the default.</p>
<p>To disable this behavior, you must explicitly set  <code dir="auto">security.checkOrigin: false</code>.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">astro.config.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">defineConfig</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">output: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">server</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">security: {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">checkOrigin: </span><span style="--0:#ff99aa;--1:#7a3636">false</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="export default defineConfig({  output: &#x22;server&#x22;,  security: {    checkOrigin: false  }})"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/configuration-reference/#security">security configuration options</a></span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="route-priority-order-for-injected-routes-and-redirects">Route priority order for injected routes and redirects</h3><a class="sl-anchor-link" href="#route-priority-order-for-injected-routes-and-redirects"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Route priority order for injected routes and redirects”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11798" class="astro-ro74hpkt">Implementation PR: Remove legacy route prioritization (#11798)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, <code dir="auto">experimental.globalRoutePriority</code> was an optional flag that ensured that injected routes, file-based routes, and redirects were all prioritized using the <a href="/en/guides/routing/#route-priority-order">route priority order rules for all routes</a>. This allowed more control over routing in your project by not automatically prioritizing certain kinds of routes and standardizing the route priority order.</p>
<p>Astro v5.0 removes this experimental flag and makes this the new default behavior in Astro: redirects and injected routes are now prioritized equally alongside file-based project routes.</p>
<p>Note that this was already the default behavior in Starlight, and should not affect updated Starlight projects.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-11">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-11"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If your project includes injected routes or redirects, please check that your routes are building page URLs as expected. An example of the new expected behavior is shown below.</p>
<p>In a project containing the following routes:</p>
<ul>
<li>File-based route: <code dir="auto">/blog/post/[pid]</code></li>
<li>File-based route: <code dir="auto">/[page]</code></li>
<li>Injected route: <code dir="auto">/blog/[...slug]</code></li>
<li>Redirect: <code dir="auto">/blog/tags/[tag] -> /[tag]</code></li>
<li>Redirect: <code dir="auto">/posts -> /blog</code></li>
</ul>
<p>The following URLs will be built (instead of following the route priority order of Astro v4.x):</p>
<ul>
<li><code dir="auto">/blog/tags/astro</code> is built by the redirect to <code dir="auto">/tags/[tag]</code> (instead of the injected route <code dir="auto">/blog/[...slug]</code>)</li>
<li><code dir="auto">/blog/post/0</code> is built by the file-based route <code dir="auto">/blog/post/[pid]</code> (instead of the injected route <code dir="auto">/blog/[...slug]</code>)</li>
<li><code dir="auto">/posts</code> is built by the redirect to <code dir="auto">/blog</code> (instead of the file-based route <code dir="auto">/[page]</code>)</li>
</ul>
<p>In the event of route collisions, where two routes of equal route priority attempt to build the same URL, Astro will log a warning identifying the conflicting routes.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about the <a href="/en/guides/routing/#route-priority-order">route priority order rules</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="script-tags-are-rendered-directly-as-declared"><code dir="auto">&#x3C;script></code> tags are rendered directly as declared</h3><a class="sl-anchor-link" href="#script-tags-are-rendered-directly-as-declared"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “&#x3C;script> tags are rendered directly as declared”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11791" class="astro-ro74hpkt">Implementation PR: Make directRenderScript the default (#11791)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, <code dir="auto">experimental.directRenderScript</code> was an optional flag to directly render <code dir="auto">&#x3C;scripts></code> as declared in <code dir="auto">.astro</code> files (including existing features like TypeScript, importing <code dir="auto">node_modules</code>, and deduplicating scripts). This strategy prevented scripts from being executed in places where they were not used. Additionally, conditionally rendered scripts were previously implicitly inlined, as if an <code dir="auto">is:inline</code> directive was automatically added to them.</p>
<p>Astro 5.0 removes this experimental flag and makes this the new default behavior in Astro: scripts are no longer hoisted to the <code dir="auto">&#x3C;head></code>, multiple scripts on a page are no longer bundled together, and a <code dir="auto">&#x3C;script></code> tag may interfere with CSS styling. Additionally, conditionally rendered scripts are no longer implicitly inlined.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-12">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-12"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Please review your <code dir="auto">&#x3C;script></code> tags and ensure they behave as desired.</p>
<p>If you previously had conditionally rendered <code dir="auto">&#x3C;script></code> tags, you will need to add an <code dir="auto">is:inline</code> attribute to preserve the same behavior as before:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/components/MyComponent.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">type</span><span style="--0:#D6DEEB;--1:#403F53"> Props </span><span style="--0:#C792EA;--1:#8844AE">=</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">showAlert</span><span style="--0:#7FDBCA;--1:#096E72">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C5E478;--1:#3B61B0">boolean</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">showAlert</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">Astro</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">props</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#E2817F;--1:#B23834">{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">showAlert </span><span style="--0:#C792EA;--1:#8844AE">&#x26;&#x26;</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">script</span><span style="--0:#7FDBCA"> </span></span><ins><span style="--0:#C5E478;--1:#2d4a87">is</span><span style="--0:#7FDBCA;--1:#6a3588">:</span><span style="--0:#C5E478;--1:#2d4a87">inline</span></ins><span style="--0:#7FDBCA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53">alert("Some very important code!!")</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">script</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#E2817F;--1:#B23834">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---type Props = {  showAlert: boolean}const { showAlert } = Astro.props;---{  showAlert &#x26;&#x26; <script is:inline>alert(&#x22;Some very important code!!&#x22;)</script>}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/client-side-scripts/">using <code dir="auto">script</code> tags in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h2"><h2 id="breaking-changes">Breaking Changes</h2><a class="sl-anchor-link" href="#breaking-changes"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Breaking Changes”</span></a></div>
<p>The following changes are considered breaking changes in Astro v5.0. Breaking changes may or may not provide temporary backwards compatibility. If you were using these features, you may have to update your code as recommended in each entry.</p>

<div class="sl-heading-wrapper level-h3"><h3 id="renamed-viewtransitions--component">Renamed: <code dir="auto">&#x3C;ViewTransitions /></code> component</h3><a class="sl-anchor-link" href="#renamed-viewtransitions--component"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Renamed: &#x3C;ViewTransitions /> component”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11980" class="astro-ro74hpkt">Implementation PR: Rename the ViewTransitions component to ClientRouter (#11980)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, Astro’s View Transitions API included a <code dir="auto">&#x3C;ViewTransitions /></code> router component to enable client-side routing, page transitions, and more.</p>
<p>Astro 5.0 renames this component to <code dir="auto">&#x3C;ClientRouter /></code> to clarify the role of the component within the API. This makes it more clear that the features you get from Astro’s <code dir="auto">&#x3C;ClientRouter /></code> routing component are slightly different from the native CSS-based MPA router.</p>
<p>No functionality has changed. This component has only changed its name.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-13">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-13"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Replace all occurrences of the <code dir="auto">ViewTransitions</code> import and component with <code dir="auto">ClientRouter</code>:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/layouts/MyLayout.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">import </span><span style="--0:#eaa2a1;--1:#862a27">{</span><span style="--0:#D6DEEB;--1:#403F53"> ViewTransitions </span><span style="--0:#eaa2a1;--1:#862a27">}</span><span style="--0:#D6DEEB;--1:#403F53"> from 'astro:transitions';</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">import </span><span style="--0:#eaa5a4;--1:#882b28">{</span><span style="--0:#D6DEEB;--1:#403F53"> ClientRouter </span><span style="--0:#eaa5a4;--1:#882b28">}</span><span style="--0:#D6DEEB;--1:#403F53"> from 'astro:transitions';</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">html</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">head</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">...</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent">   </span><span style="--0:#7FDBCA;--1:#663383">&#x3C;</span><span style="--0:#C5E478;--1:#2c4984">ViewTransitions</span><span style="--0:#7FDBCA;--1:#663383"> /></span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">   </span><span style="--0:#7FDBCA;--1:#6a3588">&#x3C;</span><span style="--0:#C5E478;--1:#2d4a87">ClientRouter</span><span style="--0:#7FDBCA;--1:#6a3588"> /></span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">head</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">html</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { ViewTransitions } from &#x27;astro:transitions&#x27;;import { ClientRouter } from &#x27;astro:transitions&#x27;;<html>  <head>    ...   <ViewTransitions />   <ClientRouter />  </head></html>"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/view-transitions/">view transitions and client-side routing in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-typescript-configuration">Changed: TypeScript configuration</h3><a class="sl-anchor-link" href="#changed-typescript-configuration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: TypeScript configuration”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11859" class="astro-ro74hpkt">Implementation PR: better tsconfig (#11859)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, Astro relied on a <code dir="auto">src/env.d.ts</code> file for type inferencing and defining modules for features that relied on generated types.</p>
<p>Astro 5.0 instead uses a <code dir="auto">.astro/types.d.ts</code> file for type inferencing, and now recommends setting <code dir="auto">include</code> and <code dir="auto">exclude</code> in <code dir="auto">tsconfig.json</code> to benefit from Astro types and avoid checking built files.</p>
<p>Running <code dir="auto">astro sync</code> no longer creates, nor updates, <code dir="auto">src/env.d.ts</code> as it is not required for type-checking standard Astro projects.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-14">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-14"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>To update your project to Astro’s recommended TypeScript settings, add the following <code dir="auto">include</code> and <code dir="auto">exclude</code> properties to your existing <code dir="auto">tsconfig.json</code>:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">tsconfig.json</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">extends</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">astro/tsconfigs/base</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">include</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">: [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">.astro/types.d.ts</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">, </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">**/*</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">],</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">exclude</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">: [</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">dist</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;extends&#x22;: &#x22;astro/tsconfigs/base&#x22;,  &#x22;include&#x22;: [&#x22;.astro/types.d.ts&#x22;, &#x22;**/*&#x22;],  &#x22;exclude&#x22;: [&#x22;dist&#x22;]}"><div></div></button></div></figure></div>
<p>Note that <code dir="auto">src/env.d.ts</code> is only necessary if you have added custom configurations, or if you’re not using a <code dir="auto">tsconfig.json</code> file.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/typescript/#setup">TypeScript configuration in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-actions-submitted-by-html-forms-no-longer-use-cookie-redirects">Changed: Actions submitted by HTML forms no longer use cookie redirects</h3><a class="sl-anchor-link" href="#changed-actions-submitted-by-html-forms-no-longer-use-cookie-redirects"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: Actions submitted by HTML forms no longer use cookie redirects”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/12373" class="astro-ro74hpkt">Implementation PR: Actions middleware (#12373)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, actions called from an HTML form would trigger a redirect with the result forwarded using cookies. This caused issues for large form errors and return values that exceeded the 4 KB limit of cookie-based storage.</p>
<p>Astro 5.0 now renders the result of an action as a POST result without any forwarding. This will introduce a “confirm form resubmission?” dialog when a user attempts to refresh the page, though it no longer imposes a 4 KB limit on action return value.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-15">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-15"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>You should update handling for action results that relies on redirects, and optionally address the “confirm form resubmission?” dialog with middleware.</p>
<div class="sl-heading-wrapper level-h5"><h5 id="to-redirect-to-the-previous-route-on-error">To redirect to the previous route on error</h5><a class="sl-anchor-link" href="#to-redirect-to-the-previous-route-on-error"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “To redirect to the previous route on error”</span></a></div>
<p>If your HTML form action is directed to a different route (i.e. <code dir="auto">action={"/success-page" + actions.name}</code>), Astro will no longer redirect to the previous route on error. You can implement this behavior manually using redirects from your Astro component. This example instead redirects to a new route on success, and handles errors on the current page otherwise:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/newsletter.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { actions } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:actions</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">const </span><span style="--0:#94b6ff;--1:#2d4a87">result</span><span style="--0:#d2a6ee;--1:#6a3588"> = </span><span style="--0:#D6DEEB;--1:#403F53">Astro</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">getActionResult</span><span style="--0:#D6DEEB;--1:#403F53">(actions</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#7FDBCA;--1:#075457">newsletter</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#d2a6ee;--1:#6a3588">!</span><span style="--0:#D6DEEB;--1:#403F53">result</span><span style="--0:#d2a6ee;--1:#6a3588">?.</span><span style="--0:#7FDBCA;--1:#075457">error</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#aeb8b8;--1:#474c5a">// Embed relevant result data in the URL if needed</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#aeb8b8;--1:#474c5a">// example: redirect(`/confirmation?email=${result.data.email}`);</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#d2a6ee;--1:#6a3588">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#94b6ff;--1:#2d4a87">redirect</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">/confirmation</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">form</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">method</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">POST</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#8844AE"> </span><span style="--0:#C5E478;--1:#3B61B0">action</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><del><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">/confirmation</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--1:#663383"><span style="--0:#7FDBCA"> </span><span style="--0:#d0a3ed">+</span><span style="--0:#7FDBCA"> </span></span></del><span style="--0:#D6DEEB;--1:#403F53">actions</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">newsletter</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#7FDBCA;--1:#8844AE">></span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">label</span><span style="--0:#7FDBCA">></span></span><span style="--0:#D6DEEB;--1:#403F53">E-mail </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">input</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">required</span><span style="--0:#7FDBCA;--1:#8844AE"> </span><span style="--0:#C5E478;--1:#3B61B0">type</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">email</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#8844AE"> </span><span style="--0:#C5E478;--1:#3B61B0">name</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">email</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--1:#8844AE"><span style="--0:#7FDBCA"> />&#x3C;/</span><span style="--0:#CAECE6">label</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">button</span><span style="--0:#7FDBCA">></span></span><span style="--0:#D6DEEB;--1:#403F53">Sign up</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">button</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">form</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { actions } from &#x27;astro:actions&#x27;;const result = Astro.getActionResult(actions.newsletter);if (!result?.error) {  // Embed relevant result data in the URL if needed  // example: redirect(&#x60;/confirmation?email=${result.data.email}&#x60;);  return redirect(&#x27;/confirmation&#x27;);}---<form method=&#x22;POST&#x22; action={&#x27;/confirmation&#x27; + actions.newsletter}>  <label>E-mail <input required type=&#x22;email&#x22; name=&#x22;email&#x22; /></label>  <button>Sign up</button></form>"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h5"><h5 id="optional-to-remove-the-confirm-dialog-on-refresh">(Optional) To remove the confirm dialog on refresh</h5><a class="sl-anchor-link" href="#optional-to-remove-the-confirm-dialog-on-refresh"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “(Optional) To remove the confirm dialog on refresh”</span></a></div>
<p>To address the “confirm form resubmission?” dialog on refresh, or to preserve action results across sessions, you can now <a href="/en/guides/actions/#advanced-persist-action-results-with-a-session">customize action result handling from middleware</a>.</p>
<p>We recommend using a session storage provider <a href="/en/guides/actions/#advanced-persist-action-results-with-a-session">as described in our Netlify Blob example</a>. However, if you prefer the cookie forwarding behavior from 4.X and accept the 4 KB size limit, you can implement the pattern as shown in this sample snippet:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/middleware.ts</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineMiddleware } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:middleware</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { getActionContext } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:actions</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export const </span><span style="--0:#82AAFF;--1:#3B61B0">onRequest</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#82AAFF;--1:#3B61B0">defineMiddleware</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">async </span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">context</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#D7DBE0;--1:#403F53">next</span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#C792EA;--1:#8844AE"> => {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// Skip requests for prerendered pages</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">if </span><span style="--0:#D6DEEB;--1:#403F53">(context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">isPrerendered</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE"> return </span><span style="--0:#82AAFF;--1:#3B61B0">next</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">action</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#82AAFF;--1:#3B61B0">setActionResult</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#82AAFF;--1:#3B61B0">serializeActionResult</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#82AAFF;--1:#3B61B0">getActionContext</span><span style="--0:#D6DEEB;--1:#403F53">(context)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// If an action result was forwarded as a cookie, set the result</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// to be accessible from `Astro.getActionResult()`</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">payload</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">cookies</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">get</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">ACTION_PAYLOAD</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">if </span><span style="--0:#D6DEEB;--1:#403F53">(payload)</span><span style="--0:#C792EA;--1:#8844AE"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">actionName</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#82AAFF;--1:#3B61B0">actionResult</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">payload</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">json</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#82AAFF;--1:#3B61B0">setActionResult</span><span style="--0:#D6DEEB;--1:#403F53">(actionName</span><span style="--0:#C792EA;--1:#8844AE">, </span><span style="--0:#D6DEEB;--1:#403F53">actionResult)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D6DEEB;--1:#403F53">context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">cookies</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">delete</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">ACTION_PAYLOAD</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE">, { path: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE"> }</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">return </span><span style="--0:#82AAFF;--1:#3B61B0">next</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// If an action was called from an HTML form action,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#919F9F;--1:#5D6376">// call the action handler and redirect with the result as a cookie.</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">if </span><span style="--0:#D6DEEB;--1:#403F53">(action</span><span style="--0:#C792EA;--1:#8844AE">?.</span><span style="--0:#7FDBCA;--1:#096E72">calledFrom</span><span style="--0:#C792EA;--1:#8844AE"> === </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">form</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">actionResult</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#D6DEEB;--1:#403F53">action</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">handler</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#D6DEEB;--1:#403F53">context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">cookies</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">set</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">ACTION_PAYLOAD</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE">, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">actionName: </span><span style="--0:#D6DEEB;--1:#403F53">action</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">name</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">actionResult: </span><span style="--0:#82AAFF;--1:#3B61B0">serializeActionResult</span><span style="--0:#D6DEEB;--1:#403F53">(actionResult)</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}, {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">path: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">/</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">httpOnly: </span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">sameSite: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">lax</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#C792EA;--1:#8844AE">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">maxAge: </span><span style="--0:#F78C6C;--1:#AA0982">60</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">if </span><span style="--0:#D6DEEB;--1:#403F53">(actionResult</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">error</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// Redirect back to the previous page on error</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">referer</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">request</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#FAF39F;--1:#111111">headers</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">get</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">Referer</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">if </span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#C792EA;--1:#8844AE">!</span><span style="--0:#D6DEEB;--1:#403F53">referer)</span><span style="--0:#C792EA;--1:#8844AE"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">        </span></span><span style="--0:#C792EA;--1:#8844AE">throw </span><span style="--0:#7FDBCA;--1:#096E72">new</span><span style="--0:#C792EA;--1:#8844AE"> </span><span style="--0:#82AAFF;--1:#3B61B0">Error</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">Internal: Referer unexpectedly missing from Action POST request.</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">      </span></span><span style="--0:#C792EA;--1:#8844AE">return </span><span style="--0:#D6DEEB;--1:#403F53">context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">redirect</span><span style="--0:#D6DEEB;--1:#403F53">(referer)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// Redirect to the destination page on success</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">    </span></span><span style="--0:#C792EA;--1:#8844AE">return </span><span style="--0:#D6DEEB;--1:#403F53">context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">redirect</span><span style="--0:#D6DEEB;--1:#403F53">(context</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">originPathname</span><span style="--0:#D6DEEB;--1:#403F53">)</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#C792EA;--1:#8844AE">  </span></span><span style="--0:#C792EA;--1:#8844AE">return </span><span style="--0:#82AAFF;--1:#3B61B0">next</span><span style="--0:#D6DEEB;--1:#403F53">()</span><span style="--0:#C792EA;--1:#8844AE">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">}</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { defineMiddleware } from &#x27;astro:middleware&#x27;;import { getActionContext } from &#x27;astro:actions&#x27;;export const onRequest = defineMiddleware(async (context, next) => {  // Skip requests for prerendered pages  if (context.isPrerendered) return next();  const { action, setActionResult, serializeActionResult } = getActionContext(context);  // If an action result was forwarded as a cookie, set the result  // to be accessible from &#x60;Astro.getActionResult()&#x60;  const payload = context.cookies.get(&#x27;ACTION_PAYLOAD&#x27;);  if (payload) {    const { actionName, actionResult } = payload.json();    setActionResult(actionName, actionResult);    context.cookies.delete(&#x27;ACTION_PAYLOAD&#x27;, { path: &#x27;/&#x27; });    return next();  }  // If an action was called from an HTML form action,  // call the action handler and redirect with the result as a cookie.  if (action?.calledFrom === &#x27;form&#x27;) {    const actionResult = await action.handler();    context.cookies.set(&#x27;ACTION_PAYLOAD&#x27;, {      actionName: action.name,      actionResult: serializeActionResult(actionResult),    }, {      path: &#x27;/&#x27;,      httpOnly: true,      sameSite: &#x27;lax&#x27;,      maxAge: 60    });    if (actionResult.error) {    // Redirect back to the previous page on error      const referer = context.request.headers.get(&#x27;Referer&#x27;);      if (!referer) {        throw new Error(&#x27;Internal: Referer unexpectedly missing from Action POST request.&#x27;);      }      return context.redirect(referer);    }    // Redirect to the destination page on success    return context.redirect(context.originPathname);  }  return next();})"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-compiledcontent-is-now-an-async-function">Changed: <code dir="auto">compiledContent()</code> is now an async function</h3><a class="sl-anchor-link" href="#changed-compiledcontent-is-now-an-async-function"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: compiledContent() is now an async function”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11782" class="astro-ro74hpkt">Implementation PR: Remove TLA by making compiledContent async (#11782)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, top level await was included in Markdown modules. This caused some issues with custom image services and images inside Markdown, causing Node to suddenly exit with no error message.</p>
<p>Astro 5.0 makes the <code dir="auto">compiledContent()</code> property on Markdown import an async function, requiring an <code dir="auto">await</code> to resolve the content.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-16">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-16"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Update your code to use <code dir="auto">await</code> when calling <code dir="auto">compiledContent()</code>.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/post.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">*</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">as</span><span style="--0:#D6DEEB;--1:#403F53"> myPost </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">../blog/post.md</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">const </span><span style="--0:#91b4ff;--1:#2c4984">content</span><span style="--0:#d0a3ed;--1:#663383"> = </span><span style="--0:#D6DEEB;--1:#403F53">myPost</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">compiledContent</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">const </span><span style="--0:#94b6ff;--1:#2d4a87">content</span><span style="--0:#d2a6ee;--1:#6a3588"> = await </span><span style="--0:#D6DEEB;--1:#403F53">myPost</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">compiledContent</span><span style="--0:#D6DEEB;--1:#403F53">();</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#8844AE">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">Fragment</span><span style="--0:#7FDBCA;--1:#8844AE"> </span><span style="--0:#C5E478;--1:#3B61B0">set:html</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#D6DEEB;--1:#403F53">content</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#7FDBCA;--1:#8844AE"> /></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import * as myPost from &#x22;../blog/post.md&#x22;;const content = myPost.compiledContent();const content = await myPost.compiledContent();---<Fragment set:html={content} />"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about the <a href="/en/guides/markdown-content/#importing-markdown"><code dir="auto">compiledContent()</code> function</a> for returning compiled Markdown.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-astrocontent-can-no-longer-be-used-on-the-client">Changed: <code dir="auto">astro:content</code> can no longer be used on the client</h3><a class="sl-anchor-link" href="#changed-astrocontent-can-no-longer-be-used-on-the-client"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: astro:content can no longer be used on the client”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11827" class="astro-ro74hpkt">Implementation PR: Prevent usage of `astro:content` in the client  (#11827)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, it was possible to access the <code dir="auto">astro:content</code> module on the client.</p>
<p>Astro 5.0 removes this access as it was never intentionally exposed for client use. Using <code dir="auto">astro:content</code> this way had limitations and bloated client bundles.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-17">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-17"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you are currently using <code dir="auto">astro:content</code> in the client, pass the data you need through props to your client components instead:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/blog.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { getCollection } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">astro:content</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> ClientComponent </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">../components/ClientComponent</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">posts</span><span style="--0:#C792EA;--1:#8844AE"> = await </span><span style="--0:#82AAFF;--1:#3B61B0">getCollection</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">blog</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">postsData</span><span style="--0:#C792EA;--1:#8844AE"> = </span><span style="--0:#D6DEEB;--1:#403F53">posts</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#82AAFF;--1:#3B61B0">map</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">post</span></span><span style="--0:#C792EA;--1:#8844AE"> => </span><span style="--0:#D6DEEB;--1:#403F53">post</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">data</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#8844AE">&#x3C;</span><span style="--0:#C5E478;--1:#3B61B0">ClientComponent</span><span style="--0:#7FDBCA;--1:#8844AE"> </span><span style="--0:#C5E478;--1:#3B61B0">posts</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#D6DEEB;--1:#403F53">postsData</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#7FDBCA;--1:#8844AE"> /></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---import { getCollection } from &#x27;astro:content&#x27;;import ClientComponent from &#x27;../components/ClientComponent&#x27;;const posts = await getCollection(&#x27;blog&#x27;);const postsData = posts.map(post => post.data);---<ClientComponent posts={postsData} />"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/modules/astro-content/">the <code dir="auto">astro:content</code> API</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="renamed-shiki-css-variables-theme-color-token-names">Renamed: Shiki <code dir="auto">css-variables</code> theme color token names</h3><a class="sl-anchor-link" href="#renamed-shiki-css-variables-theme-color-token-names"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Renamed: Shiki css-variables theme color token names”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11661" class="astro-ro74hpkt">Implementation PR: Update to new shiki token names (#11661)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, the Shiki <code dir="auto">css-variables</code> theme used the <code dir="auto">--astro-code-color-text</code> and <code dir="auto">--astro-code-color-background</code> tokens for styling the foreground and background colors of code blocks respectively.</p>
<p>Astro v5.0 renames them to <code dir="auto">--astro-code-foreground</code> and <code dir="auto">--astro-code-background</code> respectively to better align with the Shiki v1 defaults.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-18">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-18"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>You can perform a global find and replace in your project to migrate to the new token names.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/styles/global.css</span></figcaption><pre data-language="css"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">:root</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#2c4984">--astro-code-color-text</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--1:#8d076c"><span style="--0:#f89d82">#</span><span style="--0:#FFEB95">000</span></span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#2c4984">--astro-code-color-background</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--1:#8d076c"><span style="--0:#f89d82">#</span><span style="--0:#FFEB95">fff</span></span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#2d4a87">--astro-code-foreground</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--1:#8f086e"><span style="--0:#f8a186">#</span><span style="--0:#FFEB95">000</span></span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#C5E478;--1:#2d4a87">--astro-code-background</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--1:#8f086e"><span style="--0:#f8a186">#</span><span style="--0:#FFEB95">fff</span></span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code=":root {  --astro-code-color-text: #000;  --astro-code-color-background: #fff;  --astro-code-foreground: #000;  --astro-code-background: #fff;}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/syntax-highlighting/">syntax highlighting in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-internal-shiki-rehype-plugin-for-highlighting-code-blocks">Changed: internal Shiki rehype plugin for highlighting code blocks</h3><a class="sl-anchor-link" href="#changed-internal-shiki-rehype-plugin-for-highlighting-code-blocks"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: internal Shiki rehype plugin for highlighting code blocks”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11825" class="astro-ro74hpkt">Implementation PR: Refactor createShikiHighlighter (#11825)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, Astro’s internal Shiki rehype plugin highlighted code blocks as HTML.</p>
<p>Astro 5.0 updates this plugin to highlight code blocks as hast. This allows a more direct Markdown and MDX processing and improves the performance when building the project. However, this may cause issues with existing Shiki transformers.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-19">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-19"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you are using Shiki transformers passed to <code dir="auto">markdown.shikiConfig.transformers</code>, you must make sure they do not use the <code dir="auto">postprocess</code> hook. This hook no longer runs on code blocks in <code dir="auto">.md</code> and <code dir="auto">.mdx</code> files. (See <a href="https://shiki.style/guide/transformers#transformer-hooks">the Shiki documentation on transformer hooks</a> for more information).</p>
<p>Code blocks in <code dir="auto">.mdoc</code> files and Astro’s built-in <code dir="auto">&#x3C;Code /></code> component do not use the internal Shiki rehype plugin and are unaffected.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/syntax-highlighting/">syntax highlighting in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-automatic-charsetutf-8-behavior-for-markdown-and-mdx-pages">Changed: Automatic <code dir="auto">charset=utf-8</code> behavior for Markdown and MDX pages</h3><a class="sl-anchor-link" href="#changed-automatic-charsetutf-8-behavior-for-markdown-and-mdx-pages"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: Automatic charset=utf-8 behavior for Markdown and MDX pages”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/12231" class="astro-ro74hpkt">Implementation PR: Unset charset=utf-8 content-type for md/mdx pages (#12231)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.0, Markdown and MDX pages (located in <code dir="auto">src/pages/</code>) automatically responded with <code dir="auto">charset=utf-8</code> in the <code dir="auto">Content-Type</code> header, which allowed rendering non-ASCII characters in your pages.</p>
<p>Astro 5.0 updates the behaviour to add the <code dir="auto">&#x3C;meta charset="utf-8"></code> tag instead, and only for pages that do not use Astro’s special <code dir="auto">layout</code> frontmatter property. Similarly for MDX pages, Astro will only add the tag if the MDX content does not import a wrapping <code dir="auto">Layout</code> component.</p>
<p>If your Markdown or MDX pages use the <code dir="auto">layout</code> frontmatter property, or if the MDX page content imports a wrapping <code dir="auto">Layout</code> component, then the HTML encoding will be handled by the designated layout component instead, and the <code dir="auto">&#x3C;meta charset="utf-8"></code> tag will not be added to your page by default.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-20">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-20"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you require <code dir="auto">charset=utf-8</code> to render your page correctly, make sure that your layout components contain the <code dir="auto">&#x3C;meta charset="utf-8"></code> tag. You may need to add this if you have not already done so.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/basics/layouts/#markdown-layouts">Markdown layouts</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-astro-specific-metadata-attached-in-remark-and-rehype-plugins">Changed: Astro-specific metadata attached in remark and rehype plugins</h3><a class="sl-anchor-link" href="#changed-astro-specific-metadata-attached-in-remark-and-rehype-plugins"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: Astro-specific metadata attached in remark and rehype plugins”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11861" class="astro-ro74hpkt">Implementation PR: Clean up Astro metadata in vfile.data (#11861)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, the Astro-specific metadata attached to <code dir="auto">vfile.data</code> in remark and rehype plugins was attached in different locations with inconsistent names.</p>
<p>Astro 5 cleans up the API and the metadata is now renamed as below:</p>
<ul>
<li><code dir="auto">vfile.data.__astroHeadings</code> -> <code dir="auto">vfile.data.astro.headings</code></li>
<li><code dir="auto">vfile.data.imagePaths</code> -> <code dir="auto">vfile.data.astro.imagePaths</code></li>
</ul>
<p>The types of <code dir="auto">imagePaths</code> has also been updated from <code dir="auto">Set&#x3C;string></code> to <code dir="auto">string[]</code>. The <code dir="auto">vfile.data.astro.frontmatter</code> metadata is left unchanged.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-21">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-21"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>While we don’t consider these APIs public, they can be accessed by remark and rehype plugins that want to re-use Astro’s metadata. If you are using these APIs, make sure to access them in the new locations.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/markdown-content/#markdown-plugins">using Markdown plugins in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-image-endpoint-configuration">Changed: image endpoint configuration</h3><a class="sl-anchor-link" href="#changed-image-endpoint-configuration"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: image endpoint configuration”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11908" class="astro-ro74hpkt">Implementation PR: Allow customising the route of the image endpoint (#11908)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, you could set an endpoint in your <code dir="auto">image</code> configuration to use for image optimization.</p>
<p>Astro 5.0 allows you to customize a <code dir="auto">route</code> and <code dir="auto">entrypoint</code> of the <code dir="auto">image.endpoint</code> config. This can be useful in niche situations where the default route <code dir="auto">/_image</code> conflicts with an existing route or your local server setup.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-22">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-22"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you had previously customized <code dir="auto">image.endpoint</code>, move this endpoint to the new <code dir="auto">endpoint.entrypoint</code> property. Optionally, you may customize a <code dir="auto">route</code>:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">astro.config.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineConfig } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">astro/config</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">defineConfig</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">image: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">endpoint: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">./src/image-endpoint.ts</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">endpoint: {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">route: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">/image</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">entrypoint: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">./src/image_endpoint.ts</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { defineConfig } from &#x22;astro/config&#x22;;defineConfig({  image: {    endpoint: &#x27;./src/image-endpoint.ts&#x27;,    endpoint: {      route: &#x22;/image&#x22;,      entrypoint: &#x22;./src/image_endpoint.ts&#x22;    }  },})"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/configuration-reference/#imageendpoint">setting an endpoint to use for image optimization</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-buildclient-and-buildserver-resolve-behavior">Changed: <code dir="auto">build.client</code> and <code dir="auto">build.server</code> resolve behavior</h3><a class="sl-anchor-link" href="#changed-buildclient-and-buildserver-resolve-behavior"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: build.client and build.server resolve behavior”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11916" class="astro-ro74hpkt">Implementation PR: Fix build.client and build.server resolve behaviour (#11916)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, the <code dir="auto">build.client</code> and <code dir="auto">build.server</code> options were documented to resolve relatively from the <code dir="auto">outDir</code> option, but it didn’t always work as expected.</p>
<p>Astro 5.0 fixes the behavior to correctly resolve from the <code dir="auto">outDir</code> option. For example, if <code dir="auto">outDir</code> is set to <code dir="auto">./dist/nested/</code>, then by default:</p>
<ul>
<li><code dir="auto">build.client</code> will resolve to <code dir="auto">&#x3C;root>/dist/nested/client/</code></li>
<li><code dir="auto">build.server</code> will resolve to <code dir="auto">&#x3C;root>/dist/nested/server/</code></li>
</ul>
<p>Previously the values were incorrectly resolved:</p>
<ul>
<li><code dir="auto">build.client</code> was resolved to <code dir="auto">&#x3C;root>/dist/nested/dist/client/</code></li>
<li><code dir="auto">build.server</code> was resolved to <code dir="auto">&#x3C;root>/dist/nested/dist/server/</code></li>
</ul>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-23">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-23"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you were relying on the previous build paths, make sure that your project code is updated to the new build paths.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/configuration-reference/#build-options"><code dir="auto">build</code> configuration options in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-js-dependencies-in-config-file-are-no-longer-processed-by-vite">Changed: JS dependencies in config file are no longer processed by Vite</h3><a class="sl-anchor-link" href="#changed-js-dependencies-in-config-file-are-no-longer-processed-by-vite"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: JS dependencies in config file are no longer processed by Vite”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11819" class="astro-ro74hpkt">Implementation PR: Set external: true when loading astro config (#11819)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, locally-linked JS dependencies (e.g. <code dir="auto">npm link</code>, in a monorepo, etc) were able to use Vite features like <code dir="auto">import.meta.glob</code> when imported by the Astro config file.</p>
<p>Astro 5 updates the Astro config loading flow to ignore processing locally-linked JS dependencies with Vite. Dependencies exporting raw TypeScript files are unaffected. Instead, these JS dependencies will be normally imported by the Node.js runtime the same way as other dependencies from <code dir="auto">node_modules</code>.</p>
<p>This change was made as the previous behavior caused confusion among integration authors who tested against a package that worked locally, but not when published. It also restricted using CJS-only dependencies because Vite required the code to be ESM. While this change only affects JS dependencies, it’s also recommended for packages to export JavaScript instead of raw TypeScript where possible to prevent accidental Vite-specific usage as it’s an implementation detail of Astro’s config loading flow.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-24">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-24"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Make sure your locally-linked JS dependencies are built before running your Astro project. Then, the config loading should work as before.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/configuration-reference/#vite">Vite configuration settings in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-urls-returned-by-paginate">Changed: URLs returned by <code dir="auto">paginate()</code></h3><a class="sl-anchor-link" href="#changed-urls-returned-by-paginate"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: URLs returned by paginate()”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11253" class="astro-ro74hpkt">Implementation PR: Add base to paginate (#11253)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, the URL returned by <code dir="auto">paginate()</code> (e.g. <code dir="auto">page.url.next</code>, <code dir="auto">page.url.first</code>, etc.) did not include the value set for <code dir="auto">base</code> in your Astro config. You had to manually prepend your configured value for <code dir="auto">base</code> to the URL path.</p>
<p>Astro 5.0 automatically includes the <code dir="auto">base</code> value in <code dir="auto">page.url</code>.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-25">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-25"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you are using the <code dir="auto">paginate()</code> function for these URLs, remove any existing <code dir="auto">base</code> value as it is now added for you:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">async</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">getStaticPaths</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--1:#403F53"><span style="--0:#D6DEEB">{ </span><span style="--0:#D7DBE0">paginate</span><span style="--0:#D6DEEB"> }</span></span><span style="--0:#D9F5DD;--1:#111111">)</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">const </span><span style="--0:#82AAFF;--1:#3B61B0">astronautPages</span><span style="--0:#C792EA;--1:#8844AE"> =</span><span style="--0:#D6DEEB;--1:#403F53"> [{</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">astronaut: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">Neil Armstrong</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">astronaut: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">Buzz Aldrin</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">astronaut: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">Sally Ride</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">astronaut: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">John Glenn</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#889FB2;--1:#4D667B">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}];</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">paginate</span><span style="--0:#D6DEEB;--1:#403F53">(astronautPages</span><span style="--0:#889FB2;--1:#4D667B">,</span><span style="--0:#D6DEEB;--1:#403F53"> { pageSize: </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53"> });</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">page</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">Astro</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">props</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5D6376">// `base: /'docs'` configured in `astro.config.mjs`</span></div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">const </span><span style="--0:#91b4ff;--1:#2c4984">prev</span><span style="--0:#d0a3ed;--1:#663383"> = </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">/docs</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#d0a3ed;--1:#663383"> + </span><span style="--0:#D6DEEB;--1:#403F53">page</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#FAF39F;--1:#111111">url</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#7FDBCA;--1:#075356">prev</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">const </span><span style="--0:#94b6ff;--1:#2d4a87">prev</span><span style="--0:#d2a6ee;--1:#6a3588"> = </span><span style="--0:#D6DEEB;--1:#403F53">page</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#FAF39F;--1:#111111">url</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#7FDBCA;--1:#075457">prev</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">a</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">id</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">prev</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#7FDBCA;--1:#8844AE"> </span><span style="--0:#C5E478;--1:#3B61B0">href</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#D6DEEB;--1:#403F53">prev</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--0:#7FDBCA;--1:#8844AE">></span><span style="--0:#D6DEEB;--1:#403F53">Back</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;/</span><span style="--0:#CAECE6">a</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---export async function getStaticPaths({ paginate }) {  const astronautPages = [{    astronaut: &#x27;Neil Armstrong&#x27;,  }, {    astronaut: &#x27;Buzz Aldrin&#x27;,  }, {    astronaut: &#x27;Sally Ride&#x27;,  }, {    astronaut: &#x27;John Glenn&#x27;,  }];  return paginate(astronautPages, { pageSize: 1 });}const { page } = Astro.props;// &#x60;base: /&#x27;docs&#x27;&#x60; configured in &#x60;astro.config.mjs&#x60;const prev = &#x22;/docs&#x22; + page.url.prev;const prev = page.url.prev;---<a id=&#x22;prev&#x22; href={prev}>Back</a>"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/routing/#pagination">pagination in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-non-boolean-html-attribute-values">Changed: non-boolean HTML attribute values</h3><a class="sl-anchor-link" href="#changed-non-boolean-html-attribute-values"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: non-boolean HTML attribute values”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11660" class="astro-ro74hpkt">Implementation PR: Fix attribute rendering for boolean values (take 2) (#11660)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, non-<a href="https://developer.mozilla.org/en-US/docs/Glossary/Boolean/HTML">boolean HTML attributes</a> may not have included their values when rendered to HTML.</p>
<p>Astro v5.0 renders the values explicitly as <code dir="auto">="true"</code> or <code dir="auto">="false"</code>, matching proper attribute handling in browsers.</p>
<p>In the following <code dir="auto">.astro</code> examples, only <code dir="auto">allowfullscreen</code> is a boolean attribute:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/index.astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">&#x3C;!-- `allowfullscreen` is a boolean attribute --></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">allowfullscreen</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">allowfullscreen</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">&#x3C;!-- `inherit` is *not* a boolean attribute --></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">inherit</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">inherit</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">&#x3C;!-- `data-*` attributes are not boolean attributes --></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">data-light</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">data-light</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#E2817F;--1:#B23834">{</span><span style="--0:#FF6A83;--1:#A24848">false</span><span style="--0:#E2817F;--1:#B23834">}</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<!-- &#x60;allowfullscreen&#x60; is a boolean attribute --><p allowfullscreen={true}></p><p allowfullscreen={false}></p><!-- &#x60;inherit&#x60; is *not* a boolean attribute --><p inherit={true}></p><p inherit={false}></p><!-- &#x60;data-*&#x60; attributes are not boolean attributes --><p data-light={true}></p><p data-light={false}></p>"><div></div></button></div></figure></div>
<p>Astro v5.0 now preserves the full data attribute with its value when rendering the HTML of non-boolean attributes:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">allowfullscreen</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--1:#8844AE"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#3B61B0">inherit</span><span style="--0:#7FDBCA;--1:#8844AE">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">true</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--1:#8844AE"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line highlight del"><div class="code"><span style="--1:#663383"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#2c4984">inherit</span><span style="--1:#663383"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--1:#6a3588"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#2d4a87">inherit</span><span style="--0:#7FDBCA;--1:#6a3588">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">false</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--1:#6a3588"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line highlight del"><div class="code"><span style="--1:#663383"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#2c4984">data-light</span><span style="--1:#663383"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--1:#6a3588"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#2d4a87">data-light</span><span style="--0:#7FDBCA;--1:#6a3588">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">true</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--1:#6a3588"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line highlight del"><div class="code"><span style="--1:#663383"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--1:#6a3588"><span style="--0:#7FDBCA">&#x3C;</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA"> </span></span><span style="--0:#C5E478;--1:#2d4a87">data-light</span><span style="--0:#7FDBCA;--1:#6a3588">=</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">false</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--1:#6a3588"><span style="--0:#7FDBCA">>&#x3C;/</span><span style="--0:#CAECE6">p</span><span style="--0:#7FDBCA">></span></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="<p allowfullscreen></p><p></p><p inherit=&#x22;true&#x22;></p><p inherit></p><p inherit=&#x22;false&#x22;></p><p data-light></p><p data-light=&#x22;true&#x22;></p><p></p><p data-light=&#x22;false&#x22;></p>"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-26">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-26"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you rely on attribute values, for example, to locate elements or to conditionally render, update your code to match the new non-boolean attribute values:</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#7FDBCA;--1:#075356">el</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">getAttribute</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">inherit</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#d0a3ed;--1:#663383">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">''</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#7FDBCA;--1:#075457">el</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">getAttribute</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">inherit</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">) </span><span style="--0:#d2a6ee;--1:#6a3588">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">false</span><span style="--0:#D9F5DD;--1:#111111">'</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#7FDBCA;--1:#075356">el</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">hasAttribute</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">data-light</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#7FDBCA;--1:#075457">el</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#FAF39F;--1:#111111">dataset</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#7FDBCA;--1:#075457">light</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#d2a6ee;--1:#6a3588">===</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">true</span><span style="--0:#D9F5DD;--1:#111111">'</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="el.getAttribute(&#x27;inherit&#x27;) === &#x27;&#x27;el.getAttribute(&#x27;inherit&#x27;) === &#x27;false&#x27;el.hasAttribute(&#x27;data-light&#x27;)el.dataset.light === &#x27;true&#x27;"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/astro-syntax/#dynamic-attributes">using HTML attributes in Astro</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-adding-values-to-contextlocals">Changed: adding values to <code dir="auto">context.locals</code></h3><a class="sl-anchor-link" href="#changed-adding-values-to-contextlocals"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: adding values to context.locals”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11987" class="astro-ro74hpkt">Implementation PR: TODOs (#11987)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, it was possible to completely replace the entire <code dir="auto">locals</code> object in middleware, API endpoints, and pages when adding new values.</p>
<p>Astro 5.0 requires you to append values to the existing <code dir="auto">locals</code> object without deleting it. Locals in middleware, API endpoints, and pages, can no longer be completely overridden.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-27">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-27"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Where you previously were overwriting the object, you must now instead assign values to it:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/middleware.js</span></figcaption><pre data-language="js"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#7FDBCA;--1:#075356">ctx</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#7FDBCA;--1:#075356">locals</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#d0a3ed;--1:#663383">=</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--1:#403F53"><span style="--0:#D6DEEB">Object.assign(ctx.</span><span style="--0:#D7DBE0">locals</span><span style="--0:#D6DEEB">, {</span></span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">one: </span><span style="--0:#F78C6C;--1:#AA0982">1</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">two: </span><span style="--0:#F78C6C;--1:#AA0982">2</span></div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="ctx.locals = {Object.assign(ctx.locals, {  one: 1,  two: 2}})"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">See more about <a href="/en/guides/middleware/#storing-data-in-contextlocals">storing data in <code dir="auto">context.locals</code></a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-params-no-longer-decoded">Changed: <code dir="auto">params</code> no longer decoded</h3><a class="sl-anchor-link" href="#changed-params-no-longer-decoded"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: params no longer decoded”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/12079" class="astro-ro74hpkt">Implementation PR: decode pathname early, don&#39;t decode params (#12079)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, <code dir="auto">params</code> passed to <code dir="auto">getStaticPath()</code> were automatically decoded using <code dir="auto">decodeURIComponent</code>.</p>
<p>Astro v5.0 no longer decodes the value of <code dir="auto">params</code> passed to <code dir="auto">getStaticPaths</code>. You must manually decode them yourself if needed.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-28">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-28"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you were previously relying on the automatic decoding, use <code dir="auto">decodeURI</code> when passing <code dir="auto">params</code>.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">src/pages/[id].astro</span></figcaption><pre data-language="astro"><code><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">getStaticPaths</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#C792EA;--1:#8844AE">return</span><span style="--0:#D6DEEB;--1:#403F53"> [</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">{ params: { id: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">%5Bpage%5D</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53"> } }</span><span style="--0:#a5b7c5;--1:#3a4d5c">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">{ params: { id: </span><span style="--0:#94b6ff;--1:#2d4a87">decodeURI</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">%5Bpage%5D</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">) } }</span><span style="--0:#a8b9c6;--1:#3b4e5e">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">const { </span><span style="--0:#82AAFF;--1:#3B61B0">id</span><span style="--0:#C792EA;--1:#8844AE"> } = </span><span style="--0:#D6DEEB;--1:#403F53">Astro</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">params</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code"><span style="--0:#919F9F;--1:#5F636F">---</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="---export function getStaticPaths() {  return [    { params: { id: &#x22;%5Bpage%5D&#x22; } },    { params: { id: decodeURI(&#x22;%5Bpage%5D&#x22;) } },  ]}const { id } = Astro.params;---"><div></div></button></div></figure></div>
<p>Note that the use of <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/decodeURIComponent"><code dir="auto">decodeURIComponent</code></a> is discouraged for <code dir="auto">getStaticPaths</code> because it decodes more characters than it should, for example <code dir="auto">/</code>, <code dir="auto">?</code>, <code dir="auto">#</code> and more.</p>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/guides/routing/#static-ssg-mode">creating dynamic routes with <code dir="auto">params</code></a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-routedata-type-replaced-by-integrationsroutedata-integrations-api">Changed: <code dir="auto">RouteData</code> type replaced by <code dir="auto">IntegrationsRouteData</code> (Integrations API)</h3><a class="sl-anchor-link" href="#changed-routedata-type-replaced-by-integrationsroutedata-integrations-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: RouteData type replaced by IntegrationsRouteData (Integrations API)”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11864" class="astro-ro74hpkt">Implementation PR: send `IntegrationRouteData` to integrations (#11864)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, the <code dir="auto">entryPoints</code> type inside the <code dir="auto">astro:build:ssr</code> and <code dir="auto">astro:build:done</code> hooks was <code dir="auto">RouteData</code>.</p>
<p>Astro v5.0 the <code dir="auto">entryPoints</code> type is now <code dir="auto">IntegrationRouteData</code>, which contains a subset of the <code dir="auto">RouteData</code> type. The fields <code dir="auto">isIndex</code> and <code dir="auto">fallbackRoutes</code> were removed.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-29">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-29"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Update your adapter to change the type of <code dir="auto">entryPoints</code> from <code dir="auto">RouteData</code> to <code dir="auto">IntegrationRouteData</code>.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#d0a3ed;--1:#663383">type</span><span style="--0:#D6DEEB;--1:#403F53"> {RouteData} </span><span style="--0:#d0a3ed;--1:#663383">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">astro</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">import</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#d2a6ee;--1:#6a3588">type</span><span style="--0:#D6DEEB;--1:#403F53"> {IntegrationRouteData} </span><span style="--0:#d2a6ee;--1:#6a3588">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">astro</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">useRoute</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">route</span><span style="--0:#7FDBCA;--1:#075356">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">RouteData</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">function</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#94b6ff;--1:#2d4a87">useRoute</span><span style="--0:#D9F5DD;--1:#111111">(</span><span style="--0:#D7DBE0;--1:#403F53">route</span><span style="--0:#7FDBCA;--1:#075457">:</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--1:#111111"><span style="--0:#FFCB8B">IntegrationRouteData</span><span style="--0:#D9F5DD">)</span></span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import type {RouteData} from &#x27;astro&#x27;;import type {IntegrationRouteData} from &#x22;astro&#x22;function useRoute(route: RouteData) {function useRoute(route: IntegrationRouteData) {}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">See the <a href="/en/reference/integrations-reference/#integrationroutedata-type-reference">API reference for <code dir="auto">IntegrationRouteData</code></a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-disturl-is-now-an-array-integrations-api">Changed: <code dir="auto">distURL</code> is now an array (Integrations API)</h3><a class="sl-anchor-link" href="#changed-disturl-is-now-an-array-integrations-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: distURL is now an array (Integrations API)”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11864" class="astro-ro74hpkt">Implementation PR: send `IntegrationRouteData` to integrations (#11864)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, <code dir="auto">RouteData.distURL</code> was <code dir="auto">undefined</code> or a <code dir="auto">URL</code>.</p>
<p>Astro v5.0 updates the shape of <code dir="auto">IntegrationRouteData.distURL</code> to be <code dir="auto">undefined</code> or an array of <code dir="auto">URL</code>s. This fixes a previous error because a route can generate multiple files on disk, especially when using dynamic routes such as <code dir="auto">[slug]</code> or <code dir="auto">[...slug]</code>.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-30">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-30"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Update your code to handle <code dir="auto">IntegrationRouteData.distURL</code> as an array.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#7FDBCA;--1:#096E72">route</span><span style="--0:#C792EA;--1:#8844AE">.</span><span style="--0:#7FDBCA;--1:#096E72">distURL</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent">  </span><span style="--0:#d0a3ed;--1:#663383">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#7FDBCA;--1:#075356">route</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#FAF39F;--1:#111111">distURL</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">endsWith</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">index.html</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)) {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent">    </span><span style="--0:#acb6b6;--1:#464a59">// do something</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">  </span><span style="--0:#d2a6ee;--1:#6a3588">for</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#d2a6ee;--1:#6a3588">const </span><span style="--0:#94b6ff;--1:#2d4a87">url</span><span style="--0:#d2a6ee;--1:#6a3588"> </span><span style="--0:#7FDBCA;--1:#075457">of</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#7FDBCA;--1:#075457">route</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#7FDBCA;--1:#075457">distURL</span><span style="--0:#D6DEEB;--1:#403F53">) {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">    </span><span style="--0:#d2a6ee;--1:#6a3588">if</span><span style="--0:#D6DEEB;--1:#403F53"> (</span><span style="--0:#7FDBCA;--1:#075457">url</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">endsWith</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">index.html</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">)) {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent">      </span><span style="--0:#aeb8b8;--1:#474c5a">// do something</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="if (route.distURL) {  if (route.distURL.endsWith(&#x27;index.html&#x27;)) {    // do something  }  for (const url of route.distURL) {    if (url.endsWith(&#x27;index.html&#x27;)) {      // do something    }  }}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">See the <a href="/en/reference/integrations-reference/#integrationroutedata-type-reference">API reference for <code dir="auto">IntegrationRouteData</code></a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-arguments-passed-to-apprender-adapter-api">Changed: Arguments passed to <code dir="auto">app.render()</code> (Adapter API)</h3><a class="sl-anchor-link" href="#changed-arguments-passed-to-apprender-adapter-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: Arguments passed to app.render() (Adapter API)”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11987" class="astro-ro74hpkt">Implementation PR: TODOs (#11987)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, The Adapter API method <code dir="auto">app.render()</code> could receive three arguments: a mandatory <code dir="auto">request</code>, an object of options or a <code dir="auto">routeData</code> object, and <code dir="auto">locals</code>.</p>
<p>Astro 5.0 combines these last two arguments into a single options argument named <code dir="auto">renderOptions</code>.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-31">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-31"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>Pass an object as the second argument to <code dir="auto">app.render()</code>, which can include <code dir="auto">routeData</code> and <code dir="auto">locals</code> as properties.</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#d0a3ed;--1:#663383">const </span><span style="--0:#91b4ff;--1:#2c4984">response</span><span style="--0:#d0a3ed;--1:#663383"> = await </span><span style="--0:#7FDBCA;--1:#075356">app</span><span style="--0:#d0a3ed;--1:#663383">.</span><span style="--0:#91b4ff;--1:#2c4984">render</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">request</span></span><span style="--0:#d0a3ed;--1:#663383">, </span><span style="--0:#D7DBE0;--1:#403F53">routeData</span><span style="--0:#d0a3ed;--1:#663383">, </span><span style="--1:#403F53"><span style="--0:#D7DBE0">locals</span><span style="--0:#D6DEEB">);</span></span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#d2a6ee;--1:#6a3588">const </span><span style="--0:#94b6ff;--1:#2d4a87">response</span><span style="--0:#d2a6ee;--1:#6a3588"> = await </span><span style="--0:#7FDBCA;--1:#075457">app</span><span style="--0:#d2a6ee;--1:#6a3588">.</span><span style="--0:#94b6ff;--1:#2d4a87">render</span><span style="--1:#403F53"><span style="--0:#D6DEEB">(</span><span style="--0:#D7DBE0">request</span></span><span style="--0:#d2a6ee;--1:#6a3588">, {</span><span style="--0:#D7DBE0;--1:#403F53">routeData</span><span style="--0:#d2a6ee;--1:#6a3588">, </span><span style="--0:#D7DBE0;--1:#403F53">locals</span><span style="--0:#d2a6ee;--1:#6a3588">}</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="const response = await app.render(request, routeData, locals);const response = await app.render(request, {routeData, locals});"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">See the <a href="/en/reference/adapter-reference/#renderoptions">Adapter API reference for <code dir="auto">renderOptions</code></a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="changed-properties-on-supportedastrofeatures-adapter-api">Changed: Properties on <code dir="auto">supportedAstroFeatures</code> (Adapter API)</h3><a class="sl-anchor-link" href="#changed-properties-on-supportedastrofeatures-adapter-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Changed: Properties on supportedAstroFeatures (Adapter API)”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11806" class="astro-ro74hpkt">Implementation PR: rework supportedAstroFeatures (#11806)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, <code dir="auto">supportedAstroFeatures</code>, which allows adapter authors to specify which features their integration supports, included an <code dir="auto">assets</code> property to specify which of Astro’s image services were supported.</p>
<p>Astro 5.0 replaces this property with a dedicated <code dir="auto">sharpImageService</code> property, used to determine whether the adapter is compatible with the built-in sharp image service.</p>
<p>v5.0 also adds a new <code dir="auto">limited</code> value for the different properties of <code dir="auto">supportedAstroFeatures</code> for adapters, which indicates that the adapter is compatible with the feature, but with some limitations. This is useful for adapters that support a feature, but not in all cases or with all options.</p>
<p>Additionally, the value of the different properties on <code dir="auto">supportedAstroFeatures</code> for adapters can now be objects, with <code dir="auto">support</code> and <code dir="auto">message</code> properties. The content of the <code dir="auto">message</code> property will show a helpful message in the Astro CLI when the adapter is not compatible with a feature. This is notably useful with the new <code dir="auto">limited</code> value, to explain to the user why support is limited.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-32">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-32"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you were using the <code dir="auto">assets</code> property, remove this as it is no longer available. To specify that your adapter supports the built-in sharp image service, replace this with <code dir="auto">sharpImageService</code>.</p>
<p>You may also wish to update your supported features with the new <code dir="auto">limited</code> option and include a message about your adapter’s support.</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">my-adapter.mjs</span></figcaption><pre data-language="ts"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">supportedAstroFeatures: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">assets: {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">supportKind: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">stable</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">isSharpCompatible: </span><span style="--0:#ff96a8;--1:#7a3636">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">isSquooshCompatible: </span><span style="--0:#ff96a8;--1:#7a3636">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">},</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">sharpImageService: {</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">support: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">limited</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">message: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">This adapter supports the built-in sharp image service, but with some limitations.</span><span style="--0:#D9F5DD;--1:#111111">'</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="supportedAstroFeatures: {  assets: {    supportKind: &#x22;stable&#x22;,    isSharpCompatible: true,    isSquooshCompatible: true,  },  sharpImageService: {    support: &#x22;limited&#x22;,    message: &#x27;This adapter supports the built-in sharp image service, but with some limitations.&#x27;  }}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/adapter-reference/#astro-features">specifying supported Astro features in an adapter</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="removed-deprecated-definition-shape-for-dev-toolbar-apps-dev-toolbar-api">Removed: Deprecated definition shape for dev toolbar apps (Dev Toolbar API)</h3><a class="sl-anchor-link" href="#removed-deprecated-definition-shape-for-dev-toolbar-apps-dev-toolbar-api"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed: Deprecated definition shape for dev toolbar apps (Dev Toolbar API)”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/11987" class="astro-ro74hpkt">Implementation PR: Remove deprecated dev toolbar app shape (#11987)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro 4.x, when building a dev toolbar app, it was still possible to use the previously deprecated <code dir="auto">addDevToolbarApp(string);</code> signature. The <code dir="auto">id</code>, <code dir="auto">title</code>, and <code dir="auto">icon</code> properties to define the app were then made available through the default export of the app’s <code dir="auto">entrypoint</code>.</p>
<p>Astro 5.0 completely removes this option entirely in favor of the current object shape when defining a dev toolbar app in an integration that’s more intuitive and allows Astro to provide better errors when toolbar apps fail to load correctly.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-33">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-33"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you were using the deprecated shape, update your dev toolbar app to use the new shape:</p>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">my-integration.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#acb6b6;--1:#464a59">// Old shape</span></div></div><div class="ec-line highlight del"><div class="code"><span style="--0:#91b4ff;--1:#2c4984">addDevToolbarApp</span><span style="--0:#D6DEEB;--1:#403F53">(</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">./my-dev-toolbar-app.mjs</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">);</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#aeb8b8;--1:#474c5a">// New shape</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#94b6ff;--1:#2d4a87">addDevToolbarApp</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">id: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">my-app</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">name: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">My App</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">icon: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">&#x3C;svg>...&#x3C;/svg></span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">entrypoint: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#723b3a">./my-dev-toolbar-app.mjs</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="// Old shapeaddDevToolbarApp(&#x22;./my-dev-toolbar-app.mjs&#x22;);// New shapeaddDevToolbarApp({  id: &#x22;my-app&#x22;,  name: &#x22;My App&#x22;,  icon: &#x22;<svg>...</svg>&#x22;,  entrypoint: &#x22;./my-dev-toolbar-app.mjs&#x22;,});"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame has-title not-content"><figcaption class="header"><span class="title">my-dev-toolbar-app.mjs</span></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">id: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">my-dev-toolbar-app</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">title: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">My Dev Toolbar App</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line highlight del"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">icon: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#723b3a">🚀</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#82AAFF;--1:#3B61B0">init</span><span style="--0:#D9F5DD;--1:#111111">()</span><span style="--0:#D6DEEB;--1:#403F53"> {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#919F9F;--1:#5D6376">// ...</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="export default {  id: &#x27;my-dev-toolbar-app&#x27;,  title: &#x27;My Dev Toolbar App&#x27;,  icon: &#x27;🚀&#x27;,  init() {    // ...  }}"><div></div></button></div></figure></div>
<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">Read more about <a href="/en/reference/dev-toolbar-app-reference/">developing a dev toolbar app for Astro using the Dev Toolbar API</a>.</span>
</div>
<div class="sl-heading-wrapper level-h3"><h3 id="removed-configuring-typescript-during-create-astro">Removed: configuring Typescript during <code dir="auto">create-astro</code></h3><a class="sl-anchor-link" href="#removed-configuring-typescript-during-create-astro"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Removed: configuring Typescript during create-astro”</span></a></div>
<div class="source astro-ro74hpkt">
	
	<svg aria-hidden="true" class="icon astro-ro74hpkt astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg>



	<a href="https://github.com/withastro/astro/pull/12083" class="astro-ro74hpkt">Implementation PR: create-astro updates (#12083)<span class="astro-ro74hpkt"></span></a>
</div>
<p>In Astro v4.x, it was possible to choose between Astro’s three TypeScript settings when creating a new project using <code dir="auto">create astro</code>, either by answering a question or by passing an associated <code dir="auto">--typescript</code> flag with the desired TypeScript setting.</p>
<p>Astro 5.0 updates the <code dir="auto">create astro</code> CLI command to remove the TypeScript question and its associated <code dir="auto">--typescript</code> flag. The “strict” preset is now the default for all new projects created with the command line and it is no longer possible to customize this at that time. However, the TypeScript template can still be changed manually in <code dir="auto">tsconfig.json</code>.</p>
<div class="sl-heading-wrapper level-h4"><h4 id="what-should-i-do-34">What should I do?</h4><a class="sl-anchor-link" href="#what-should-i-do-34"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “What should I do?”</span></a></div>
<p>If you were using the <code dir="auto">--typescript</code> flag with <code dir="auto">create-astro</code>, remove it from your command.</p>



<starlight-tabs data-sync-key="package-managers" class="astro-xtbw65nk">
	<div class="tablist-wrapper not-content astro-xtbw65nk">
				<ul role="tablist" class="astro-xtbw65nk">
					<li role="presentation" class="tab astro-xtbw65nk">
							<a role="tab" href="#tab-panel-9578" id="tab-9578" aria-selected="true" tabindex="0" class="astro-xtbw65nk">
								
								npm
							</a>
						</li><li role="presentation" class="tab astro-xtbw65nk">
							<a role="tab" href="#tab-panel-9579" id="tab-9579" aria-selected="false" tabindex="-1" class="astro-xtbw65nk">
								
								pnpm
							</a>
						</li><li role="presentation" class="tab astro-xtbw65nk">
							<a role="tab" href="#tab-panel-9580" id="tab-9580" aria-selected="false" tabindex="-1" class="astro-xtbw65nk">
								
								Yarn
							</a>
						</li>
				</ul>
			</div>
	
	<div id="tab-panel-9578" aria-labelledby="tab-9578" role="tabpanel">
	
		<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#91b4ff;--1:#2c4984">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">astro@latest</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">--template</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">&#x3C;example-name></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">--typescript</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">strict</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#94b6ff;--1:#2d4a87">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">astro@latest</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#94b6ff;--1:#2d4a87">--</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#94b6ff;--1:#2d4a87">--template</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">&#x3C;example-name></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm create astro@latest -- --template <example-name> --typescript strictnpm create astro@latest -- --template <example-name>"><div></div></button></div></figure></div>
	
</div>
	<div id="tab-panel-9579" aria-labelledby="tab-9579" role="tabpanel" hidden>
	
		<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#91b4ff;--1:#2c4984">pnpm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">astro@latest</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">--template</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">&#x3C;example-name></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">--typescript</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">strict</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#94b6ff;--1:#2d4a87">pnpm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">astro@latest</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#94b6ff;--1:#2d4a87">--template</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">&#x3C;example-name></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pnpm create astro@latest --template <example-name> --typescript strictpnpm create astro@latest --template <example-name>"><div></div></button></div></figure></div>
	
</div>
	<div id="tab-panel-9580" aria-labelledby="tab-9580" role="tabpanel" hidden>
	
		<div class="expressive-code"><figure class="frame is-terminal not-content"><figcaption class="header"><span class="title"></span><span class="sr-only">Terminal window</span></figcaption><pre data-language="shell"><code><div class="ec-line highlight del"><div class="code"><span style="--0:#91b4ff;--1:#2c4984">yarn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">astro</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">--template</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">&#x3C;example-name></span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#91b4ff;--1:#2c4984">--typescript</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2c4984">strict</span></div></div><div class="ec-line highlight ins"><div class="code"><span style="--0:#94b6ff;--1:#2d4a87">yarn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">create</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">astro</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#94b6ff;--1:#2d4a87">--template</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#2d4a87">&#x3C;example-name></span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="yarn create astro --template <example-name> --typescript strictyarn create astro --template <example-name>"><div></div></button></div></figure></div>
	
</div>

	<starlight-tabs-restore class="astro-xtbw65nk"></starlight-tabs-restore>
</starlight-tabs>




<div class="read-more astro-szj46hnz">
	
	<svg aria-hidden="true" class="icon astro-szj46hnz astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.17 2.06A13.1 13.1 0 0 0 19 1.87a12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2 13.1 13.1 0 0 0-2.17.19 1 1 0 0 0-.83 1v12a1 1 0 0 0 1.17 1 10.9 10.9 0 0 1 8.25 1.91l.12.07h.11a.91.91 0 0 0 .7 0h.11l.12-.07A10.899 10.899 0 0 1 20.83 16 1 1 0 0 0 22 15V3a1 1 0 0 0-.83-.94ZM11 15.35a12.87 12.87 0 0 0-6-1.48H4v-10c.333-.02.667-.02 1 0a10.86 10.86 0 0 1 6 1.8v9.68Zm9-1.44h-1a12.87 12.87 0 0 0-6 1.48V5.67a10.86 10.86 0 0 1 6-1.8c.333-.02.667-.02 1 0v10.04Zm1.17 4.15a13.098 13.098 0 0 0-2.17-.19 12.94 12.94 0 0 0-7 2.05 12.94 12.94 0 0 0-7-2.05c-.727.003-1.453.066-2.17.19A1 1 0 0 0 2 19.21a1 1 0 0 0 1.17.79 10.9 10.9 0 0 1 8.25 1.91 1 1 0 0 0 1.16 0A10.9 10.9 0 0 1 20.83 20a1 1 0 0 0 1.17-.79 1 1 0 0 0-.83-1.15Z"/></svg>



	<span class="astro-szj46hnz">See <a href="https://github.com/withastro/astro/blob/main/packages/create-astro/README.md">all the available <code dir="auto">create astro</code> command flags</a></span>
</div>
<div class="sl-heading-wrapper level-h2"><h2 id="community-resources">Community Resources</h2><a class="sl-anchor-link" href="#community-resources"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Community Resources”</span></a></div>
<p>Know a good resource for Astro v5.0? <a href="https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/upgrade-to/v5.mdx">Edit this page</a> and add a link below!</p>
<div class="sl-heading-wrapper level-h2"><h2 id="known-issues">Known Issues</h2><a class="sl-anchor-link" href="#known-issues"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Known Issues”</span></a></div>
<p>Please check <a href="https://github.com/withastro/astro/issues/">Astro’s issues on GitHub</a> for any reported issues, or to file an issue yourself.</p>
									

	
	
	
	
	
	
	<span id="docsearch-lvl0" hidden>Upgrade Guides</span>
</div>
									<div class="hide-when-toc-is-visible astro-o5o7wsh2">
	<div class="container astro-6x7bp2qc" lang="en" dir="ltr" data-algolia-exclude>
	<aside aria-labelledby="learn-astro-course-1" class="astro-6x7bp2qc">
		
<img src="/_astro/CodingInPublic.DpaYu7Qd_5sx41.webp" alt loading="lazy" decoding="async" fetchpriority="auto" width="130" height="131" class="astro-6x7bp2qc">
		<h2 id="learn-astro-course-1" class="astro-6x7bp2qc">Learn Astro with <strong class="astro-6x7bp2qc">Coding in Public</strong></h2>
		<p class="sl-flex astro-6x7bp2qc">
			<span class="sl-flex astro-6x7bp2qc" style="gap: 0.25rem; align-items: center;">
				<svg fill="currentColor" viewBox="0 0 18 18" aria-hidden="true" class="astro-6x7bp2qc">
					<path d="M12 7.7 8.25 5.53A1.5 1.5 0 0 0 6 6.83v4.34a1.5 1.5 0 0 0 2.25 1.3L12 10.3a1.5 1.5 0 0 0 0-2.6ZM11.25 9 7.5 11.17V6.83L11.25 9ZM9 1.5a7.5 7.5 0 1 0 0 15 7.5 7.5 0 0 0 0-15ZM9 15A6 6 0 1 1 9 3a6 6 0 0 1 0 12Z" class="astro-6x7bp2qc"></path>
				</svg>
				<span class="astro-6x7bp2qc">150+ video lessons</span>
			</span>
			<span class="astro-6x7bp2qc">•</span>
			<span class="astro-6x7bp2qc">Astro v5 ready</span>
		</p>
		<a class="sl-link-button not-content primary cta astro-6x7bp2qc astro-n3qr5j5k" href="https://learnastro.dev?code=ASTRO_PROMO" data-learn-astro-cta="true">
	
	Get 20% off
	
</a>
	</aside>
</div>

<script type="module">document.querySelectorAll("a[data-learn-astro-cta]").forEach(a=>a.addEventListener("click",()=>{window.fathom?.trackEvent("Docs: Coding in Public campaign click")}));</script>
</div>
<footer class="sl-flex astro-rpzzxrff">
	<div class="meta sl-flex astro-rpzzxrff">
		<div class="sl-flex astro-dvlentyv">
			<a href="https://github.com/withastro/docs/edit/main/src/content/docs/en/guides/upgrade-to/v5.mdx" class="sl-flex astro-dvlentyv">
				
	<svg aria-hidden="true" class="astro-dvlentyv astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path d="M22 7.24a1 1 0 0 0-.29-.71l-4.24-4.24a1 1 0 0 0-1.1-.22 1 1 0 0 0-.32.22l-2.83 2.83L2.29 16.05a1 1 0 0 0-.29.71V21a1 1 0 0 0 1 1h4.24a1 1 0 0 0 .76-.29l10.87-10.93L21.71 8c.1-.1.17-.2.22-.33a1 1 0 0 0 0-.24v-.14l.07-.05ZM6.83 20H4v-2.83l9.93-9.93 2.83 2.83L6.83 20ZM18.17 8.66l-2.83-2.83 1.42-1.41 2.82 2.82-1.41 1.42Z"/></svg>



				Edit page
			</a>
			<a href="https://contribute.docs.astro.build/guides/i18n/" class="sl-flex astro-dvlentyv">
				
	<svg aria-hidden="true" class="astro-dvlentyv astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path fill-rule="evenodd" d="M8.516 3a.94.94 0 0 0-.941.94v1.15H2.94a.94.94 0 1 0 0 1.882h7.362a7.422 7.422 0 0 1-1.787 3.958 7.42 7.42 0 0 1-1.422-2.425.94.94 0 1 0-1.774.627 9.303 9.303 0 0 0 1.785 3.043 7.422 7.422 0 0 1-4.164 1.278.94.94 0 1 0 0 1.881 9.303 9.303 0 0 0 5.575-1.855 9.303 9.303 0 0 0 4.11 1.74l-.763 1.525a.968.968 0 0 0-.016.034l-1.385 2.77a.94.94 0 1 0 1.683.841l1.133-2.267h5.806l1.134 2.267a.94.94 0 0 0 1.683-.841l-1.385-2.769a.95.95 0 0 0-.018-.036l-3.476-6.951a.94.94 0 0 0-1.682 0l-1.82 3.639a7.423 7.423 0 0 1-3.593-1.256 9.303 9.303 0 0 0 2.27-5.203h1.894a.94.94 0 0 0 0-1.881H9.456V3.94A.94.94 0 0 0 8.516 3Zm6.426 11.794a1.068 1.068 0 0 1-.02.039l-.703 1.407h3.924l-1.962-3.924-1.24 2.478Z" clip-rule="evenodd"/></svg>


 Translate this page
			</a>
		</div>


		
	</div>
	<div class="pagination-links print:hidden astro-t76ryodp" dir="ltr">
	<a href="/en/upgrade-astro/" rel="prev" class="astro-t76ryodp">
				
	<svg aria-hidden="true" class="astro-t76ryodp astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg>



				<span class="astro-t76ryodp">
					Previous
					<br class="astro-t76ryodp">
					<span class="link-title astro-t76ryodp">Upgrade Astro</span>
				</span>
			</a>
	<a href="/en/guides/upgrade-to/v4/" rel="next" class="astro-t76ryodp">
				
	<svg aria-hidden="true" class="astro-t76ryodp astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg>



				<span class="astro-t76ryodp">
					Next
					<br class="astro-t76ryodp">
					<span class="link-title astro-t76ryodp">v4.0</span>
				</span>
			</a>
</div>

	
</footer>
<section class="sl-flex astro-m2zh2vwj">
	<a href="/en/contribute/" class="sl-flex astro-m2zh2vwj">
		
	<svg aria-hidden="true" class="astro-m2zh2vwj astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path fill-rule="evenodd" d="M1.44 8.855v-.001l3.527-3.516c.34-.344.802-.541 1.285-.548h6.649l.947-.947c3.07-3.07 6.207-3.072 7.62-2.868a1.821 1.821 0 0 1 1.557 1.557c.204 1.413.203 4.55-2.868 7.62l-.946.946v6.649a1.845 1.845 0 0 1-.549 1.286l-3.516 3.528a1.844 1.844 0 0 1-3.11-.944l-.858-4.275-4.52-4.52-2.31-.463-1.964-.394A1.847 1.847 0 0 1 .98 10.693a1.843 1.843 0 0 1 .46-1.838Zm5.379 2.017-3.873-.776L6.32 6.733h4.638l-4.14 4.14Zm8.403-5.655c2.459-2.46 4.856-2.463 5.89-2.33.134 1.035.13 3.432-2.329 5.891l-6.71 6.71-3.561-3.56 6.71-6.711Zm-1.318 15.837-.776-3.873 4.14-4.14v4.639l-3.364 3.374Z" clip-rule="evenodd"/><path d="M9.318 18.345a.972.972 0 0 0-1.86-.561c-.482 1.435-1.687 2.204-2.934 2.619a8.22 8.22 0 0 1-1.23.302c.062-.365.157-.79.303-1.229.415-1.247 1.184-2.452 2.62-2.935a.971.971 0 1 0-.62-1.842c-.12.04-.236.084-.35.13-2.02.828-3.012 2.588-3.493 4.033a10.383 10.383 0 0 0-.51 2.845l-.001.016v.063c0 .536.434.972.97.972H2.24a7.21 7.21 0 0 0 .878-.065c.527-.063 1.248-.19 2.02-.447 1.445-.48 3.205-1.472 4.033-3.494a5.828 5.828 0 0 0 .147-.407Z"/></svg>



		Contribute
	</a>

	<a href="https://astro.build/chat" class="sl-flex astro-m2zh2vwj">
		<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="width:1.2em;height:1.2em;" class="astro-m2zh2vwj">
			<path d="M12.3 12.22A4.92 4.92 0 0 0 14 8.5a5 5 0 0 0-10 0a4.92 4.92 0 0 0 1.7 3.72A8 8 0 0 0 1 19.5a1 1 0 0 0 2 0a6 6 0 0 1 12 0a1 1 0 0 0 2 0a8 8 0 0 0-4.7-7.28M9 11.5a3 3 0 1 1 3-3a3 3 0 0 1-3 3m9.74.32A5 5 0 0 0 15 3.5a1 1 0 0 0 0 2a3 3 0 0 1 3 3a3 3 0 0 1-1.5 2.59a1 1 0 0 0-.5.84a1 1 0 0 0 .45.86l.39.26l.13.07a7 7 0 0 1 4 6.38a1 1 0 0 0 2 0a9 9 0 0 0-4.23-7.68" class="astro-m2zh2vwj"></path>
		</svg>
		Community
	</a>

	<a href="https://opencollective.com/astrodotbuild" class="sl-flex astro-m2zh2vwj">
		
	<svg aria-hidden="true" class="astro-m2zh2vwj astro-eytsx3ik" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.2em;"><path d="M20.16 5A6.29 6.29 0 0 0 12 4.36a6.27 6.27 0 0 0-8.16 9.48l6.21 6.22a2.78 2.78 0 0 0 3.9 0l6.21-6.22a6.27 6.27 0 0 0 0-8.84m-1.41 7.46-6.21 6.21a.76.76 0 0 1-1.08 0l-6.21-6.24a4.29 4.29 0 0 1 0-6 4.27 4.27 0 0 1 6 0 1 1 0 0 0 1.42 0 4.27 4.27 0 0 1 6 0 4.29 4.29 0 0 1 .08 6Z"/></svg>



		Sponsor
	</a>
</section>
								</div>
</div>
							
				</main>
			</div>
</div>
		</div>
</div>
	</body></html>